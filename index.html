<!DOCTYPE html> 
<html lang="en" xml:lang="en" > 
<head>
<title>Solution Methods for Microeconomic
Dynamic Stochastic Optimization Problems</title> 
<meta  charset="utf-8" /> 
<meta name="generator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<link rel="stylesheet" type="text/css" href="SolvingMicroDSOPs.css" /> 
<meta name="src" content="SolvingMicroDSOPs.tex"> 
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/mml-chtml.js"></script>
</head><body 
>
<!--l. 39--><p class="noindent" ><a 
 id="Hfootnote.1"></a><a 
 id="Hfootnote.2"></a>  
<div class="maketitle">
<h2 class="titleHead">Solution Methods for Microeconomic<br />
Dynamic Stochastic Optimization Problems</h2>
<div class="date" >2026-03-01</div>
<span 
class="ec-lmr-6">Â </span>
 <div class="author" ><span 
class="ec-lmr-12x-x-120">Christopher D. Carroll</span><sup class="textsuperscript"><span 
class="ec-lmr-6">1</span></sup></div>
<br />
</div>
<!--l. 23--><p class="noindent" ><span 
class="ec-lmr-10">Note: The GitHub repo   </span><a 
href="https://github.com/llorracc/SolvingMicroDSOPs" ><span 
class="ec-lmtt-10">SolvingMicroDSOPs</span></a> <span 
class="ec-lmr-10">associated with this document contains python code that</span>
<span 
class="ec-lmr-10">produces all results, from scratch, except for the last section on indirect inference. The numerical results have</span>
<span 
class="ec-lmr-10">been conï¬rmed by showing that the answers that the raw python produces correspond to the answers</span>
<span 
class="ec-lmr-10">produced by tools available in the  </span><a 
href="https://econ-ark.org" ><span 
class="ec-lmr-10">Econ-ARK</span></a> <span 
class="ec-lmr-10">toolkit, more speciï¬cally those in the   </span><a 
href="https://github.com/econ-ark/HARK" ><span 
class="ec-lmtt-10">HARK</span></a> <span 
class="ec-lmr-10">which</span>
<span 
class="ec-lmr-10">has full  </span><a 
href="https://docs.econ-ark.org" ><span 
class="ec-lmr-10">documentation</span></a><span 
class="ec-lmr-10">. The MSM results at the end have have been superseded by tools in the</span>
<a 
href="https://github.com/llorracc/EstimatingMicroDSOPs" ><span 
class="ec-lmtt-10">EstimatingMicroDSOPs repo</span></a><span 
class="ec-lmr-10">.</span>
<!--l. 27--><p class="indent" >  <a 
 id="abstract"></a> <section role="doc-abstract" class="abstract"> 

<!--l. 28--><p class="noindent" > <br 
class="newline" />_____________________________________________________________________________________
<!--l. 28--><p class="noindent" ><span 
class="ec-lmbx-12">Abstract</span><br 
class="newline" />   <span 
class="ec-lmr-10x-x-109">These notes describe tools for solving microeconomic dynamic stochastic optimization problems,</span>
<span 
class="ec-lmr-10x-x-109">and show how to use those tools for eï¬ƒciently estimating a standard life cycle consumption/saving</span>
<span 
class="ec-lmr-10x-x-109">model using microeconomic data. No attempt is made at a systematic overview of the many possible</span>
<span 
class="ec-lmr-10x-x-109">technical choices; instead, I present a speciï¬c set of methods that have proven useful in my own work</span>
<span 
class="ec-lmr-10x-x-109">(and explain why other popular methods, such as value function iteration, are a bad idea).</span>
<span 
class="ec-lmr-10x-x-109">Paired with these notes is Python code that solves the problems described in the text.</span>
<br 
class="newline" />        
<blockquote class="quote">            
<dl class="list2"><dt class="list">
<span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â Keywords</span><span 
class="ec-lmbx-12">Â </span>
</dt><dd 
class="list">
<!--l. 30--><p class="noindent" >Dynamic  Stochastic  Optimization,  Method  of  Simulated
Moments, Structural Estimation, Indirect Inference
</dd>
<dt class="list">
<span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â </span><span 
class="ec-lmbx-12">Â JEL codes</span><span 
class="ec-lmbx-12">Â </span>
</dt><dd 
class="list">
                                                                                     
                                                                                     
              
<!--l. 30--><p class="noindent" >E21, F41
<!--l. 30--><p class="noindent" > <a 
href="https://econ-ark.org" ><img 
src="@resources/econ-ark/PoweredByEconARK.png" alt="PIC"  
width="105" height="15" ></a></dd></dl>
</blockquote>
</section>
<div class="center" 
>
<!--l. 34--><p class="noindent" >
<table  
cellpadding="0" border="0"  
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:46;" 
class="tabbing"><span 
class="ec-lmtt-8x-x-75">Â </span><span 
class="ec-lmtt-8x-x-75">Â </span><span 
class="ec-lmtt-8x-x-75">Â </span><span 
class="ec-lmtt-8x-x-75">Â PDF:</span><span 
class="ec-lmtt-8x-x-75">Â  </span></td><td  
class="tabbing"></td><td  
class="tabbing"> <a 
href="https://github.com/llorracc/SolvingMicroDSOPs/blob/master/SolvingMicroDSOPs.pdf" ><span 
class="ec-lmtt-8x-x-75">https://github.com/llorracc/SolvingMicroDSOPs/blob/master/SolvingMicroDSOPs.pdf</span></a>
</td></tr></table>
<!--l. 36--><p class="noindent" >                           <table  
cellpadding="0" border="0"  
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:46;" 
class="tabbing"><span 
class="ec-lmtt-8x-x-75">Â Slides:</span><span 
class="ec-lmtt-8x-x-75">Â  </span></td><td  
class="tabbing"></td><td  
class="tabbing"> <a 
href="https://github.com/llorracc/SolvingMicroDSOPs/blob/master/SolvingMicroDSOPs-Slides.pdf" ><span 
class="ec-lmtt-8x-x-75">https://github.com/llorracc/SolvingMicroDSOPs/blob/master/SolvingMicroDSOPs-Slides.pdf</span></a></td></tr></table>
<!--l. 37--><p class="noindent" >                                                    <table  
cellpadding="0" border="0"  
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:46;" 
class="tabbing"><span 
class="ec-lmtt-8x-x-75">Â </span><span 
class="ec-lmtt-8x-x-75">Â </span><span 
class="ec-lmtt-8x-x-75">Â </span><span 
class="ec-lmtt-8x-x-75">Â Web:</span><span 
class="ec-lmtt-8x-x-75">Â  </span></td><td  
class="tabbing"></td><td  
class="tabbing"> <a 
href="https://llorracc.github.io/SolvingMicroDSOPs" ><span 
class="ec-lmtt-8x-x-75">https://llorracc.github.io/SolvingMicroDSOPs</span></a></td></tr></table>
<!--l. 38--><p class="noindent" >                                         <table  
cellpadding="0" border="0"  
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:46;" 
class="tabbing"><span 
class="ec-lmtt-8x-x-75">Â </span><span 
class="ec-lmtt-8x-x-75">Â </span><span 
class="ec-lmtt-8x-x-75">Â Code:</span><span 
class="ec-lmtt-8x-x-75">Â  </span></td><td  
class="tabbing"></td><td  
class="tabbing"> <a 
href="https://github.com/llorracc/SolvingMicroDSOPs/tree/master/Code" ><span 
class="ec-lmtt-8x-x-75">https://github.com/llorracc/SolvingMicroDSOPs/tree/master/Code</span></a></td></tr></table>
<!--l. 39--><p class="noindent" >                                                   <table  
cellpadding="0" border="0"  
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:46;" 
class="tabbing"><span 
class="ec-lmtt-8x-x-75">Archive:</span><span 
class="ec-lmtt-8x-x-75">Â  </span></td><td  
class="tabbing"></td><td  
class="tabbing"> <a 
href="https://github.com/llorracc/SolvingMicroDSOPs" ><span 
class="ec-lmtt-8x-x-75">https://github.com/llorracc/SolvingMicroDSOPs</span></a></td></tr></table>
<!--l. 40--><p class="noindent" >                              <table  
cellpadding="0" border="0"  
class="tabbing"><tr  
style="vertical-align:baseline;" class="tabbing"><td style="width:46;" 
class="tabbing"><span 
class="ec-lmtt-8x-x-75">Â </span><span 
class="ec-lmtt-8x-x-75">Â </span><span 
class="ec-lmtt-8x-x-75">Â </span><span 
class="ec-lmtt-8x-x-75">Â </span><span 
class="ec-lmtt-8x-x-75">Â </span><span 
class="ec-lmtt-8x-x-75">Â </span><span 
class="ec-lmtt-8x-x-75">Â </span><span 
class="ec-lmtt-8x-x-75">Â </span><span 
class="ec-lmtt-8x-x-75">Â  </span></td><td  
class="tabbing"></td><td  
class="tabbing"><span 
class="ec-lmri-7x-x-85">(Contains LaTeX code for this document and software producing ï¬gures and results)</span></td></tr></table>
<!--l. 42--><p class="noindent" >
</div>
<!--l. 49--><p class="noindent" ><span class="footnote-mark"><sup class="textsuperscript"></sup></span>
<!--l. 51--><p class="indent" >  <span class="footnote-mark"><sup class="textsuperscript"></sup></span>
      
<sup class="textsuperscript"></sup>
<!--l. 48--><p class="noindent" ><sup class="textsuperscript"><span 
class="ec-lmr-6">1</span></sup><span 
class="ec-lmr-10">Carroll: Department of Economics, Johns Hopkins University, Baltimore, MD,   </span><a 
href="mailto:ccarroll@jhu.edu" ><span 
class="ec-lmtt-10">ccarroll@jhu.edu</span></a><span 
class="ec-lmr-10">Â </span><span 
class="ec-lmr-10">Â </span><span 
class="ec-lmr-10">Â </span><span 
class="ec-lmr-10">Â </span>
<sup class="textsuperscript"></sup>      
<span 
class="ec-lmr-10">The notes were originally written for my Advanced Topics in Macroeconomic Theory class at</span>
<span 
class="ec-lmr-10">Johns Hopkins University; instructors elsewhere are welcome to use them for teaching purposes. Relative</span>
<span 
class="ec-lmr-10">to earlier drafts, this version incorporates several improvements related to new results in the paper</span>
<a 
href="http://econ-ark.github.io/BufferStockTheory" ><span 
class="ec-lmr-10">â€œTheoretical Foundations of Buï¬€er Stock Savingâ€</span></a> <span 
class="ec-lmr-10">(especially tools for approximating the consumption</span>
<span 
class="ec-lmr-10">and value functions). Like the last major draft, it also builds on material in â€œThe Method of Endogenous</span>
<span 
class="ec-lmr-10">Gridpoints  for  Solving  Dynamic  Stochastic  Optimization  Problemsâ€  published  in  </span><span 
class="ec-lmri-10">Economics</span>
<span 
class="ec-lmri-10">Letters</span><span 
class="ec-lmr-10">,  available  at  </span><a 
href="http://www.econ2.jhu.edu/people/ccarroll/EndogenousArchive.zip" class="url" ><span 
class="ec-lmtt-10">http://www.econ2.jhu.edu/people/ccarroll/EndogenousArchive.zip</span></a><span 
class="ec-lmr-10">,  and</span>
<span 
class="ec-lmr-10">by  including  sample  code  for  a  method  of  simulated  moments  estimation  of  the  life  cycle</span>
<span 
class="ec-lmr-10">model  </span><span 
class="ec-lmri-10">a  la  </span><a 
href="#XgpLifecycle"><span 
class="ec-lmr-10">Gourinchas  and  Parker</span></a><span 
class="ec-lmr-10">Â (</span><a 
href="#XgpLifecycle"><span 
class="ec-lmr-10">2002</span></a><span 
class="ec-lmr-10">)  and  Cagetti</span><span 
class="ec-lmr-10">Â (</span><a 
href="#XcagettiWprofiles"><span 
class="ec-lmr-10">2003</span></a><span 
class="ec-lmr-10">).  Background  derivations,  notation,</span>
<span 
class="ec-lmr-10">and   related   subjects   are   treated   in   my   class   notes   for   ï¬rst   year   macro,   available   at</span>
<a 
href="http://www.econ2.jhu.edu/people/ccarroll/public/lecturenotes/consumption" class="url" ><span 
class="ec-lmtt-10">http://www.econ2.jhu.edu/people/ccarroll/public/lecturenotes/consumption</span></a><span 
class="ec-lmr-10">.  I  am  grateful</span>
<span 
class="ec-lmr-10">to several generations of graduate students in helping me to reï¬ne these notes, to Marc Chan for help</span>
<span 
class="ec-lmr-10">in updating the text and software to be consistent with </span><a 
href="#XcarrollEGM"><span 
class="ec-lmr-10">Carroll</span></a><span 
class="ec-lmr-10">Â (</span><a 
href="#XcarrollEGM"><span 
class="ec-lmr-10">2006</span></a><span 
class="ec-lmr-10">), to Kiichi Tokuoka for drafting</span>
<span 
class="ec-lmr-10">the section on structural estimation, to Damiano Sandri for exceptionally insightful help in revising and</span>
<span 
class="ec-lmr-10">updating the method of simulated moments estimation section, and to Weifeng Wu and Metin Uyanik</span>
<span 
class="ec-lmr-10">for revising to be consistent with the â€˜method of moderationâ€™ and other improvements. All errors are</span>
<span 
class="ec-lmr-10">my own. This document can be cited as </span><a 
href="#XSolvingMicroDSOPs"><span 
class="ec-lmr-10">Carroll</span></a><span 
class="ec-lmr-10">Â (</span><a 
href="#XSolvingMicroDSOPs"><span 
class="ec-lmr-10">2023a</span></a><span 
class="ec-lmr-10">) in the references.</span>
                                                                                     
                                                                                     
<!--l. 56--><p class="indent" >
                                                                                     
                                                                                     
<!--l. 13--><p class="indent" >
                                                                                     
                                                                                     
<!--l. 6--><p class="indent" >  <a 
 id="introduction"></a>
  
<h3 class="sectionHead"><span class="titlemark">1 </span> <a 
 id="x1-10001"></a>Introduction</h3>
<!--l. 9--><p class="noindent" >These notes provide a gentle-as-possible introduction to a particular set of
solution tools for the canonical consumption-saving/portfolio allocation problem
for a consumer facing uninsurable idiosyncratic risk to nonï¬nancial income
(e.g., labor or transfer income), ï¬rst without and then with optimal portfolio
choice,<span class="footnote-mark"><a 
href="SolvingMicroDSOPs2.html#fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-1001f1"></a>
    
with detailed intuitive discussion of various mathematical and computational techniques that,
together, accelerate the solution by many orders of magnitude. The problem is solved with and
without liquidity constraints, and the inï¬nite horizon solution is the limit of the ï¬nite horizon
solution. After the basic consumption/saving problem with a deterministic interest rate is
described and solved, an extension with portfolio choice between a riskless and a risky asset is
also solved. Finally, a simple example shows how to use these methods (via the statistical
â€˜method of simulated momentsâ€™ (MSM for short)) to estimate structural parameters like
the coeï¬ƒcient of relative risk aversion (<span 
class="ec-lmri-12">a la </span>Gourinchas and ParkerÂ (<a 
href="#XgpLifecycle">2002</a>) and
CagettiÂ (<a 
href="#XcagettiWprofiles">2003</a>)).
<!--l. 6--><p class="indent" >  <a 
 id="the-problem"></a>
  
<h3 class="sectionHead"><span class="titlemark">2 </span> <a 
 id="x1-20002"></a>The Problem</h3>
<!--l. 9--><p class="noindent" >The usual analysis of dynamic stochastic programming problems packs a great many events
(intertemporal choice, stochastic shocks, intertemporal returns, income growth, the taking of
expectations, time discounting, and more) into a complex decision in which the agent
makes an optimal choice simultaneously taking all these elements into account.
For the dissection here, we will be careful to break down everything that happens
into distinct operations so that each element can be scrutinized and understood in
isolation.
<!--l. 18--><p class="indent" >  We are interested in the behavior of a consumer who begins period
<!--l. 18--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi></math> with a
certain amount of â€˜capitalâ€™ <table class="equation"><tr><td>
<!--l. 19--><p class="indent" >
                                                                                     
                                                                                     
<!--l. 19--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-2001r1"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>k</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mtd>
  
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(1)</td></tr></table>
<!--l. 24--><p class="indent" >  which immediately earns a return factor <!--l. 24--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math>.
Simultaneously, the consumer receives noncapital income
<!--l. 24--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>y</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math>, which is the product
of â€˜permanent incomeâ€™ <!--l. 24--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math>
and a transitory shock <!--l. 24--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math>:
<a 
 id="eq-yLvl"></a> <table class="equation"><tr><td>
<!--l. 26--><p class="indent" >
<!--l. 26--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-2002r2"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>y</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mtd>
  <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msub><mrow 
> <mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mtd>
  
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(2)</td></tr></table>
<!--l. 31--><p class="indent" >  whose expectation is 1 (that is, before realization of the transitory shock, the consumerâ€™s
expectation is that actual income will on average be equal to permanent income
<!--l. 31--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math>).
<!--l. 33--><p class="indent" >  The combination of the capital return and income deï¬nes the consumerâ€™s â€˜market resourcesâ€™
(sometimes called â€˜cash-on-hand,â€™ followingÂ <a 
href="#XdeatonUnderstandingC">Deaton</a>Â (<a 
href="#XdeatonUnderstandingC">1992</a>)): <a 
 id="eq-mLvl"></a> <table class="equation"><tr><td>
<!--l. 35--><p class="indent" >
<!--l. 35--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-2003r3"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>m</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mtd>
   <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msub><mrow 
> <mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>k</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><msub><mrow 
><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">+</mo><msub><mrow 
> <mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>y</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">,</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(3)</td></tr></table>
<!--l. 40--><p class="indent" >  available to be spent on consumption <!--l. 40--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>c</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math>
for a consumer subject to a liquidity constraint that requires
<!--l. 40--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>c</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">â‰¤</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>m</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math>
(though we are not imposing such a constraint yetâ€”see subsectionÂ <a 
href="#x1-210006.8">6.8<!--tex4ht:ref: subsec:LiqConstrSelfImposed --></a>). Finally we deï¬ne <a 
 id="eq-aLvl"></a>
                                                                                     
                                                                                     
<table class="equation"><tr><td>
<!--l. 42--><p class="indent" >
<!--l. 42--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-2004r4"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>a</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mtd>
  <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msub><mrow 
> <mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>m</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>c</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mtd>
  
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(4)</td></tr></table>
<!--l. 47--><p class="indent" >  mnemonically as â€˜assets-after-all-actions-are-accomplished.â€™
<!--l. 49--><p class="indent" >  The consumerâ€™s goal is to maximize discounted utility from consumption over the rest of a lifetime
ending at date <!--l. 49--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>T</mi></math>: <a 
 id="eq-MaxProb"></a>
<table class="equation"><tr><td>
<!--l. 1--><p class="indent" >
<!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                             <mstyle 
   id="x1-2005r5"  class="label" ></mstyle><!--endlabel-->
                             <mo>max</mo> <mspace width="0.33em" class="nbsp" /><msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mrow><mo fence="true" form="prefix"> [</mo><mrow><munderover accentunder="false" accent="false"><mrow  
><mo  
>âˆ‘</mo>
  </mrow><mrow 
><mi 
>n</mi><mo 
class="MathClass-rel" stretchy="false">=</mo><mn>0</mn></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>t</mi></mrow></munderover 
><msup><mrow 
><mi 
>Î²</mi></mrow><mrow 
><mi 
>n</mi></mrow></msup 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>c</mi></mstyle></mstyle></mrow><mrow 
>
<mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mi 
>n</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-punc" stretchy="false">.</mo>
</math></td><td class="eq-no">(5)</td></tr></table>
<!--l. 60--><p class="indent" >  Income evolves according to: <a 
 id="eq-permincgrow"></a> <table class="equation"><tr><td>
<!--l. 1--><p class="indent" >
<!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-2006r6"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo><msub><mrow 
> <mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mtd>
                          <mtd columnalign="left" ><mstyle 
class="text"><mtext  >Â Â Â Â â€“Â permanentÂ laborÂ incomeÂ dynamics</mtext></mstyle></mtd>
                                                                <mtd columnalign="right" ></mtd>
</mtr><mtr 
><mtd columnalign="right" ><mo>log</mo><!--nolimits--> <mspace width="0.33em" class="nbsp" /><msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mi 
>n</mi></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mspace width="0.33em" class="nbsp" /><mstyle 
mathvariant="script"><mi 
>N</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msubsup><mrow 
><mi 
>Ïƒ</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mn>2</mn></mrow></msubsup 
><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mn>2</mn><mo 
class="MathClass-punc" stretchy="false">,</mo><msubsup><mrow 
><mi 
>Ïƒ</mi></mrow><mrow 
>
<mi 
>ğœƒ</mi></mrow><mrow 
><mn>2</mn></mrow></msubsup 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" ><mstyle 
class="text"><mtext  >Â Â â€“Â lognormalÂ transitoryÂ shocks</mtext></mstyle><mspace width="0.33em" class="nbsp" /><mi 
class="MathClass-op">âˆ€</mi><mo> â¡<!--FUNCTION APPLICATION--></mo><mspace width="0.33em" class="nbsp" /><mi 
>n</mi> <mo 
class="MathClass-rel" stretchy="false">&#x003E;</mo> <mn>0</mn><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(6)</td></tr></table>
                                                                                     
                                                                                     
<!--l. 72--><p class="indent" >  Equation (<a 
href="#x1-2006r6">6<!--tex4ht:ref: eq:permincgrow --></a>) indicates that we are allowing for a predictable average proï¬le of income growth over
the lifetime <!--l. 72--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mo 
class="MathClass-open" stretchy="false">{</mo><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle><mo 
class="MathClass-close" stretchy="false">}</mo></mrow><mrow 
><mn>0</mn></mrow><mrow 
><mi 
>T</mi> </mrow></msubsup 
></math>
(to capture typical career wage paths, pension arrangements,
etc).<span class="footnote-mark"><a 
href="SolvingMicroDSOPs3.html#fn2x0"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-2007f2"></a>
    
Finally, the utility function is of the Constant Relative Risk Aversion (CRRA) form,
<!--l. 72--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mo 
class="MathClass-bin" stretchy="false">âˆ™</mo><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <msup><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ™</mo></mrow><mrow 
><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mn>1</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>Ï</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>.
<!--l. 74--><p class="indent" >  It is well known that this problem can be rewritten in recursive (Bellman) form: <a 
 id="eq-vrecurse"></a>
<table class="equation"><tr><td>
<!--l. 1--><p class="indent" >
<!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-2009r7"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>m</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">,</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><munder><mrow 
><mo>max</mo> </mrow><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>c</mi></mstyle></mstyle></mrow></munder 
><mspace width="0.33em" class="nbsp" /><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>c</mi></mstyle></mstyle><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>Î²</mi><msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">[</mo><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>m</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">,</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(7)</td></tr></table>
<!--l. 84--><p class="indent" >  subject to the Dynamic Budget Constraint (DBC) deï¬ned by equationÂ (<a 
href="#x1-2003r3">3<!--tex4ht:ref: eq:mLvl --></a>), and to the
dynamic process for income deï¬ned in (<a 
href="#x1-2006r6">6<!--tex4ht:ref: eq:permincgrow --></a>) and to a transition equation that deï¬nes next
periodâ€™s initial capital as this periodâ€™s end-of-period assets: <table class="equation"><tr><td>
<!--l. 85--><p class="indent" >
<!--l. 85--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-2010r8"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>k</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mtd>
    <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msub><mrow 
> <mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>a</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(8)</td></tr></table>
<!--l. 5--><p class="indent" >  <a 
 id="normalization"></a>
                                                                                     
                                                                                     
  
<h3 class="sectionHead"><span class="titlemark">3 </span> <a 
 id="x1-30003"></a>Normalization</h3>
<!--l. 8--><p class="noindent" >The single most powerful method for speeding the solution of such models is to redeï¬ne the
problem in a way that reduces the number of state variables (if at all possible). In the
consumption context, the obvious idea is to see whether the problem can be rewritten in
terms of the ratio of various variables to permanent noncapital (â€˜laborâ€™) income
<!--l. 8--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math>
(henceforth for brevity, â€˜permanent income.â€™)
<!--l. 10--><p class="indent" >  In the last period of life <!--l. 10--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>T</mi></math>,
there is no future value, <!--l. 10--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold"><mi 
>v</mi></mstyle></mstyle></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>0</mn></math>
(boldface <!--l. 10--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold"><mi 
>v</mi></mstyle></mstyle></math>
denotes the value function in <span 
class="ec-lmri-12">levels</span>; the nonbold normalized counterpart
<!--l. 10--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></math> is
deï¬ned below), so the optimal plan is to consume everything: <table class="equation"><tr><td>
<!--l. 11--><p class="indent" >
<!--l. 11--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-3001r9"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold"><mi 
>v</mi></mstyle></mstyle></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>m</mi></mstyle></mstyle></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">,</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <mfrac><mrow 
><msubsup><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>m</mi></mstyle></mstyle></mrow><mrow 
><mi 
>T</mi> </mrow><mrow 
><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msubsup 
></mrow>
 
<mrow 
>
<mn>1</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>Ï</mi></mrow></mfrac> <mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(9)</td></tr></table>
<!--l. 15--><p class="indent" >  Now deï¬ne nonbold variables as the bold variable divided by the
level of permanent income in the same period, so that, for example,
<!--l. 15--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo><msub><mrow 
> <mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>m</mi></mstyle></mstyle></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
></math>; and deï¬ne
<!--l. 15--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></math>.<span class="footnote-mark"><a 
href="SolvingMicroDSOPs4.html#fn3x0"><sup class="textsuperscript">3</sup></a></span><a 
 id="x1-3002f3"></a>
    
For our CRRA utility function, <!--l. 15--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>x</mi><mi 
>y</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <msup><mrow 
><mi 
>x</mi></mrow><mrow 
><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>y</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>,
so (<a 
href="#x1-3001r9">9<!--tex4ht:ref: eq:levelTm1 --></a>) can be rewritten as <table class="equation"><tr><td>
<!--l. 16--><p class="indent" >
                                                                                     
                                                                                     
<!--l. 16--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-3004r10"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold"><mi 
>v</mi></mstyle></mstyle></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>m</mi></mstyle></mstyle></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">,</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
            <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msubsup><mrow 
> <mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>T</mi> </mrow><mrow 
><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msubsup 
><mfrac><mrow 
><msubsup><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>T</mi> </mrow><mrow 
><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msubsup 
></mrow>

<mrow 
>
<mn>1</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>Ï</mi></mrow></mfrac> </mtd>
                                     <mtd columnalign="right" ></mtd>
</mtr><mtr 
><mtd columnalign="right" ></mtd>            
<mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msubsup><mrow 
> <mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow><mrow 
><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msubsup 
><msubsup><mrow 
><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
>
<mi 
>T</mi> </mrow><mrow 
><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msubsup 
><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
>
<mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(10)</td></tr></table>
<!--l. 30--><p class="indent" >  Because we are dividing <!--l. 30--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mn>1</mn></math>
level variables by <!--l. 30--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo><msub><mrow 
> <mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math>,
a normalized return factor emerges: <a 
 id="eq-RNrmByG"></a> <table class="equation"><tr><td>
<!--l. 32--><p class="indent" >
<!--l. 32--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-3005r11"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">â‰¡</mo><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><msub><mrow 
><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(11)</td></tr></table>
<!--l. 36--><p class="indent" >  (We treat <!--l. 36--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle></math>
as time-invariant and drop the period subscript that appeared in (<a 
href="#x1-2003r3">3<!--tex4ht:ref: eq:mLvl --></a>).)
<!--l. 38--><p class="indent" >  Now deï¬ne a new optimization problem: <a 
 id="eq-vNormed"></a> <table class="equation"><tr><td>
<!--l. 1--><p class="indent" >
<!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-3006r12"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
      <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><munder><mrow 
><mo>max</mo> </mrow><mrow 
><mi 
>c</mi></mrow></munder 
><mspace width="0.33em" class="nbsp" /><mspace width="0.33em" class="nbsp" /><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>Î²</mi><msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">[</mo><msubsup><mrow 
><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow><mrow 
><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msubsup 
><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
>
<mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo></mtd>
                                            <mtd columnalign="right" ></mtd>
</mtr><mtr 
><mtd columnalign="right" ></mtd>
      <mtd columnalign="left" ><mstyle 
class="text"><mtext  >s.t.</mtext></mstyle></mtd>
</mtr><mtr 
><mtd columnalign="right" ><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mtd>    <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <msub><mrow 
><mi 
>c</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mtd>
</mtr><mtr 
><mtd columnalign="right" ><msub><mrow 
><mi 
>k</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mtd>  
<mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mtd>
</mtr><mtr 
><mtd columnalign="right" ><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mtd>  
<mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <msub><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><msub><mrow 
><mi 
>k</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">+</mo> <msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(12)</td></tr></table>
<!--l. 57--><p class="indent" >  Then it is easy to see that for <!--l. 57--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>T</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mn>1</mn></math>, we
can write boldface (nonnormalized) <!--l. 57--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold"><mi 
>v</mi></mstyle></mstyle></math>
as a function of <!--l. 57--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></math>
(normalized value) and permanent income: <table class="equation"><tr><td>
                                                                                     
                                                                                     
<!--l. 58--><p class="indent" >
<!--l. 58--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-3007r13"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold"><mi 
>v</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>m</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">,</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msubsup><mrow 
> <mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow><mrow 
><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msubsup 
><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
>
<mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">,</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(13)</td></tr></table>
<!--l. 62--><p class="indent" >  and so on back to all earlier periods (by backward induction: if the factorization holds at
<!--l. 62--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mn>1</mn></math>, substituting into the
Bellman equation at <!--l. 62--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi></math>
and using the homogeneity of CRRA utility yields the same factorization at
<!--l. 62--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi></math>).
Hence, if we solve the problem (<a 
href="#x1-3006r12">12<!--tex4ht:ref: eq:vNormed --></a>) which has only a single state variable
<!--l. 62--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math>, we can
obtain the levels of the value function from (<a 
href="#x1-3007r13">13<!--tex4ht:ref: eq:vLvlFromvFunc --></a>), and of consumption and all other variables
from the corresponding permanent-income-normalized solution objects by multiplying each by
<!--l. 62--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math>, e.g.Â 
<div class="equation-star">
<!--tex4ht:inline--><!--l. 63--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" >
<mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>m</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">,</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo><msub><mrow 
> <mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mover class="msup"><mrow 
><mover accent="false"><mrow><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>m</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mrow><mo>ï¸·</mo></mover> </mrow><mrow 
><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
>
    </mrow></mover 
><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math>
<!--l. 65--><p class="nopar" > </div>
<!--l. 68--><p class="indent" >  We have thus reduced the problem from two continuous state variables to one (and thereby
enormously simpliï¬ed its solution).
<!--l. 70--><p class="indent" >  For future reference it will be useful to write (<a 
href="#x1-3006r12">12<!--tex4ht:ref: eq:vNormed --></a>) in the traditional way, by substituting
<!--l. 70--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math> and
<!--l. 70--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>k</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></math> into
<!--l. 70--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></math>: <a 
 id="eq-vusual"></a>
<table class="equation"><tr><td>
<!--l. 72--><p class="indent" >
                                                                                     
                                                                                     
<!--l. 72--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-3008r14"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><munder><mrow 
><mo>max</mo> </mrow><mrow 
><mi 
>c</mi></mrow></munder 
><mspace width="0.33em" class="nbsp" /><mspace width="0.33em" class="nbsp" /><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>Î²</mi><msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">[</mo><msubsup><mrow 
><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow><mrow 
><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msubsup 
><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
>
<mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mover class="msup"><mrow 
><mover accent="false"><mrow><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><msub><mrow 
><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">+</mo> <msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mrow><mo>ï¸·</mo></mover> </mrow><mrow 
><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
>
        </mrow></mover 
><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(14)</td></tr></table>
<!--l. 6--><p class="indent" >  <a 
 id="notation"></a>
  
<h3 class="sectionHead"><span class="titlemark">4 </span> <a 
 id="x1-40004"></a>Notation</h3>
<!--l. 9--><p class="noindent" ><a 
 id="intervals-stages-perches"></a>
  
<h4 class="subsectionHead"><span class="titlemark">4.1 </span> <a 
 id="x1-50004.1"></a>Periods, Stages, Perches</h4>
<!--l. 12--><p class="noindent" >The problem so far assumes that the agent has only one decision. But agents often have multiple
choices per periodâ€”for example, a consumption decision, a labor supply choice, and a choice of what
proportion <!--l. 12--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi></math>
of capital <!--l. 12--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi></math>
to invest in a risky vehicle. We identify each stage type in two ways: by a <span 
class="ec-lmbx-12">short-name </span>(a textual
name, given when the stage is ï¬rst introduced) and by a <span 
class="ec-lmbx-12">control-name </span>(the stageâ€™s control
variable, if any). For example, a labor supply stage might have short-name <span 
class="ec-lmss-12">labor </span>and control-name
<!--l. 12--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>â„“</mi></math>; a consumption stage
has control-name <!--l. 12--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></math>.
A stage list that constitutes a period may therefore be written by short-name,
e.g.Â <!--l. 12--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">[</mo><mstyle 
class="text"><mtext class="textsf" mathvariant="sans-serif" >labor</mtext></mstyle><mo 
class="MathClass-punc" stretchy="false">,</mo><mstyle 
class="text"><mtext class="textsf" mathvariant="sans-serif" >cons-noshocks</mtext></mstyle><mo 
class="MathClass-punc" stretchy="false">,</mo><mstyle 
class="text"><mtext class="textsf" mathvariant="sans-serif" >disc</mtext></mstyle><mo 
class="MathClass-close" stretchy="false">]</mo></math>, or by
control-name, e.g.Â <!--l. 12--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>â„“</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-punc" stretchy="false">,</mo><mi 
>Î²</mi><mo 
class="MathClass-close" stretchy="false">]</mo></math>.
A modeler might want to explore whether the order in which the stages are solved makes any
diï¬€erence, either to the substantive results or to aspects of the computational solution like
speed and accuracy; with this scheme they do so merely by changing the order in which the
stages are listed in the speciï¬cation of the period.
<!--l. 14--><p class="indent" >  If, as in section <a 
href="#x1-20002">2<!--tex4ht:ref: sec:the-problem --></a>, we hard-wire into the solution code for each stage an assumption that its
successor stage will be something in particular (say, the consumption stage assumes that the
portfolio choice is next), then if we want to change the order of the stages (say, labor supply
after consumption, followed by portfolio choice), we will need to re-hard-wire each of the
stages to know new things about its new successor (for example, the speciï¬cs of the
distribution of the rate of return on the risky asset must be known by whatever stage precedes
the portfolio choice stage).
<!--l. 16--><p class="indent" >  The cardinal insight of <a 
href="#Xbellman1957">Bellman</a>Â (<a 
href="#Xbellman1957">1957</a>) is that <span 
class="ec-lmri-12">everything that matters </span>for the solution to
the current problem is encoded in a â€˜continuation-value function.â€™
                                                                                     
                                                                                     
<!--l. 18--><p class="indent" >  Using that insight, we describe here a framework for isolating the stage problems within a
period from each other, and the period from its successors or predecessors in any other period.
The advantage of this isolation is that each stage problem becomes a self-contained <span 
class="ec-lmri-12">module</span>: Its
internal logicâ€”the computation it performs on value functionsâ€”is deï¬ned independently of
where it sits in the sequence of stages.
<!--l. 22--><p class="indent" >  Modularity is valuable because it makes exploring such alternative model
structures <span 
class="ec-lmri-12">cheap</span>. Using control-name indexing (e.g., the consumption stage by
<!--l. 22--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></math>), after considering
the stage-order <!--l. 22--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>â„“</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-punc" stretchy="false">,</mo><mi 
>Ï‚</mi><mo 
class="MathClass-close" stretchy="false">]</mo></math>,
the modeler can reorder the stages to consider, say, the order
<!--l. 22--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>â„“</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mi 
>Ï‚</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-close" stretchy="false">]</mo></math>
<span 
class="ec-lmri-12">without rewriting any of the code that solves each individual</span>
<span 
class="ec-lmri-12">stage</span>.<span class="footnote-mark"><a 
href="SolvingMicroDSOPs5.html#fn4x0"><sup class="textsuperscript">4</sup></a></span><a 
 id="x1-5001f4"></a>
    
What must change are the <span 
class="ec-lmri-12">transitions</span>â€”the mappings that connect the end of one stage to the
beginning of the nextâ€”which must be rewired to reï¬‚ect the new ordering and its implied
information structure. The stage-level code itself remains untouched.
<!--l. 25--><p class="indent" >  <a 
 id="prchs"></a>
  
<h4 class="subsectionHead"><span class="titlemark">4.2 </span> <a 
 id="x1-60004.2"></a>Perches</h4>
<!--l. 28--><p class="noindent" >The key is to distinguish, within each stageâ€™s Bellman problem, three viewpoints or â€˜perchesâ€™
(we use that word to empasize that the perch does not <span 
class="ec-lmri-12">do </span>anything: It is merely a collection of
mathematical and computational functions and objects).
<ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-6002x1">      
<!--l. 30--><p class="noindent" ><span 
class="ec-lmbx-12">Arrival</span>: Incoming state variables (e.g., <!--l. 30--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi></math>)
are known, but any shocks associated with the stage have not been realized and
decision(s) have not yet been made
</li>
<li 
  class="enumerate" id="x1-6004x2">      
<!--l. 31--><p class="noindent" ><span 
class="ec-lmbx-12">Decision</span>: The agent solves the decision problem for the period
</li>
<li 
  class="enumerate" id="x1-6006x3">
                                                                                     
                                                                                     
      
<!--l. 32--><p class="noindent" ><span 
class="ec-lmbx-12">Continuation</span>:  After  all  decisions  have  been  made,  their  consequences  are
measured  by  evaluation  of  the  continuing-value  function  at  the  values  of  the
â€˜outgoingâ€™ state variables (sometimes called â€˜post-stateâ€™ variables)</li></ol>
<!--l. 35--><p class="indent" >  This framework is silent about when shocks (if any) occur. In a consumption problem, the
usual assumption is that shocks have been realized before the spending decision is made so
that the consumer knows their resources when they decide how much to spend. But in a
portfolio choice problem, the portfolio share decision must be made before the shock that
determines the risky rate of return is known.
<div class="table">
                                                                                     
                                                                                     
<!--l. 37--><p class="indent" >  <a 
 id="x1-60071"></a><figure class="float" 
>
                                                                                     
                                                                                     
<figcaption class="caption" ><span class="id">TableÂ 1: </span><span  
class="content">Perches within the <span 
class="ec-lmss-12">cons-with-shocks </span>stage</span></figcaption><!--tex4ht:label?: x1-60071 -->
<div class="center" 
>
<!--l. 38--><p class="noindent" >
<div class="tabular"> <table id="TBL-2" class="tabular" 
rules="groups" 
><colgroup id="TBL-2-1g"><col 
id="TBL-2-1"></colgroup><colgroup id="TBL-2-2g"><col 
id="TBL-2-2"></colgroup><colgroup id="TBL-2-3g"><col 
id="TBL-2-3"></colgroup><colgroup id="TBL-2-4g"><col 
id="TBL-2-4"></colgroup><colgroup id="TBL-2-5g"><col 
id="TBL-2-5"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-2-1-"><td  style="text-align:right; white-space:nowrap;" id="TBL-2-1-1"  
class="td11">       Perch  </td>
                  <td  style="text-align:center; white-space:nowrap;" id="TBL-2-1-2"  
class="td11">                                 Indicator                                                     </td>
                                                                                                            <td  style="text-align:center; white-space:nowrap;" id="TBL-2-1-3"  
class="td11">                                   State                                                       </td>
                                                                                                                                                                                                      <td  style="text-align:center; white-space:nowrap;" id="TBL-2-1-4"  
class="td11">                               value functions                                                 </td>
                                                                                                                                                                                                                                                                                                <td  style="text-align:left; white-space:nowrap;" id="TBL-2-1-5"  
class="td11"> Explanation               </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-2-"><td  style="text-align:right; white-space:nowrap;" id="TBL-2-2-1"  
class="td11">      Arrival  </td>
                  <td  style="text-align:center; white-space:nowrap;" id="TBL-2-2-2"  
class="td11"> <!--l. 41--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel" stretchy="false">â‰º</mo></math> </td>
                                                                                                            <td  style="text-align:center; white-space:nowrap;" id="TBL-2-2-3"  
class="td11"> <!--l. 41--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi></math> </td>
                                                                                                                                                                                                      <td  style="text-align:center; white-space:nowrap;" id="TBL-2-2-4"  
class="td11"> <!--l. 41--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰º</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰º</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">[</mo><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-close" stretchy="false">]</mo></math>  </td>
                                                                                                                                                                                                                                                                                                <td  style="text-align:left; white-space:nowrap;" id="TBL-2-2-5"  
class="td11"> value at entry to stage  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-3-"><td  style="text-align:right; white-space:nowrap;" id="TBL-2-3-1"  
class="td11">   Decision(s)  </td><td  style="text-align:center; white-space:nowrap;" id="TBL-2-3-2"  
class="td11"> <!--l. 42--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></math> </td><td  style="text-align:center; white-space:nowrap;" id="TBL-2-3-3"  
class="td11"> <!--l. 42--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math> </td><td  style="text-align:center; white-space:nowrap;" id="TBL-2-3-4"  
class="td11"> <!--l. 42--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo><munder><mrow 
><mo>max</mo> </mrow><mrow 
><mi 
>c</mi></mrow></munder 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></math> </td><td  style="text-align:left; white-space:nowrap;" id="TBL-2-3-5"  
class="td11"> value of stage-decision  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-4-"><td  style="text-align:right; white-space:nowrap;" id="TBL-2-4-1"  
class="td11"> Continuation  </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-2-4-2"  
class="td11"> <!--l. 43--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel" stretchy="false">â‰»</mo></math> </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-2-4-3"  
class="td11"> <!--l. 43--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math> </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-2-4-4"  
class="td11"> <!--l. 43--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></math> </td>
<td  style="text-align:left; white-space:nowrap;" id="TBL-2-4-5"  
class="td11"> value at exit               </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-5-"><td  style="text-align:right; white-space:nowrap;" id="TBL-2-5-1"  
class="td11">             </td></tr></table>                                                                                                                                                                                                                                                                                                         </div></div>
                                                                                     
                                                                                     
  
</figure>
</div>
<!--l. 47--><p class="noindent" >This <span 
class="ec-lmss-12">cons-with-shocks </span>stage corresponds to the consumption problem deï¬ned above.
<!--l. 52--><p class="indent" >  The table illustrates notation we can use when analyzing the problem from
a context â€˜insideâ€™ a particular stage of a speciï¬c period. We require that no
variable can have more than one meaning or interpretation inside a period, and
we prohibit any reference to values of any variables or functions or other model
objects from outside the stage (or period). This is why we use diï¬€erent letters,
<!--l. 52--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi></math> and
<!--l. 52--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>, to represent liquid
resources before and after the consumption decision, even if ultimately this periodâ€™s continuation value of
<!--l. 52--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math> will transmute into the
next periodâ€™s initial <!--l. 52--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi></math>.
(Both <!--l. 52--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi></math>
and <!--l. 52--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math> are
â€œk-typeâ€ variablesâ€”investable capital before returns are realized; the distinction from â€œm-typeâ€
variables like <!--l. 52--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>,
which represent spendable resources after returns, is formalized below.)
<!--l. 54--><p class="indent" >  In contrast, items like value functions <!--l. 54--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></math>
or expectations operators <!--l. 54--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>ğ”¼</mi></math>
have diï¬€erent meanings at diï¬€erent perches; we capture this using a subscript like
<!--l. 54--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel" stretchy="false">â‰º</mo></math>.
The fact that all functions in a perch depend on the same state variables (shown
in the second column) allows us to write those functions without specifying their
arguments.
<!--l. 63--><p class="indent" >  <a 
 id="transitions"></a>
  
<h4 class="subsectionHead"><span class="titlemark">4.3 </span> <a 
 id="x1-70004.3"></a>Builders and Connectors</h4>
<!--l. 66--><p class="noindent" >Modularity requires that objects inside a period have no direct access to objects
from any other period. This means that we must endow a stage or a period,
at the time of its creation, with its end-of-stage-or-period value function
<!--l. 66--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow></msub 
></math>.
<!--l. 68--><p class="indent" >  For example, in a model in which every period contains only the single-stage consumption
problem above, the continuation value function for the last (and only) stage at t will need to
be â€™connectedâ€™ to the arrival value function in (t+1), which of necessity requires us to use
t-related notation. Concretely, if we designate the end-of-<span 
class="ec-lmri-12">period </span>value function as
<!--l. 68--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math> (which
is deï¬ned as the continuation value function from the last stage in the period), we use the
notation <a 
 id="eq-trns-single-prd"></a> <table class="equation"><tr><td>
<!--l. 70--><p class="indent" >
                                                                                     
                                                                                     
<!--l. 70--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-7001r15"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
    <mtd columnalign="left" > <mo 
class="MathClass-punc" stretchy="false">:</mo><mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>Î²</mi><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰º</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">,</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(15)</td></tr></table>
<!--l. 75--><p class="indent" >  to describe what the builder does when constructing the predecessor to period
<!--l. 75--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mn>1</mn></math>. The use
of the â€˜<!--l. 75--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-punc" stretchy="false">:</mo><mo 
class="MathClass-rel" stretchy="false">=</mo></math>â€™
signals creation: the left-hand side is <span 
class="ec-lmri-12">brought into existence </span>by the builder.
<!--l. 77--><p class="indent" >  <a 
 id="expectation-operators"></a>
<a 
 id="paragraph*.1"></a>
<!--l. 78--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-8000"></a><span 
class="ec-lmbx-12">Expectation operators across perches.</span></span>
The subscript on an expectation operator
<!--l. 78--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>ğ”¼</mi></math> indicates the information
set at that perch: <!--l. 78--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰º</mo></mrow></msub 
></math>
conditions on the Arrival state but not on any shocks realized
between Arrival and Decision. For adjacent perches at a period
boundaryâ€”<!--l. 78--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>ğ”¼</mi><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
(Continuation of period <!--l. 78--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi></math>)
and <!--l. 78--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰º</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
></math> (Arrival of
period <!--l. 78--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mn>1</mn></math>)â€”the
information sets are identical, so the two operators are mathematically
interchangeable; the notational distinction reï¬‚ects viewpoint (looking backward from
<!--l. 78--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi></math>â€™s exit versus
forward from <!--l. 78--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></math>â€™s
entry).
<!--l. 80--><p class="indent" >  Tying two adjacent stages or periods together also requires that we deï¬ne a Connector,
<!--l. 80--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
mathvariant="script"><mi 
>C</mi></mstyle></math>, which
speciï¬es the relationship between the continuation-perch state variable(s) of the predecessor to
the arrival-perch state variable(s) of the successor. Again concretely, for two successive periods
each of which contains only a single consumption stage like the one described above, the
Connector would look like: <table class="equation"><tr><td>
<!--l. 81--><p class="indent" >
                                                                                     
                                                                                     
<!--l. 81--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-8001r16"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><mstyle 
mathvariant="script"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>k</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(16)</td></tr></table>
<!--l. 85--><p class="indent" >  <a 
 id="state-variable-types"></a>
<a 
 id="paragraph*.2"></a>
<!--l. 86--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-9000"></a><span 
class="ec-lmbx-12">State-variable types.</span></span>
A Connector is a pure rename: it asserts that two variables from adjacent stages
or periods are diï¬€erent names for the same object. This is only meaningful if the
two variables are of the same <span 
class="ec-lmri-12">type</span>. In our framework, state variables fall into two
types:
<ul class="itemize1">      
<li class="itemize">
<!--l. 88--><p class="noindent" ><span 
class="ec-lmbx-12">k-type  </span>(capital):  investable  assets  <span 
class="ec-lmri-12">before  </span>returns  and  income  are  realized.
Examples: <!--l. 88--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi></math>
(beginning-of-period capital) and <!--l. 88--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>
(end-of-period assets after consumption, awaiting next periodâ€™s returns).
</li>      
<li class="itemize">
<!--l. 89--><p class="noindent" ><span 
class="ec-lmbx-12">m-type  </span>(market  resources):  spendable  resources  <span 
class="ec-lmri-12">after  </span>returns  and  income
shocks have been realizedâ€”what <a 
href="#XdeatonUnderstandingC">Deaton</a>Â (<a 
href="#XdeatonUnderstandingC">1992</a>) calls â€œcash-on-hand.â€ Examples:
<!--l. 89--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>
(market resources at the Decision perch) and <!--l. 89--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math>
(post-shock market resources within a period).</li></ul>
<!--l. 91--><p class="noindent" >The Connector <!--l. 91--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
mathvariant="script"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>k</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math> is
valid because both <!--l. 91--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>
and <!--l. 91--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi></math> are
k-type; <!--l. 91--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
mathvariant="script"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
is valid because both are m-type. A Connector that crossed typesâ€”say,
<!--l. 91--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
mathvariant="script"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>k</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>â€”would
be illegal, because market resources and investable capital are not merely diï¬€erent names for
the same quantity: converting between them requires a substantive transformation (the
realization of returns and income).
<!--l. 135--><p class="indent" >  <a 
 id="building-pile"></a>
  
<h4 class="subsectionHead"><span class="titlemark">4.4 </span> <a 
 id="x1-100004.4"></a>Building the Pile Backward</h4>
<!--l. 138--><p class="noindent" >We call the structure in which accumulating periods are stored the pile
                                                                                     
                                                                                     
<!--l. 138--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>P</mi></mstyle></math>.
Once backward induction is complete, the pile holds the full deï¬nitionâ€”what might
colloquially be called â€œthe full model.â€ (We avoid the term â€œmodelâ€ here because it
is used in too many other ways and contexts.) Since we accrete the elements of
<!--l. 138--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>P</mi></mstyle></math> one by
one as we iterate backward, it can be thought of as a pile of deï¬ned periods (and the
Connectors between them).
<!--l. 140--><p class="indent" >  The process of building the pile is straightforward. We start from the terminal period (sectionÂ <a 
href="#x1-30003">3<!--tex4ht:ref: sec:normalization --></a>:
<!--l. 140--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>, consume everything),
so initially <!--l. 140--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>P</mi></mstyle> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mo 
class="MathClass-open" stretchy="false">{</mo><msub><mrow 
><mstyle mathvariant="monospace"><mi 
>p</mi></mstyle></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-close" stretchy="false">}</mo></math>.
We will denote the â€˜builderâ€™ as a computational object with notation like
<!--l. 140--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>B</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â†</mo>
<mstyle mathvariant="normal"> <mi 
>p</mi><mi 
>r</mi><mi 
>d</mi></mstyle></math>, and we
will speak of the backward-induction creation of a new period as being the result of â€˜applyingâ€˜ the
<!--l. 140--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>B</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â†</mo>
<mstyle mathvariant="normal"> <mi 
>p</mi><mi 
>r</mi><mi 
>d</mi></mstyle></math> to the existing
<!--l. 140--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>P</mi></mstyle></math>. The backward
builder augments the <!--l. 140--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>p</mi></mstyle></math>
by creating a new Connector and then the new periodâ€™s solution, so the pile then has the form
<!--l. 140--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>P</mi></mstyle> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mo 
class="MathClass-open" stretchy="false">{</mo><msub><mrow 
><mstyle mathvariant="monospace"><mi 
>p</mi></mstyle></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><msub><mrow 
><mstyle mathvariant="monospace"><mi 
>C</mi></mstyle></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-punc" stretchy="false">,</mo><mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><msub><mrow 
><mstyle mathvariant="monospace"><mi 
>p</mi></mstyle></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-close" stretchy="false">}</mo></math>. SectionÂ <a 
href="#x1-130006">6<!--tex4ht:ref: sec:solving-the-next --></a> details
the construction of <!--l. 140--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="monospace"><mi 
>p</mi></mstyle></mrow><mrow 
><mi 
>T</mi><mspace width="-0.17em" class="negthinspace"/><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mspace width="-0.17em" class="negthinspace"/><mn>1</mn></mrow></msub 
></math>;
with multiple stages or control variables the structure generalizes as in sectionÂ <a 
href="#x1-290009">9<!--tex4ht:ref: sec:multiple-control-variables --></a>.
<!--l. 6--><p class="indent" >  <a 
 id="the-usual-theory"></a>
  
<h3 class="sectionHead"><span class="titlemark">5 </span> <a 
 id="x1-110005"></a>The Usual Theory, and a Bit More Notation</h3>
<!--l. 10--><p class="noindent" >For reference and to illustrate our new notation, we will now derive the Euler
equation and other standard results for the problem described above. Since
we can write value as of the end of the consumption stage as a function of
<!--l. 11--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math>: <a 
 id="eq-vCntnExpansion"></a>
<table class="equation"><tr><td>
<!--l. 13--><p class="indent" >
<!--l. 13--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-11001r17"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>Î²</mi><msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰º</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">[</mo><msubsup><mrow 
><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow><mrow 
><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msubsup 
><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
>
<mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mover class="msup"><mrow 
><mover accent="false"><mrow><mo 
class="MathClass-open" stretchy="false">(</mo><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><msub><mrow 
><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">+</mo> <msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mrow><mo>ï¸·</mo></mover> </mrow><mrow 
><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
>
        </mrow></mover 
><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo><mo 
class="MathClass-punc" stretchy="false">,</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(17)</td></tr></table>
<!--l. 19--><p class="indent" >  <a 
 id="derivative-notation-convention"></a>
                                                                                     
                                                                                     
  
<a 
 id="paragraph*.3"></a>
<!--l. 20--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-12000"></a><span 
class="ec-lmbx-12">Derivative notation convention.</span></span>
Throughout  this  document,  a
superscriptÂ <!--l. 21--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>âˆ‚</mi></math>
on a function means its derivative with respect to the relevant state variable at that perch:
<!--l. 21--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">â‰¡</mo><mstyle mathvariant="normal"><mi 
>d</mi></mstyle><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
>
<mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow></msub 
><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mstyle mathvariant="normal"><mi 
>d</mi></mstyle><mi 
>a</mi></math>,
<!--l. 21--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">â‰¡</mo><mstyle mathvariant="normal"><mi 
>d</mi></mstyle><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
>
<mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></mrow></msub 
><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mstyle mathvariant="normal"><mi 
>d</mi></mstyle><mi 
>m</mi></math>.
So, the ï¬rst order condition for (<a 
href="#x1-3008r14">14<!--tex4ht:ref: eq:vusual --></a>) with respect to
<!--l. 22--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math><span class="footnote-mark"><a 
href="SolvingMicroDSOPs6.html#fn5x0"><sup class="textsuperscript">5</sup></a></span><a 
 id="x1-12001f5"></a>
 
is <a 
 id="eq-upceqEvtp1"></a> <table class="equation"><tr><td>
<!--l. 24--><p class="indent" >
<!--l. 24--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-12003r18"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
>
<mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle><msup><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
>
<mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
                       <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰º</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>Î²</mi><msub><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><msubsup><mrow 
><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow><mrow 
><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msubsup 
><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
>
<mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
>
<mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo></mtd>
                                                              <mtd columnalign="right" ></mtd>
</mtr><mtr 
><mtd columnalign="right" ></mtd>                       <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰º</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>Î²</mi><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle><msubsup><mrow 
>     <mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow><mrow 
>  <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msubsup 
><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
>
<mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
>
<mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(18)</td></tr></table>
<!--l. 31--><p class="indent" >  which illustrates the derivative convention
(e.g.Â <!--l. 31--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
></math> is the derivative
of <!--l. 31--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></math> with respect
to its argument).<span class="footnote-mark"><a 
href="SolvingMicroDSOPs7.html#fn6x0"><sup class="textsuperscript">6</sup></a></span><a 
 id="x1-12004f6"></a>
    
For functions of more than one argument, we append the variable name:
<!--l. 31--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mi 
>âˆ‚</mi><mi 
>x</mi></mrow></msup 
></math> denotes the partial
derivative of <!--l. 31--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></math>
                                                                                     
                                                                                     
with respect to <!--l. 31--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>x</mi></math>.
<!--l. 33--><p class="indent" >  Because the  <a 
href="https://www.econ2.jhu.edu/people/ccarroll/public/lecturenotes/consumption/Envelope" ><span 
class="ec-lmtt-12">Envelope</span></a> theorem tells us that <a 
 id="eq-envelope"></a> <table class="equation"><tr><td>
<!--l. 35--><p class="indent" >
<!--l. 35--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-12006r19"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
>
<mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰º</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>Î²</mi><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle><msubsup><mrow 
><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msubsup 
><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
>
<mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
>
<mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(19)</td></tr></table>
<!--l. 40--><p class="indent" >  we can substitute the LHS of (<a 
href="#x1-12006r19">19<!--tex4ht:ref: eq:envelope --></a>) for the RHS of (<a 
href="#x1-12003r18">18<!--tex4ht:ref: eq:upceqEvtp1 --></a>) to get <table class="equation"><tr><td>
<!--l. 1--><p class="indent" >
<!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-12007r20"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>c</mi></mrow><mrow 
>
<mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msubsup><mrow 
> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
>
<mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(20)</td></tr></table>
<!--l. 50--><p class="indent" >  and rolling forward one period, <table class="equation"><tr><td>
<!--l. 51--><p class="indent" >
<!--l. 51--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-12008r21"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>c</mi></mrow><mrow 
>
<mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msubsup><mrow 
> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
>
<mi 
>t</mi></mrow></msub 
><msub><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">+</mo> <msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(21)</td></tr></table>
<!--l. 56--><p class="indent" >  so that substituting the LHS in equation (<a 
href="#x1-12003r18">18<!--tex4ht:ref: eq:upceqEvtp1 --></a>) ï¬nally gives us the Euler equation for
consumption: <a 
 id="eq-cEuler"></a> <table class="equation"><tr><td>
<!--l. 1--><p class="indent" >
                                                                                     
                                                                                     
<!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-12009r22"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>c</mi></mrow><mrow 
>
<mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>ğ”¼</mi><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>Î²</mi><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle><msubsup><mrow 
><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msubsup 
><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>c</mi></mrow><mrow 
>
<mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(22)</td></tr></table>
<!--l. 67--><p class="indent" >  The derivation above used period-qualiï¬ed subscripts (e.g.,
<!--l. 67--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
></math>,
<!--l. 67--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
></math>)
because the Euler equation relates objects across periods. We can now restate the
problem (<a 
href="#x1-3008r14">14<!--tex4ht:ref: eq:vusual --></a>) using the simpler within-stage notation, which drops the period qualiï¬er:
<table class="equation"><tr><td>
<!--l. 68--><p class="indent" >
<!--l. 68--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-12010r23"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><munder><mrow 
><mo>max</mo> </mrow><mrow 
><mi 
>c</mi></mrow></munder 
><mspace width="0.33em" class="nbsp" /><mspace width="0.33em" class="nbsp" /><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(23)</td></tr></table>
<!--l. 73--><p class="indent" >  whose ï¬rst order condition with respect to
<!--l. 73--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math> is
<table class="equation"><tr><td>
<!--l. 74--><p class="indent" >
<!--l. 74--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-12011r24"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
     <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle><msup><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
  
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(24)</td></tr></table>
<!--l. 79--><p class="indent" >  which is mathematically equivalent to the usual Euler equation for consumption.
<!--l. 81--><p class="indent" >  We will revert to this formulation when we reach subsectionÂ <a 
href="#x1-220006.9">6.9<!--tex4ht:ref: subsec:egm --></a>.
<!--l. 7--><p class="indent" >  <a 
 id="solving-the-next-to-last-period"></a> <a 
 id="solving-the-next"></a>
                                                                                     
                                                                                     
  
<h3 class="sectionHead"><span class="titlemark">6 </span> <a 
 id="x1-130006"></a>Solving the Next-to-Last Period</h3>
<!--l. 11--><p class="noindent" >This section examines the second-to-last period in detail, illustrating a number of powerful
techniques for speeding and improving its solution; in doing so it illustrates how the pile
<!--l. 11--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>P</mi></mstyle></math> (subsectionÂ <a 
href="#x1-100004.4">4.4<!--tex4ht:ref: subsec:building-pile --></a>) is
built backward. We set <!--l. 11--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>1</mn></math>
here to reduce clutter.
<!--l. 44--><p class="indent" >  <a 
 id="direct-substitution"></a>
  
<h4 class="subsectionHead"><span class="titlemark">6.1 </span> <a 
 id="x1-140006.1"></a>A Direct Expression for <!--l. 45--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math></h4>
<!--l. 46--><p class="noindent" >If <!--l. 46--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>T</mi></math>, the
second-to-last-period decision-perch problem is <table class="equation"><tr><td>
<!--l. 1--><p class="indent" >
<!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-14001r25"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><munder><mrow 
><mo>max</mo> </mrow><mrow 
><mi 
>c</mi></mrow></munder 
><mspace width="0.33em" class="nbsp" /><mspace width="0.33em" class="nbsp" /><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mover class="msup"><mrow 
><mover accent="false"><mrow><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi></mrow><mo>ï¸·</mo></mover></mrow><mrow 
><mi 
>a</mi></mrow></mover 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
  </mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(25)</td></tr></table>
<!--l. 49--><p class="indent" >  Using (0) <!--l. 49--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>T</mi></math>;
(1) <!--l. 49--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>; (2) the
deï¬nition of <!--l. 49--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>;
and (3) the deï¬nition of the expectations operator, <table class="equation"><tr><td>
<!--l. 50--><p class="indent" >
<!--l. 50--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-14002r26"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰º</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <msubsup><mrow 
><mo  
> âˆ«
 <!--nolimits--></mo><!--nolimits--></mrow><mrow 
><mn>0</mn></mrow><mrow 
><mi 
>âˆ</mi></mrow></msubsup 
><mfrac><mrow 
><msup><mrow 
><mrow><mo fence="true" form="prefix"> (</mo><mrow><mi 
>a</mi><msub><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>ğœ—</mi></mrow><mo fence="true" form="postfix">)</mo></mrow></mrow><mrow 
><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
></mrow>

<mrow 
>
<mn>1</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>Ï</mi></mrow></mfrac>    <mi 
>d</mi><mstyle 
mathvariant="script"><mi 
>F</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>ğœ—</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">,</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(26)</td></tr></table>
<!--l. 54--><p class="indent" >  where <!--l. 54--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
mathvariant="script"><mi 
>F</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>ğœƒ</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math> is the cumulative
distribution function for <!--l. 54--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>ğœƒ</mi></math>,
this maximization problem implicitly deï¬nes a â€˜period-and-stage-local functionâ€™
                                                                                     
                                                                                     
<!--l. 54--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></math> that yields optimal consumption
in period <!--l. 54--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mn>1</mn></math> for any speciï¬c
numerical level of resources like <!--l. 54--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>1</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>7</mn></math>.
The explicit statement of the problem is <table class="equation"><tr><td>
<!--l. 56--><p class="indent" >
<!--l. 56--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-14003r27"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><munder><mrow 
><mo>arg max</mo> </mrow><mrow 
><mi 
>c</mi></mrow></munder 
><mspace width="0.33em" class="nbsp" /><mspace width="0.33em" class="nbsp" /><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>Î²</mi><msubsup><mrow 
><mo  
>âˆ«
 <!--nolimits--></mo><!--nolimits--></mrow><mrow 
><mn>0</mn></mrow><mrow 
><mi 
>âˆ</mi></mrow></msubsup 
><mfrac><mrow 
><msup><mrow 
><mrow><mo fence="true" form="prefix"> (</mo><mrow><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo><msub><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>ğœ—</mi></mrow><mo fence="true" form="postfix">)</mo></mrow></mrow><mrow 
><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
></mrow>

<mrow 
>
<mn>1</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>Ï</mi></mrow></mfrac>        <mi 
>d</mi><mstyle 
mathvariant="script"><mi 
>F</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>ğœ—</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(27)</td></tr></table>
<!--l. 61--><p class="indent" >  But because there is no general analytical solution, for any given
<!--l. 61--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math> we must use numerical
tools to ï¬nd the <!--l. 61--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math>
that maximizes the expression. This is excruciatingly slow: for every candidate
<!--l. 61--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math>, a deï¬nite
integral over <!--l. 61--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">(</mo><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">,</mo><mi 
>âˆ</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
must be calculated numerically, and optimization is itself a costly operation, so the
combination of the two is a double-whammy for slowdown.
<!--l. 63--><p class="indent" >  <a 
 id="discretizing-the-distribution"></a>
  
<h4 class="subsectionHead"><span class="titlemark">6.2 </span> <a 
 id="x1-150006.2"></a>Discretizing the Distribution</h4>
<!--l. 66--><p class="noindent" >Our ï¬rst speedup trick is therefore to construct a discrete approximation to the lognormal distribution
that can be used in place of numerical integration. That is, we want to approximate the expectation over
<!--l. 66--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>ğœƒ</mi></math> of a function
<!--l. 66--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>g</mi><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>ğœƒ</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math> by calculating its
value at set of <!--l. 66--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>n</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow></msub 
></math> points
<!--l. 66--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></math>, each of which has an
associated probability weight <!--l. 66--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>w</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></math>:
<div class="equation-star">
                                                                                     
                                                                                     
<!--tex4ht:inline--><!--l. 67--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" >
<mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><mi 
>ğ”¼</mi><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>g</mi><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>ğœƒ</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo></mtd>
       <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msubsup><mrow 
><mo  
> âˆ«
 <!--nolimits--></mo><!--nolimits--></mrow><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>ğœƒ</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mover accent="false" 
class="mml-overline"><mrow><mi 
>ğœƒ</mi></mrow><mo 
accent="true">Â¯</mo></mover></mrow></msubsup 
><mi 
>g</mi><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>ğœ—</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mi 
>d</mi><mstyle 
mathvariant="script"><mi 
>F</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>ğœ—</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
                         <mtd columnalign="right" ></mtd>
</mtr><mtr 
><mtd columnalign="right" ></mtd>       
<mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">â‰ˆ</mo><munderover accentunder="false" accent="false"><mrow  
><mo  
>âˆ‘</mo>
  </mrow><mrow 
><mi 
>ğœƒ</mi><mo 
class="MathClass-rel" stretchy="false">=</mo><mn>1</mn></mrow><mrow 
><mi 
>n</mi></mrow></munderover 
><msub><mrow 
><mi 
>w</mi></mrow><mrow 
>
<mi 
>i</mi></mrow></msub 
><mi 
>g</mi><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math>
<!--l. 70--><p class="nopar" > </div> (because adding <!--l. 71--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>n</mi></math>
weighted values to each other is enormously faster than general-purpose numerical
integration).
<!--l. 73--><p class="indent" >  Such a procedure is called a â€˜quadratureâ€™ method of integration; <a 
href="#XTanaka2013-bc">Tanaka and Toda</a>Â (<a 
href="#XTanaka2013-bc">2013</a>)
survey a number of options, but for our purposes we choose the one which is easiest to
understand: An â€˜equiprobableâ€™ approximation (that is, one where each of the values of
<!--l. 73--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></math> has an equal
probability, equal to <!--l. 73--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><msub><mrow 
><mi 
>n</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow></msub 
></math>).
<!--l. 75--><p class="indent" >  We calculate such an <!--l. 75--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>n</mi></math>-point
approximation as follows.
<!--l. 77--><p class="indent" >  Deï¬ne a set of points from <!--l. 77--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>â™¯</mi></mrow><mrow 
><mn>0</mn></mrow></msub 
></math>
to <!--l. 77--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>â™¯</mi></mrow><mrow 
><msub><mrow 
><mi 
>n</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow></msub 
></mrow></msub 
></math> on the
<!--l. 77--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">[</mo><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>1</mn><mo 
class="MathClass-close" stretchy="false">]</mo></math> interval as the elements of the set
<!--l. 78--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>â™¯</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mo 
class="MathClass-open" stretchy="false">{</mo><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mi 
>n</mi><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>2</mn><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mi 
>n</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mo>â€¦</mo><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>1</mn><mo 
class="MathClass-close" stretchy="false">}</mo></math>.<span class="footnote-mark"><a 
href="SolvingMicroDSOPs8.html#fn7x0"><sup class="textsuperscript">7</sup></a></span><a 
 id="x1-15001f7"></a>
    
Call the inverse of the <!--l. 78--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>ğœƒ</mi></math>
distribution <!--l. 78--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle 
mathvariant="script"><mi 
>F</mi></mstyle></mrow><mrow 
> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msubsup 
></math>, and deï¬ne the
points <!--l. 79--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mi 
>â™¯</mi></mrow><mrow 
><mi 
>i</mi></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msubsup 
> <mo 
class="MathClass-rel" stretchy="false">=</mo><msubsup><mrow 
> <mstyle 
mathvariant="script"><mi 
>F</mi></mstyle></mrow><mrow 
> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>â™¯</mi></mrow><mrow 
>
<mi 
>i</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></math>. Then the conditional
mean of <!--l. 80--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>ğœƒ</mi></math> in each of the
intervals numbered 1 to <!--l. 80--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>n</mi></math>
is: <table class="equation"><tr><td>
<!--l. 81--><p class="indent" >
<!--l. 81--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-15003r28"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">â‰¡</mo> <mi 
>ğ”¼</mi><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>ğœƒ</mi><mo 
class="MathClass-rel" stretchy="false">|</mo><msubsup><mrow 
><mi 
>â™¯</mi></mrow><mrow 
><mi 
>i</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msubsup 
> <mo 
class="MathClass-rel" stretchy="false">â‰¤</mo> <mi 
>ğœƒ</mi> <mo 
class="MathClass-rel" stretchy="false">&#x003C;</mo> <msubsup><mrow 
><mi 
>â™¯</mi></mrow><mrow 
>
<mi 
>i</mi></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msubsup 
><mo 
class="MathClass-close" stretchy="false">]</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msubsup><mrow 
><mo  
> âˆ«
 <!--nolimits--></mo><!--nolimits--></mrow><mrow 
><msubsup><mrow 
><mi 
>â™¯</mi></mrow><mrow 
><mi 
>i</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msubsup 
></mrow><mrow 
><msubsup><mrow 
><mi 
>â™¯</mi></mrow><mrow 
><mi 
>i</mi></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msubsup 
>
                  </mrow></msubsup 
><mi 
>ğœ—</mi><mspace width="0.33em" class="nbsp" /><mi 
>d</mi><msub><mrow 
><mstyle 
mathvariant="script"><mi 
>F</mi></mstyle></mrow><mrow 
> </mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>ğœ—</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">,</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(28)</td></tr></table>
                                                                                     
                                                                                     
<!--l. 85--><p class="indent" >  and when the integral is evaluated numerically for each
<!--l. 85--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>i</mi></math> the result is a set of values
of <!--l. 85--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>ğœƒ</mi></math> that correspond to the
mean value in each of the <!--l. 85--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>n</mi></math>
intervals.
<!--l. 87--><p class="indent" >  The method is illustrated in FigureÂ <a 
href="#x1-150061">1<!--tex4ht:ref: fig:discreteapprox --></a>. The solid continuous curve represents the â€œtrueâ€ CDF
<!--l. 88--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
mathvariant="script"><mi 
>F</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>ğœƒ</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math> for a lognormal
distribution such that <!--l. 88--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>ğ”¼</mi><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>ğœƒ</mi><mo 
class="MathClass-close" stretchy="false">]</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>1</mn></math>,
<!--l. 88--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>Ïƒ</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>0</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>1</mn></math>. The short vertical line segments
represent the <!--l. 88--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>n</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow></msub 
></math> equiprobable
values of <!--l. 89--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></math> which are used to
approximate this distribution.<span class="footnote-mark"><a 
href="SolvingMicroDSOPs9.html#fn8x0"><sup class="textsuperscript">8</sup></a></span><a 
 id="x1-15004f8"></a>
    
<a 
 id="discreteApprox"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-150061"></a>
                                                                                     
                                                                                     
<!--l. 3--><p class="noindent" ><img 
src="./Figures/discreteApprox.png" alt="PIC"  
width="358" height="240" >
<figcaption class="caption" ><span class="id">FigureÂ 1:    </span><span  
class="content">Equiprobable    Discrete    Approximation    to    Lognormal    Distribution
<!--l. 4--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
mathvariant="script"><mi 
>F</mi></mstyle></math></span></figcaption><!--tex4ht:label?: x1-150061 -->
                                                                                     
                                                                                     
<!--l. 6--><p class="indent" >  </figure>
<!--l. 104--><p class="indent" >  The following notebook snippet constructs these points.
<!--l. 117--><p class="indent" >  We now substitute our approximation (<a 
href="#x1-15007r29">29<!--tex4ht:ref: eq:vDiscrete --></a>) for
<!--l. 117--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math> in (<a 
href="#x1-14001r25">25<!--tex4ht:ref: eq:vEndPrdTm1 --></a>) which is
simply the sum of <!--l. 117--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>n</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow></msub 
></math>
numbers and is therefore easy to calculate (compared to the full-ï¬‚edged numerical integration
(<a 
href="#x1-14002r26">26<!--tex4ht:ref: eq:NumDefInt --></a>) 
that it replaces).
<table class="equation"><tr><td>
<!--l. 1--><p class="indent" >
<!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-15007r29"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>Î²</mi> <mrow><mo fence="true" form="prefix"> (</mo><mrow> <mfrac><mrow 
><mn>1</mn></mrow>
<mrow 
><msub><mrow 
>
<mi 
>n</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow></msub 
></mrow></mfrac> </mrow><mo fence="true" form="postfix">)</mo></mrow><munderover accentunder="false" accent="false"><mrow  
><mo  
> âˆ‘</mo>
  </mrow><mrow 
><mi 
>i</mi><mo 
class="MathClass-rel" stretchy="false">=</mo><mn>1</mn></mrow><mrow 
><msub><mrow 
><mi 
>n</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow></msub 
>
         </mrow></munderover 
><mfrac>
<mrow 
><msup><mrow 
>
 <mrow><mo fence="true" form="prefix"> (</mo><mrow><msub><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mi 
>a</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
>
              </mrow><mo fence="true" form="postfix">)</mo></mrow> </mrow><mrow 
><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
></mrow>

<mrow 
>
<mn>1</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>Ï</mi></mrow></mfrac>    </mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(29)</td></tr></table>
<!--l. 143--><p class="indent" >  <a 
 id="the-approximate-consumption-and-value-functions"></a>
  
<h4 class="subsectionHead"><span class="titlemark">6.3 </span> <a 
 id="x1-160006.3"></a>The Approximate Consumption and Value Functions</h4>
<!--l. 146--><p class="noindent" >Given any particular value of <!--l. 146--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>,
a numerical maximization tool can now ï¬nd the
<!--l. 146--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math> that
solves (<a 
href="#x1-14001r25">25<!--tex4ht:ref: eq:vEndPrdTm1 --></a>) in a reasonable amount of time.
<!--l. 154--><p class="indent" >  The notebook responsible for computing an estimated consumption function begins in â€œSolving
the Model by Value Function Maximization,â€ where a vector of possible values of market resources
<!--l. 154--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math> is created. In these
notes we use <!--l. 154--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>m</mi></mstyle><!--/binary math rel, tripple hight--></math> for
such a vector (e.g.Â <!--l. 154--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>m</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-open" stretchy="false">[</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">]</mo></math>
the ï¬rst entry, <!--l. 154--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>m</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-open" stretchy="false">[</mo><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">]</mo></math>
the last). For illustration we take the grid to be the ï¬rst ï¬ve nonnegative integers,
<!--l. 154--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">{</mo><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>1</mn><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>2</mn><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>3</mn><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>4</mn><mo 
class="MathClass-close" stretchy="false">}</mo></math>.
<!--l. 159--><p class="indent" >  <a 
 id="an-interpolated-consumption-function"></a>
  
<h4 class="subsectionHead"><span class="titlemark">6.4 </span> <a 
 id="x1-170006.4"></a>An Interpolated Consumption Function</h4>
<!--l. 163--><p class="noindent" >This is accomplished in â€œAn Interpolated Consumption Function,â€ which generates an interpolating function
that we designate <!--l. 163--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>.
                                                                                     
                                                                                     
<!--l. 166--><p class="indent" >  Figures <a 
href="#x1-170032">2<!--tex4ht:ref: fig:PlotcTm1Simple --></a> andÂ <a 
href="#x1-170043">3<!--tex4ht:ref: fig:PlotVTm1Simple --></a> show plots of the constructed
<!--l. 167--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math> and
<!--l. 167--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math>. While the
<!--l. 167--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math> function looks very
smooth, the fact that the <!--l. 167--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math>
function is a set of line segments is very evident. This ï¬gure provides the beginning of the
intuition for why trying to approximate the value function directly is a bad idea (in this
context).<span class="footnote-mark"><a 
href="SolvingMicroDSOPs10.html#fn9x0"><sup class="textsuperscript">9</sup></a></span><a 
 id="x1-17001f9"></a>
    
<!--l. 169--><p class="indent" >  <a 
 id="PlotcTm1Simple"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-170032"></a>
                                                                                     
                                                                                     
<div  
class="centerline">                                         <img 
src="./Figures/PlotcTm1Simple.png" alt="PIC"  
width="433" height="325" >                                         </div>
<figcaption class="caption" ><span class="id">FigureÂ 2:
</span><span  
class="content"><!--l. 172--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
(solid)                                                                                                  versus
<!--l. 172--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
(dashed)</span></figcaption><!--tex4ht:label?: x1-170032 -->
                                                                                     
                                                                                     
<!--l. 174--><p class="indent" >  </figure>
<!--l. 176--><p class="indent" >  <a 
 id="PlotvTm1Simple"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-170043"></a>
                                                                                     
                                                                                     
<div  
class="centerline">                                         <img 
src="./Figures/PlotVTm1Simple.png" alt="PIC"  
width="433" height="325" >                                         </div>
<figcaption class="caption" ><span class="id">FigureÂ 3:
</span><span  
class="content"><!--l. 179--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math>
(solid)                                                                                                  versus
<!--l. 179--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
(dashed)</span></figcaption><!--tex4ht:label?: x1-170043 -->
                                                                                     
                                                                                     
<!--l. 181--><p class="indent" >  </figure>
<!--l. 185--><p class="indent" >  <a 
 id="interpolating-expectations"></a>
  
<h4 class="subsectionHead"><span class="titlemark">6.5 </span> <a 
 id="x1-180006.5"></a>Interpolating Expectations</h4>
<!--l. 189--><p class="noindent" >Piecewise linear â€˜splineâ€™ interpolation as described above works well for generating a
good approximation to the true optimal consumption function. However, there is
a clear ineï¬ƒciency in the program: Since it uses equation (<a 
href="#x1-14001r25">25<!--tex4ht:ref: eq:vEndPrdTm1 --></a>), for every value of
<!--l. 189--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>
the program must calculate the utility consequences of various possible choices of
<!--l. 189--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math> (and
therefore <!--l. 189--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math>)
as it searches for the best choice.
<!--l. 191--><p class="indent" >  For any given index <!--l. 191--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>j</mi></math>
in <!--l. 191--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>m</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>j</mi><mo 
class="MathClass-close" stretchy="false">]</mo></math>, as it searches for the
corresponding optimal <!--l. 191--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>, the
algorithm will end up calculating <!--l. 191--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mover 
accent="true"><mrow 
><mi 
>a</mi></mrow><mo accent="true">~</mo></mover><mo 
class="MathClass-close" stretchy="false">)</mo></math>
for many <!--l. 191--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>a</mi></mrow><mo accent="true">~</mo></mover></math> values close to the
optimal <!--l. 191--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math>. Indeed, even when
searching for the optimal <!--l. 191--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>
for a <span 
class="ec-lmri-12">diï¬€erent </span><!--l. 191--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>
(say <!--l. 191--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>m</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>k</mi><mo 
class="MathClass-close" stretchy="false">]</mo></math> for
<!--l. 191--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi><mo 
class="MathClass-rel" stretchy="false">â‰ </mo><mi 
>j</mi></math>) the search process
might compute <!--l. 191--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
for an <!--l. 191--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math> close to the
correct optimal <!--l. 191--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>
for <!--l. 191--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>m</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>j</mi><mo 
class="MathClass-close" stretchy="false">]</mo></math>.
But if that diï¬ƒcult computation does not correspond to the exact solution to the
<!--l. 191--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>m</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>k</mi><mo 
class="MathClass-close" stretchy="false">]</mo></math>
problem, it is discarded.
<!--l. 195--><p class="indent" >  The notebook section â€œInterpolating Expectations,â€ now interpolates
the expected value of <span 
class="ec-lmri-12">ending </span>the period with a given amount of
assets.<span class="footnote-mark"><a 
href="SolvingMicroDSOPs11.html#fn10x0"><sup class="textsuperscript">10</sup></a></span><a 
 id="x1-18001f10"></a>
     
<!--l. 197--><p class="indent" >  FigureÂ <a 
href="#x1-180034">4<!--tex4ht:ref: fig:PlotOTm1RawVSInt --></a> compares the true value function to the approximation produced by following the
interpolation procedure; the approximated and exact functions are of course identical at the
gridpoints of <!--l. 197--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--></math>
and they appear reasonably close except in the region below
<!--l. 197--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>1</mn></math>.
<!--l. 199--><p class="indent" >  <a 
 id="PlotOTm1RawVSInt"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-180034"></a>
                                                                                     
                                                                                     
<div  
class="centerline">                                         <img 
src="./Figures/PlotOTm1RawVSInt.png" alt="PIC"  
width="433" height="325" >                                         </div>
<figcaption class="caption" ><span class="id">FigureÂ 4:                                      </span><span  
class="content">End-Of-Period                                      Value
<!--l. 202--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></math>
(solid)                                                                                                  versus
<!--l. 202--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></math>
(dashed)</span></figcaption><!--tex4ht:label?: x1-180034 -->
                                                                                     
                                                                                     
<!--l. 204--><p class="indent" >  </figure>
<!--l. 206--><p class="indent" >  <a 
 id="PlotComparecTm1AB"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-180045"></a>
                                                                                     
                                                                                     
<div  
class="centerline">                                         <img 
src="./Figures/PlotComparecTm1AB.png" alt="PIC"  
width="433" height="325" >                                         </div>
<figcaption class="caption" ><span class="id">FigureÂ 5:
</span><span  
class="content"><!--l. 209--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
(solid)                                                                                                  versus
<!--l. 209--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
(dashed)</span></figcaption><!--tex4ht:label?: x1-180045 -->
                                                                                     
                                                                                     
<!--l. 211--><p class="indent" >  </figure>
<!--l. 214--><p class="indent" >  Nevertheless, the consumption rule obtained when the approximating
<!--l. 214--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></math> is used
instead of <!--l. 214--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></math>
is surprisingly bad, as shown in ï¬gure <a 
href="#x1-180045">5<!--tex4ht:ref: fig:PlotComparecTm1AB --></a>. For example, when
<!--l. 214--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math> goes from 2 to 3,
<!--l. 214--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math> goes from about 1 to
about 2, yet when <!--l. 214--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>
goes from 3 to 4, <!--l. 214--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math>
goes from about 2 to about 2.05. The function fails even to be concave, which is distressing
because Carroll and KimballÂ (<a 
href="#XckConcavity">1996</a>) prove that the correct consumption function is strictly
concave in a wide class of problems that includes this one.
<!--l. 216--><p class="indent" >  <a 
 id="value-function-versus-first-order-condition"></a>
  
<h4 class="subsectionHead"><span class="titlemark">6.6 </span> <a 
 id="x1-190006.6"></a>Value Function versus First Order Condition</h4>
<!--l. 219--><p class="noindent" >Loosely speaking, our diï¬ƒculty reï¬‚ects the fact that the consumption choice is
governed by the <span 
class="ec-lmri-12">marginal </span>value function, not by the <span 
class="ec-lmri-12">level </span>of the value function
(which is the object that we approximated). To understand this point, recall
that a quadratic utility function exhibits risk aversion because with a stochastic
<!--l. 224--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math>,
<table class="equation"><tr><td>
<!--l. 225--><p class="indent" >
<!--l. 225--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                             <mstyle 
   id="x1-19001r30"  class="label" ></mstyle><!--endlabel-->
                             <mi 
>ğ”¼</mi><mo 
class="MathClass-open" stretchy="false">[</mo><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msup><mrow 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><menclose notation="updiagonalstrike"> <mi 
>c</mi></menclose><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mn>2</mn></mrow></msup 
><mo 
class="MathClass-close" stretchy="false">]</mo> <mo 
class="MathClass-rel" stretchy="false">&#x003C;</mo> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msup><mrow 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>ğ”¼</mi><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">]</mo> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><menclose notation="updiagonalstrike"> <mi 
>c</mi></menclose><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mn>2</mn></mrow></msup 
>
</math></td><td class="eq-no">(30)</td></tr></table>
<!--l. 229--><p class="indent" >  (where <!--l. 229--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><menclose notation="updiagonalstrike"><mi 
>c</mi></menclose></math>
is the â€˜bliss pointâ€™ which is assumed always to exceed feasible
<!--l. 229--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math>).
However, unlike the CRRA utility function, with quadratic utility the consumption/saving
<span 
class="ec-lmri-12">behavior </span>of consumers is unaï¬€ected by risk since behavior is determined by the ï¬rst order
condition, which depends on <span 
class="ec-lmri-12">marginal </span>utility, and when utility is quadratic, marginal utility is
unaï¬€ected by risk: <table class="equation"><tr><td>
<!--l. 234--><p class="indent" >
                                                                                     
                                                                                     
<!--l. 234--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                             <mstyle 
   id="x1-19002r31"  class="label" ></mstyle><!--endlabel-->
                             <mi 
>ğ”¼</mi><mo 
class="MathClass-open" stretchy="false">[</mo><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>2</mn><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><menclose notation="updiagonalstrike"> <mi 
>c</mi></menclose><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>2</mn><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>ğ”¼</mi><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">]</mo> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><menclose notation="updiagonalstrike"> <mi 
>c</mi></menclose><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">.</mo>
</math></td><td class="eq-no">(31)</td></tr></table>
<!--l. 239--><p class="indent" >  Intuitively, if oneâ€™s goal is to accurately capture choices that are governed by marginal
value, numerical techniques that approximate the <span 
class="ec-lmri-12">marginal </span>value function will yield a more
accurate approximation to optimal behavior than techniques that approximate the <span 
class="ec-lmri-12">level </span>of the
value function.
<!--l. 246--><p class="indent" >  The ï¬rst order condition of the maximization problem in period
<!--l. 246--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>T</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mn>1</mn></math> is: <a 
 id="eq-FOCTm1"></a>
<table class="equation"><tr><td>
<!--l. 1--><p class="indent" >
<!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-19003r32"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>c</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
     <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>Î²</mi><msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">[</mo><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>c</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>c</mi></mrow><mrow 
>
<mi 
>T</mi> </mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo></mtd>
                                        <mtd columnalign="right" ></mtd>
</mtr><mtr 
><mtd columnalign="right" ><msup><mrow 
><mi 
>c</mi></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
></mtd>  <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle><mi 
>Î²</mi> <mrow><mo fence="true" form="prefix"> (</mo><mrow> <mfrac><mrow 
><mn>1</mn></mrow>
<mrow 
><msub><mrow 
>
<mi 
>n</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow></msub 
></mrow></mfrac> </mrow><mo fence="true" form="postfix">)</mo></mrow><munderover accentunder="false" accent="false"><mrow  
><mo  
> âˆ‘</mo>
  </mrow><mrow 
><mi 
>i</mi><mo 
class="MathClass-rel" stretchy="false">=</mo><mn>1</mn></mrow><mrow 
><msub><mrow 
><mi 
>n</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow></msub 
>
         </mrow></munderover 
><msup><mrow 
> <mrow><mo fence="true" form="prefix"> (</mo><mrow><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">+</mo> <msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></mrow><mo fence="true" form="postfix">)</mo></mrow> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(32)</td></tr></table>
<!--l. 256--><p class="indent" >  <a 
 id="Plot_ud_VS_vCntnd"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-190046"></a>
                                                                                     
                                                                                     
<div  
class="centerline">                                         <img 
src="./Figures/Plot_ud_VS_vCntnd.png" alt="PIC"  
width="433" height="325" >                                         </div>
<figcaption class="caption" ><span class="id">FigureÂ 6:
</span><span  
class="content"><!--l. 259--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-close" stretchy="false">)</mo></math>
versus
<!--l. 259--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mn>3</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">,</mo><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
>
<mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mn>4</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">,</mo><msubsup><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
>
<mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mn>3</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">,</mo><msubsup><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
>
<mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mn>4</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-close" stretchy="false">)</mo></math></span></figcaption><!--tex4ht:label?: x1-190046 -->
                                                                                     
                                                                                     
<!--l. 261--><p class="indent" >  </figure>
<!--l. 265--><p class="indent" >  The downward-sloping curve in Figure <a 
href="#x1-190046">6<!--tex4ht:ref: fig:Plot_ud_VS_vCntnd --></a> shows the value of
<!--l. 266--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mi 
>c</mi></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
></math> for our baseline
parameter values for <!--l. 267--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn> <mo 
class="MathClass-rel" stretchy="false">â‰¤</mo> <mi 
>c</mi> <mo 
class="MathClass-rel" stretchy="false">â‰¤</mo> <mn>4</mn></math>
(the horizontal axis). The solid upward-sloping curve shows the value of the RHS of (<a 
href="#x1-19003r32">32<!--tex4ht:ref: eq:FOCTm1 --></a>) as a function of
<!--l. 269--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math> under the assumption
that <!--l. 269--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>3</mn></math>. Optimal
consumption given <!--l. 270--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>3</mn></math> is the
<!--l. 270--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math> at which the two curves
intersectâ€”just below <!--l. 270--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>2</mn></math>. The
dashed curve shows the same for <!--l. 271--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>4</mn></math>;
its intersection with <!--l. 271--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>c</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
is slightly below <!--l. 271--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>2</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>5</mn></math>,
so increasing <!--l. 271--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>
from 3 to 4 raises optimal consumption by about 0.5.
<!--l. 273--><p class="indent" >  Now consider the derivative of <!--l. 273--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
></math>.
Because the function is piecewise linear, its derivative
<!--l. 273--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
>
<mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></math> is a
step function: constant between adjacent gridpoints, with jumps at each gridpoint.
<!--l. 275--><p class="indent" >  The solid-line step function in Figure <a 
href="#x1-190046">6<!--tex4ht:ref: fig:Plot_ud_VS_vCntnd --></a> depicts the actual value of
<!--l. 276--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mn>3</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>. When we attempt to
ï¬nd optimal values of <!--l. 277--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math>
given <!--l. 277--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math> using
<!--l. 277--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></math>, the numerical optimization
routine will return the <!--l. 278--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math>
for which <!--l. 279--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>c</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo><msubsup><mrow 
> <mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
>
<mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>. Thus, for
<!--l. 280--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>3</mn></math> the program will return
the value of <!--l. 280--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math> for which
the downward-sloping <!--l. 281--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>c</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
curve intersects with the <!--l. 282--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mn>3</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>;
as the diagram shows, this value is exactly equal to 2. Similarly, if we ask the routine to ï¬nd the
optimal <!--l. 283--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math> for
<!--l. 283--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>4</mn></math>, it ï¬nds the point
of intersection of <!--l. 284--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>c</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
with <!--l. 284--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mn>4</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>;
and as the diagram shows, this intersection is only slightly above 2. Hence, this ï¬gure
illustrates why the numerical consumption function plotted earlier returned values very close
to <!--l. 286--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>2</mn></math> for
both <!--l. 286--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>3</mn></math>
and <!--l. 286--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>4</mn></math>.
<!--l. 288--><p class="indent" >  We would obviously obtain much better estimates of the point of intersection between
<!--l. 288--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>c</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math> and
<!--l. 288--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math> if our
estimate of <!--l. 288--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
></math>
                                                                                     
                                                                                     
were not a step function. In fact, we already know how to construct linear interpolations to
functions, so the obvious next step is to construct a linear interpolating approximation to
the <span 
class="ec-lmri-12">expected marginal value of end-of-period assets function </span>at the points in
<!--l. 288--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--></math>:
<table class="equation"><tr><td>
<!--l. 289--><p class="indent" >
<!--l. 289--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-19005r33"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>Î²</mi><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle> <mrow><mo fence="true" form="prefix"> (</mo><mrow> <mfrac><mrow 
><mn>1</mn></mrow>
<mrow 
><msub><mrow 
>
<mi 
>n</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow></msub 
></mrow></mfrac> </mrow><mo fence="true" form="postfix">)</mo></mrow><munderover accentunder="false" accent="false"><mrow  
><mo  
> âˆ‘</mo>
  </mrow><mrow 
><mi 
>i</mi><mo 
class="MathClass-rel" stretchy="false">=</mo><mn>1</mn></mrow><mrow 
><msub><mrow 
><mi 
>n</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow></msub 
>
         </mrow></munderover 
><msup><mrow 
> <mrow><mo fence="true" form="prefix"> (</mo><mrow><msub><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--> <mo 
class="MathClass-bin" stretchy="false">+</mo> <msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></mrow><mo fence="true" form="postfix">)</mo></mrow> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
></mtd>
  
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(33)</td></tr></table>
<!--l. 293--><p class="indent" >  yielding <!--l. 293--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><msubsup><mrow 
><mstyle mathvariant="monospace"><mi 
>v</mi></mstyle><!--/binary math rel, tripple hight--></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
></math> (the vector of expected
end-of-period-<!--l. 293--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></math> marginal values
of assets corresponding to <!--l. 293--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>a</mi><mi 
>V</mi><mi 
>e</mi><mi 
>c</mi></mstyle></math>),
and construct <!--l. 295--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
>
<mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></math>
as the linear interpolating function that ï¬ts this set of points.
<!--l. 298--><p class="indent" >  <a 
 id="PlotOPRawVSFOC"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-190067"></a>
                                                                                     
                                                                                     
<div  
class="centerline">                                         <img 
src="./Figures/PlotOPRawVSFOC.png" alt="PIC"  
width="433" height="325" >                                         </div>
<figcaption class="caption" ><span class="id">FigureÂ 7:
</span><span  
class="content"><!--l. 301--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
>
<mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></math>
versus
<!--l. 301--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
>
<mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></math></span></figcaption><!--tex4ht:label?: x1-190067 -->
                                                                                     
                                                                                     
<!--l. 303--><p class="indent" >  </figure>
<!--l. 307--><p class="indent" >  The results are shown in Figure <a 
href="#x1-190067">7<!--tex4ht:ref: fig:PlotOPRawVSFOC --></a>. The linear interpolating approximation looks roughly as
good (or bad) for the <span 
class="ec-lmri-12">marginal </span>value function as it was for the level of the value function.
However, Figure <a 
href="#x1-190078">8<!--tex4ht:ref: fig:PlotcTm1ABC --></a> shows that the new consumption function (long dashes) is a
considerably better approximation of the true consumption function (solid) than was the
consumption function obtained by approximating the level of the value function (short
dashes).
<!--l. 309--><p class="indent" >  <a 
 id="PlotcTm1ABC"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-190078"></a>
                                                                                     
                                                                                     
<div  
class="centerline">                                         <img 
src="./Figures/PlotcTm1ABC.png" alt="PIC"  
width="433" height="325" >                                         </div>
<figcaption class="caption" ><span class="id">FigureÂ 8:
</span><span  
class="content"><!--l. 312--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
(solid)            Versus            Two            Methods            for            Constructing
<!--l. 312--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math></span></figcaption><!--tex4ht:label?: x1-190078 -->
                                                                                     
                                                                                     
<!--l. 314--><p class="indent" >  </figure>
<!--l. 316--><p class="indent" >  <a 
 id="transformation"></a>
  
<h4 class="subsectionHead"><span class="titlemark">6.7 </span> <a 
 id="x1-200006.7"></a>Transformation</h4>
<!--l. 319--><p class="noindent" >Even the new-and-improved consumption function diverges notably from the true solution, especially at
lower values of <!--l. 319--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>.
That is because the linear interpolation does an increasingly poor job of capturing the nonlinearity of
<!--l. 319--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
></math> at lower and
lower levels of <!--l. 319--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>.
<!--l. 321--><p class="indent" >  This is where we unveil our next trick. To understand the logic, start by considering the case
where <!--l. 321--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>Î²</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo><msub><mrow 
> <mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>1</mn></math>
and there is no uncertainty (that is, we know for sure that income next period will be
<!--l. 321--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>1</mn></math>).
The ï¬nal Euler equation (recall that we are still assuming that
<!--l. 321--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>T</mi></math>) is
then: <table class="equation"><tr><td>
<!--l. 322--><p class="indent" >
<!--l. 322--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-20001r34"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msubsup><mrow 
><mi 
>c</mi></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msubsup 
></mtd>
      <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <msubsup><mrow 
><mi 
>c</mi></mrow><mrow 
><mi 
>T</mi> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msubsup 
><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
  
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(34)</td></tr></table>
<!--l. 327--><p class="indent" >  In the case we are now considering with no uncertainty and no liquidity constraints, the optimizing
consumer does not care whether a unit of income is scheduled to be received in the future period
<!--l. 327--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>T</mi></math> or the
current period <!--l. 327--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>T</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mn>1</mn></math>;
there is perfect certainty that the income will be received, so the consumer treats its PDV as
equivalent to a unit of current wealth. Total resources available at the point when the
consumption decision is made is therefore comprised of two types: current market resources
<!--l. 327--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math> and â€˜human wealthâ€™ (the
PDV of future income) of <!--l. 327--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>h</mi></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>1</mn></math>
(because it is the value of human wealth as of the end of the period, there is only one more
period of income of 1 left).
<table class="equation"><tr><td>
<!--l. 329--><p class="indent" >
                                                                                     
                                                                                     
<!--l. 329--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                              <mstyle 
   id="x1-20002r35"  class="label" ></mstyle><!--endlabel--><msubsup><mrow 
>
                              <mstyle mathvariant="normal">
                              <mi 
>v</mi></mstyle>
                                </mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo><msup><mrow 
> <mrow><mo fence="true" form="prefix"> (</mo><mrow><mfrac><mrow 
><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mn>1</mn></mrow>
<mrow 
>
<mn>2</mn></mrow></mfrac>    </mrow><mo fence="true" form="postfix">)</mo></mrow> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
><mo 
class="MathClass-punc" stretchy="false">.</mo>
</math></td><td class="eq-no">(35)</td></tr></table>
<!--l. 333--><p class="indent" >  Of course, this is a highly nonlinear function. However, if we raise both sides of (<a 
href="#x1-20002r35">35<!--tex4ht:ref: eq:vPLin --></a>) to the
power <!--l. 333--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">(</mo><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mi 
>Ï</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
the result is a linear function: <table class="equation"><tr><td>
<!--l. 334--><p class="indent" >
<!--l. 334--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-20003r36"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msup><mrow 
> <mrow><mo fence="true" form="prefix"> [</mo><mrow><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mo fence="true" form="postfix">]</mo></mrow> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mi 
>Ï</mi></mrow></msup 
></mtd>
                 <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <mfrac><mrow 
><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mn>1</mn></mrow> 
<mrow 
>
<mn>2</mn></mrow></mfrac>   <mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(36)</td></tr></table>
<!--l. 339--><p class="indent" >  This is a speciï¬c example of a general phenomenon: A theoretical literature
discussed inÂ <a 
href="#XckConcavity">Carroll and Kimball</a>Â (<a 
href="#XckConcavity">1996</a>) establishes that under perfect
certainty, if the period-by-period marginal utility function is of the form
<!--l. 339--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mi 
>c</mi></mrow><mrow 
><mi 
>t</mi></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msubsup 
></math>, the marginal value
function will be of the form <!--l. 339--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>Î³</mi><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>Î¶</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
></math>
for some constants <!--l. 339--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">{</mo><mi 
>Î³</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mi 
>Î¶</mi><mo 
class="MathClass-close" stretchy="false">}</mo></math>.
This means that if we were solving the perfect foresight problem numerically, we could always
calculate a numerically exact (because linear) interpolation.
<!--l. 341--><p class="indent" >  The key insight is that much of the nonlinearity in
<!--l. 341--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
></math> comes from raising to the
power <!--l. 341--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>Ï</mi></math>. By inverting that
operation (raising to <!--l. 341--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mi 
>Ï</mi></math>),
we can â€˜unwindâ€™ it, and the remaining nonlinearity is much smaller.
Speciï¬cally, applying the foregoing insights to the end-of-period value function
<!--l. 341--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>, we
can deï¬ne an â€˜inverse marginal valueâ€™ function <a 
 id="eq-cGoth"></a> <table class="equation"><tr><td>
<!--l. 343--><p class="indent" >
                                                                                     
                                                                                     
<!--l. 343--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-20004r37"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msubsup><mrow 
><mi 
>Î›</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
      <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">â‰¡</mo><msup><mrow 
><mrow><mo fence="true" form="prefix"> (</mo><mrow><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mo fence="true" form="postfix">)</mo></mrow> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mi 
>Ï</mi></mrow></msup 
></mtd>
  
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(37)</td></tr></table>
<!--l. 348--><p class="indent" >  which would be linear in the perfect foresight
case.<span class="footnote-mark"><a 
href="SolvingMicroDSOPs12.html#fn11x0"><sup class="textsuperscript">11</sup></a></span><a 
 id="x1-20005f11"></a>
     
We then construct a piecewise-linear interpolating approximation to the
<!--l. 348--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mi 
>Î›</mi></mrow><mrow 
><mi 
>t</mi></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
></math> function,
<!--l. 348--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mover 
accent="true"><mrow 
><mi 
>Î›</mi></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
>
<mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></math>, and for any
<!--l. 348--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math> that falls in
the range <!--l. 348--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">{</mo><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-open" stretchy="false">[</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">]</mo><mo 
class="MathClass-punc" stretchy="false">,</mo><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-open" stretchy="false">[</mo><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">]</mo><mo 
class="MathClass-close" stretchy="false">}</mo></math>
we obtain our approximation of marginal value from: <table class="equation"><tr><td>
<!--l. 349--><p class="indent" >
<!--l. 349--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-20007r38"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msubsup><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
        <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <msup><mrow 
><mo 
class="MathClass-open" stretchy="false">[</mo><msup><mrow 
><mover 
accent="true"><mrow 
><mi 
>Î›</mi></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
></mtd>
  
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(38)</td></tr></table>
<!--l. 355--><p class="indent" >  <a 
 id="consumed-function-interpretation"></a> The most interesting thing about all of this, though, is that the
<!--l. 356--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mi 
>Î›</mi></mrow><mrow 
><mi 
>t</mi></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
></math>
function has another interpretation. Recall our point in (<a 
href="#x1-12011r24">24<!--tex4ht:ref: eq:upEqbetaOp --></a>) that
<!--l. 356--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>c</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>c</mi></mrow><mrow 
>
<mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle><msup><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
>
<mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <msub><mrow 
><mi 
>c</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></math>. Since with
CRRA utility <!--l. 356--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>c</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <msup><mrow 
><mi 
>c</mi></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
></math>,
this can be rewritten and inverted <table class="equation"><tr><td>
<!--l. 357--><p class="indent" >
                                                                                     
                                                                                     
<!--l. 357--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-20008r39"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msup><mrow 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
></mtd>
         <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle><msup><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
                        <mtd columnalign="right" ></mtd>
</mtr><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>    <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msup><mrow 
> <mrow><mo fence="true" form="prefix"> (</mo><mrow><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mo fence="true" form="postfix">)</mo></mrow> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mi 
>Ï</mi></mrow></msup 
><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(39)</td></tr></table>
<!--l. 363--><p class="indent" >  This gives <!--l. 363--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mi 
>Î›</mi></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
></math> a concrete
interpretation: for any ending <!--l. 363--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>,
it reveals how much the agent must <span 
class="ec-lmri-12">have consumed </span>to (optimally) reach that
<!--l. 363--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>. We
will therefore henceforth refer to it as the â€˜consumed function:â€™ <a 
 id="eq-consumedfn"></a> <table class="equation"><tr><td>
<!--l. 365--><p class="indent" >
<!--l. 365--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-20009r40"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">â‰¡</mo><msubsup><mrow 
><mover 
accent="true"><mrow 
><mi 
>Î›</mi></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
>
<mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(40)</td></tr></table>
<!--l. 371--><p class="indent" >  Thus, for example, for period <!--l. 371--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>T</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mn>1</mn></math> our
procedure is to calculate the vector of <!--l. 371--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>c</mi></mstyle><!--/binary math rel, tripple hight--></math>
points on the consumed function: <table class="equation"><tr><td>
<!--l. 372--><p class="indent" >
<!--l. 372--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-20010r41"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>c</mi></mstyle><!--/binary math rel, tripple hight--></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msub><mrow 
> <mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(41)</td></tr></table>
<!--l. 376--><p class="indent" >  with the idea that we will construct an approximation of the consumed function
<!--l. 376--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math> as the interpolating
function connecting these <!--l. 376--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">{</mo><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-punc" stretchy="false">,</mo><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>c</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-close" stretchy="false">}</mo></math>
                                                                                     
                                                                                     
points.
<!--l. 378--><p class="indent" >  <a 
 id="the-natural-borrowing-constraint-and-the-a-lower-bound"></a>
  
<h4 class="subsectionHead"><span class="titlemark">6.8 </span> <a 
 id="x1-210006.8"></a>The Natural Borrowing Constraint and the
<!--l. 379--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math> Lower
Bound</h4>
<!--l. 382--><p class="noindent" >This is the appropriate moment to ask an awkward question: How
should an interpolated, approximated â€˜consumedâ€™ function like
<!--l. 382--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></math>
be extrapolated to return an estimated â€˜consumedâ€™ amount when evaluated at an
<!--l. 382--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math> outside the range
spanned by <!--l. 382--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">{</mo><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-open" stretchy="false">[</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">]</mo><mo 
class="MathClass-punc" stretchy="false">,</mo><mo 
class="MathClass-punc" stretchy="false">.</mo><mo 
class="MathClass-punc" stretchy="false">.</mo><mo 
class="MathClass-punc" stretchy="false">.</mo><mo 
class="MathClass-punc" stretchy="false">,</mo><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>n</mi><mo 
class="MathClass-close" stretchy="false">]</mo><mo 
class="MathClass-close" stretchy="false">}</mo></math>?
<!--l. 385--><p class="indent" >  For most canned piecewise-linear interpolation tools like  <a 
href="https://docs.scipy.org/doc/scipy/tutorial/interpolate.html" >scipy.interpolate</a>, when the
â€˜interpolatingâ€™ function is evaluated at a point outside the provided range, the algorithm
extrapolates under the assumption that the slope of the function remains constant beyond its
measured boundaries (that is, the slope is assumed to be equal to the slope of nearest
piecewise segment <span 
class="ec-lmri-12">within </span>the interpolated range); for example, if the bottommost gridpoint is
<!--l. 385--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi><mn>1</mn> <mo 
class="MathClass-rel" stretchy="false">=</mo><!--binary math rel, tripple hight--> <mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-open" stretchy="false">[</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">]</mo></math> and the corresponding
consumed level is <!--l. 385--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi><mn>1</mn> <mo 
class="MathClass-rel" stretchy="false">=</mo><msub><mrow 
> <mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></math>
we could calculate the â€˜marginal propensity to have consumedâ€™
<!--l. 385--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mo 
class="MathClass-ord">Ï°</mo></mrow><mrow 
><mn>1</mn></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo><msubsup><mrow 
> <mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi>
<mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></math>
and construct the approximation as the linear extrapolation below
<!--l. 386--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-open" stretchy="false">[</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">]</mo></math> from:
<table class="equation"><tr><td>
<!--l. 387--><p class="indent" >
<!--l. 387--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-21001r42"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">â‰¡</mo> <mi 
>c</mi><mn>1</mn> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>a</mi><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo><msub><mrow 
><mo 
class="MathClass-ord">Ï°</mo></mrow><mrow 
><mn>1</mn></mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(42)</td></tr></table>
<!--l. 392--><p class="indent" >  To see that this will lead us into diï¬ƒculties, consider what happens to the true (not approximated)
<!--l. 392--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>a</mi></mrow><mrow 
>
<mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></math> as
<!--l. 392--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math>
approaches a quantity we will call the â€˜natural borrowing constraintâ€™:
<!--l. 392--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>a</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>ğœƒ</mi></mrow><mo 
accent="true">Ì²</mo></munder><msubsup><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>T</mi> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msubsup 
></math>. From
(<a 
href="#x1-19005r33">33<!--tex4ht:ref: eq:vEndÎ´Tm1 --></a>) 
we have <table class="equation"><tr><td>
<!--l. 394--><p class="indent" >
                                                                                     
                                                                                     
<!--l. 394--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-21002r43"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><munder><mrow 
><mo>lim</mo> </mrow><mrow 
><mi 
>a</mi><mi 
>â†“</mi><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>a</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></mrow></munder 
><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><munder><mrow 
><mo>lim</mo> </mrow><mrow 
>
<mi 
>a</mi><mi 
>â†“</mi><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>a</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></mrow></munder 
><mi 
>Î²</mi><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle> <mrow><mo fence="true" form="prefix"> (</mo><mrow> <mfrac><mrow 
><mn>1</mn></mrow>
<mrow 
><msub><mrow 
>
<mi 
>n</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow></msub 
></mrow></mfrac> </mrow><mo fence="true" form="postfix">)</mo></mrow><munderover accentunder="false" accent="false"><mrow  
><mo  
> âˆ‘</mo>
  </mrow><mrow 
><mi 
>i</mi><mo 
class="MathClass-rel" stretchy="false">=</mo><mn>1</mn></mrow><mrow 
><msub><mrow 
><mi 
>n</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow></msub 
>
         </mrow></munderover 
><msup><mrow 
> <mrow><mo fence="true" form="prefix"> (</mo><mrow><mi 
>a</mi><msub><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">+</mo> <msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></mrow><mo fence="true" form="postfix">)</mo></mrow> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(43)</td></tr></table>
<!--l. 400--><p class="indent" >  But since <!--l. 400--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>ğœƒ</mi></mrow><mo 
accent="true">Ì²</mo></munder> <mo 
class="MathClass-rel" stretchy="false">=</mo> <msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mn>1</mn></mrow></msub 
></math>, exactly at
<!--l. 400--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo><msub><mrow 
> <munder accentunder="false" 
class="mml-underline"><mrow><mi 
>a</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math> the ï¬rst term in the summation
would be <!--l. 400--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mo 
class="MathClass-open" stretchy="false">(</mo><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>ğœƒ</mi></mrow><mo 
accent="true">Ì²</mo></munder> <mo 
class="MathClass-bin" stretchy="false">+</mo> <msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><msup><mrow 
><mn>0</mn></mrow><mrow 
><mi 
>Ï</mi></mrow></msup 
></math> which is inï¬nity.
The reason is simple: <!--l. 400--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>a</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math> is the
PDV, as of <!--l. 400--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>T</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mn>1</mn></math>, of the <span 
class="ec-lmri-12">minimum</span>
<span 
class="ec-lmri-12">possible realization of income </span>in <!--l. 400--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>T</mi></math>
(<!--l. 400--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>T</mi> </mrow></msub 
><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>a</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mn>1</mn></mrow></msub 
></math>).
Thus, if the consumer borrows an amount greater than or equal to
<!--l. 400--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>ğœƒ</mi></mrow><mo 
accent="true">Ì²</mo></munder><msubsup><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>T</mi> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msubsup 
></math> (that is, if the
consumer ends <!--l. 400--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>T</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mn>1</mn></math>
with <!--l. 400--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">â‰¤</mo><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>ğœƒ</mi></mrow><mo 
accent="true">Ì²</mo></munder><msubsup><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>T</mi> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msubsup 
></math>)
and then draws the worst possible income shock in period
<!--l. 400--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>T</mi></math>, they will have to
consume zero in period <!--l. 400--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>T</mi></math>,
which yields <!--l. 400--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>âˆ</mi></math>
utility and <!--l. 400--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>âˆ</mi></math>
marginal utility.
<!--l. 402--><p class="indent" >  As <a 
href="#XzeldesStochastic">Zeldes</a>Â (<a 
href="#XzeldesStochastic">1989</a>) ï¬rst noticed, this means that the consumer faces a
â€˜self-imposedâ€™ (or, as above, â€˜naturalâ€™) borrowing constraint (which springs from the
precautionary motive): They will never borrow an amount greater than or equal to
<!--l. 402--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>ğœƒ</mi></mrow><mo 
accent="true">Ì²</mo></munder><msubsup><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>T</mi> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msubsup 
></math> (that is, assets will never
reach the lower bound of <!--l. 402--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>a</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math>).
The constraint is â€˜self-imposedâ€™ in the precise sense that if the utility function were diï¬€erent
(say, Constant Absolute Risk Aversion), the consumer might be willing to borrow more than
<!--l. 402--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>ğœƒ</mi></mrow><mo 
accent="true">Ì²</mo></munder><msubsup><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>T</mi> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msubsup 
></math>
because a choice of zero or negative consumption in period
<!--l. 402--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>T</mi></math> would yield some ï¬nite
amount of utility.<span class="footnote-mark"><a 
href="SolvingMicroDSOPs13.html#fn12x0"><sup class="textsuperscript">12</sup></a></span><a 
 id="x1-21003f12"></a>
     
<!--l. 405--><p class="indent" >  This self-imposed constraint cannot be captured well when the
<!--l. 405--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
></math>
function is approximated by a piecewise linear function like
                                                                                     
                                                                                     
<!--l. 405--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
></math>,
because it is impossible for the linear extrapolation below
<!--l. 405--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>a</mi></mrow><mo 
accent="true">Ì²</mo></munder></math> to correctly
predict <!--l. 405--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>a</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
>
<mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>âˆ</mi><mo 
class="MathClass-punc" stretchy="false">.</mo></math>
<!--l. 410--><p class="indent" >  So, the marginal value of saving approaches inï¬nity as
<!--l. 410--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi> <mi 
>â†“</mi><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>a</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>ğœƒ</mi></mrow><mo 
accent="true">Ì²</mo></munder><msubsup><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>T</mi> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msubsup 
></math>. But this
implies that <!--l. 410--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><munder><mrow 
><mo>lim</mo> </mrow><mrow 
><mi 
>a</mi><mi 
>â†“</mi><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>a</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></mrow></munder 
><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <msup><mrow 
><mo 
class="MathClass-open" stretchy="false">(</mo><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mi 
>Ï</mi></mrow></msup 
> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>0</mn></math>;
that is, as <!--l. 410--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>
approaches its â€˜natural borrowing constraintâ€™ minimum possible value, the corresponding amount of
worst-case <!--l. 410--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math>
must approach <span 
class="ec-lmri-12">its </span>lower bound: zero.
<!--l. 412--><p class="indent" >  The upshot is a realization that all we need to do to address these problems is to prepend each
of the <!--l. 412--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><msub><mrow 
><mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--></mrow><mrow 
><mstyle mathvariant="monospace"><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>1</mi></mstyle></mrow></msub 
></math> and
<!--l. 412--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><msub><mrow 
><mstyle mathvariant="monospace"><mi 
>c</mi></mstyle><!--/binary math rel, tripple hight--></mrow><mrow 
><mstyle mathvariant="monospace"><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>1</mi></mstyle></mrow></msub 
></math> from (<a 
href="#x1-20010r41">41<!--tex4ht:ref: eq:consumedfnvecs --></a>)
with an extra point so that the ï¬rst element in the mapping that produces our interpolation
function is <!--l. 412--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">{</mo><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>a</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>0</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mo 
class="MathClass-close" stretchy="false">}</mo></math>.
This is done in section â€œThe Self-Imposed â€˜Naturalâ€™ Borrowing Constraint and the
<!--l. 412--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math> Lower
Boundâ€ of the notebook.
<!--l. 415--><p class="indent" >  <a 
 id="GothVInvVSGothC"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-210059"></a>
                                                                                     
                                                                                     
<div  
class="centerline">                                         <img 
src="./Figures/GothVInvVSGothC.png" alt="PIC"  
width="433" height="325" >                                         </div>
<figcaption class="caption" ><span class="id">FigureÂ 9:                                                                                                </span><span  
class="content">True
<!--l. 418--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mi 
>Î›</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
vs                                             its                                             approximation
<!--l. 418--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mover 
accent="true"><mrow 
><mi 
>Î›</mi></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math></span></figcaption><!--tex4ht:label?: x1-210059 -->
                                                                                     
                                                                                     
<!--l. 420--><p class="indent" >  </figure>
<!--l. 423--><p class="indent" >  Figure <a 
href="#x1-210059">9<!--tex4ht:ref: fig:GothVInvVSGothC --></a> shows the result. The solid line calculates the exact numerical value of the consumed
function <!--l. 423--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
while the dashed line is the linear interpolating approximation
<!--l. 423--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">.</mo></math> This
ï¬gure illustrates the value of the transformation: The true function is close to linear, and so the
linear approximation is almost indistinguishable from the true function except at the very lowest
values of <!--l. 423--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>.
<!--l. 425--><p class="indent" >  FigureÂ <a 
href="#x1-2100610">10<!--tex4ht:ref: fig:GothVVSGothCInv --></a> similarly shows that when we generate
<!--l. 425--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mover 
accent="true"><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math> using our
augmented <!--l. 425--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mo 
class="MathClass-open" stretchy="false">[</mo><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
></math>
(dashed line) we obtain a <span 
class="ec-lmri-12">much </span>closer approximation to the true marginal value function
<!--l. 425--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math> (solid
line) than we obtained in the previous exercise which did not do the transformation
(FigureÂ <a 
href="#x1-190067">7<!--tex4ht:ref: fig:PlotOPRawVSFOC --></a>).
<!--l. 428--><p class="indent" >  <a 
 id="GothVVSGothCInv"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-2100610"></a>
                                                                                     
                                                                                     
<div  
class="centerline">                                         <img 
src="./Figures/GothVVSGothCInv.png" alt="PIC"  
width="433" height="325" >                                         </div>
<figcaption class="caption" ><span class="id">FigureÂ 10:                                                                                              </span><span  
class="content">True
<!--l. 431--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
vs.
<!--l. 431--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mover 
accent="true"><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
Constructed                                                                                           Using
<!--l. 431--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math></span></figcaption><!--tex4ht:label?: x1-2100610 -->
                                                                                     
                                                                                     
<!--l. 433--><p class="indent" >  </figure>
<!--l. 435--><p class="indent" >  <a 
 id="the-method-of-endogenous-gridpoints"></a>
  
<h4 class="subsectionHead"><span class="titlemark">6.9 </span> <a 
 id="x1-220006.9"></a>The Method of Endogenous Gridpoints (â€˜EGMâ€™)</h4>
<!--l. 439--><p class="noindent" >The solution procedure above for ï¬nding <!--l. 439--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
still requires us, for each point in <!--l. 439--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>m</mi></mstyle><!--/binary math rel, tripple hight--><msub><mrow 
><mstyle mathvariant="monospace"></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>1</mi></mrow></msub 
></mstyle></math>,
to use a numerical rootï¬nding algorithm to search for the value of
<!--l. 439--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math> that
solves <!--l. 439--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>c</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo><msubsup><mrow 
> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
>
<mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>.
Though sections <a 
href="#x1-200006.7">6.7<!--tex4ht:ref: subsec:transformation --></a> and <a 
href="#x1-210006.8">6.8<!--tex4ht:ref: subsec:LiqConstrSelfImposed --></a> developed a highly eï¬ƒcient and accurate procedure to calculate
<!--l. 439--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
></math>, those
approximations do nothing to eliminate the need for using a rootï¬nding operation for calculating, for
an arbitrary <!--l. 439--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>,
the optimal <!--l. 439--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math>.
And rootï¬nding is a notoriously computation-intensive (that is, slow!) operation.
<!--l. 441--><p class="indent" >  Fortunately, it turns out that there is a way to completely skip this slow rootï¬nding step. The
method can be understood by noting that we have already calculated, for a set of arbitrary values of
<!--l. 441--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--> <mo 
class="MathClass-rel" stretchy="false">=</mo><!--binary math rel, tripple hight--> <mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--><msub><mrow 
><mstyle mathvariant="monospace"></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>1</mi></mrow></msub 
></mstyle></math>, the corresponding
<!--l. 441--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>c</mi></mstyle><!--/binary math rel, tripple hight--></math> values for
which this <!--l. 441--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--></math>
is optimal.
<!--l. 443--><p class="indent" >  But with mutually consistent values of <!--l. 443--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>c</mi></mstyle><!--/binary math rel, tripple hight--><msub><mrow 
><mstyle mathvariant="monospace"></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>1</mi></mrow></msub 
></mstyle></math>
and <!--l. 443--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--><msub><mrow 
><mstyle mathvariant="monospace"></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>1</mi></mrow></msub 
></mstyle></math> (consistent,
in the sense that they are the unique optimal values that correspond to the solution to the problem), we
can obtain the <!--l. 443--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>m</mi></mstyle><!--/binary math rel, tripple hight--><msub><mrow 
><mstyle mathvariant="monospace"></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>1</mi></mrow></msub 
></mstyle></math>
vector that corresponds to both of them from <table class="equation"><tr><td>
<!--l. 444--><p class="indent" >
<!--l. 444--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-22001r44"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>m</mi></mstyle><!--/binary math rel, tripple hight--><msub><mrow 
><mstyle mathvariant="monospace"></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>1</mi></mrow></msub 
></mstyle></mtd>
    <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>c</mi></mstyle><!--/binary math rel, tripple hight--><msub><mrow 
><mstyle mathvariant="monospace"></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>1</mi></mrow></msub 
></mstyle> <mo 
class="MathClass-bin" stretchy="false">+</mo><!--binary math rel, tripple hight--> <mstyle mathvariant="monospace"><mi 
>a</mi></mstyle><!--/binary math rel, tripple hight--><msub><mrow 
><mstyle mathvariant="monospace"></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>1</mi></mrow></msub 
></mstyle><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(44)</td></tr></table>
<!--l. 450--><p class="indent" >  These <!--l. 450--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math> gridpoints
are â€œendogenousâ€ in contrast to the usual solution method of specifying some <span 
class="ec-lmri-12">ex-ante </span>(exogenous) grid
of values of <!--l. 450--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>m</mi></mstyle><!--/binary math rel, tripple hight--></math>
and then using a rootï¬nding routine to locate the corresponding optimal consumption vector
<!--l. 450--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>c</mi></mstyle><!--/binary math rel, tripple hight--></math>.
                                                                                     
                                                                                     
<!--l. 452--><p class="indent" >  This routine is performed in the â€œEndogenous Gridpointsâ€ section of the notebook. First, the
<span 
class="ec-lmtt-12">endOfPrd.cCntn_Tm1 </span>function is called for each of the pre-speciï¬ed values of end-of-period assets
stored in <!--l. 452--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>a</mi><mi 
>V</mi><mi 
>e</mi><mi 
>c</mi></mstyle></math>.
These values of consumption and assets are used to produce the list
of endogenous gridpoints, stored in the object <span 
class="ec-lmtt-12">mVec_egm</span>. With the
<!--l. 452--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mstyle><!--/binary math rel, tripple hight--></math> values in hand, the notebook
can generate a set of <!--l. 452--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>m</mi></mstyle><!--/binary math rel, tripple hight--><msub><mrow 
><mstyle mathvariant="monospace"></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>1</mi></mrow></msub 
></mstyle></math>
and <!--l. 452--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>c</mi></mstyle><!--/binary math rel, tripple hight--><msub><mrow 
><mstyle mathvariant="monospace"></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>1</mi></mrow></msub 
></mstyle></math>
pairs that can be interpolated between in order to yield
<!--l. 452--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math> at virtually zero
computational cost!<span class="footnote-mark"><a 
href="SolvingMicroDSOPs14.html#fn13x0"><sup class="textsuperscript">13</sup></a></span><a 
 id="x1-22002f13"></a>
     
<!--l. 454--><p class="indent" >  <a 
 id="PlotComparecTm1AD"></a> One might worry about whether the <!--l. 455--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">{</mo><mi 
>m</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">}</mo></math>
points obtained in this way will provide a good representation of the consumption function as
a whole, but in practice there are good reasons why they work well (basically, this procedure
generates a set of gridpoints that is naturally dense right around the parts of the function with
the greatest nonlinearity). <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-2200411"></a>
                                                                                     
                                                                                     
<div  
class="centerline">                                         <img 
src="./Figures/PlotComparecTm1AD.png" alt="PIC"  
width="433" height="325" >                                         </div>
<figcaption class="caption" ><span class="id">FigureÂ 11:
</span><span  
class="content"><!--l. 458--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
(solid)                                                                                                  versus
<!--l. 458--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
(dashed)</span></figcaption><!--tex4ht:label?: x1-2200411 -->
                                                                                     
                                                                                     
<!--l. 460--><p class="indent" >  </figure>
<!--l. 461--><p class="indent" >  FigureÂ <a 
href="#x1-2200411">11<!--tex4ht:ref: fig:ComparecTm1AD --></a> plots the actual consumption function
<!--l. 461--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math> and the approximated
consumption function <!--l. 461--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math>
derived by the method of endogenous grid points. Compared to the approximate consumption functions
illustrated in FigureÂ <a 
href="#x1-190078">8<!--tex4ht:ref: fig:PlotcTm1ABC --></a>, <!--l. 461--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math>
is quite close to the actual consumption function.
<!--l. 463--><p class="indent" >  <a 
 id="improving-the-a-grid"></a>
  
<h4 class="subsectionHead"><span class="titlemark">6.10 </span> <a 
 id="x1-230006.10"></a>Improving the <!--l. 464--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>
Grid</h4>
<!--l. 467--><p class="noindent" >Thus far, we have arbitrarily used <!--l. 467--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>
gridpoints of <!--l. 467--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">{</mo><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>1</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>2</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>3</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>4</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mo 
class="MathClass-close" stretchy="false">}</mo></math> (augmented
in the last subsection by <!--l. 467--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>a</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math>).
But it has been obvious from the ï¬gures that the approximated
<!--l. 467--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
></math>
function tends to be farthest from its true value at low values of
<!--l. 467--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>. Combining this
with our insight that <!--l. 467--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>a</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math>
is a lower bound, we are now in position to deï¬ne a more deliberate method for constructing
gridpoints for <!--l. 467--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>
â€“ a method that yields values that are more densely spaced at low values of
<!--l. 467--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math> where
the function is more nonlinear.
<!--l. 469--><p class="indent" >  A pragmatic choice that works well is to ï¬nd the values such
that (1) the last value <span 
class="ec-lmri-12">exceeds the lower bound </span>by the same amount
<!--l. 469--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>a</mi></mrow><mo accent="true">Â¯</mo></mover></math> as
our original maximum gridpoint (in our case, 4.); (2) we have the same number
of gridpoints as before; and (3) the <span 
class="ec-lmri-12">multi-exponential growth rate </span>(that is,
<!--l. 469--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mi 
>e</mi></mrow><mrow 
><msup><mrow 
><mi 
>e</mi></mrow><mrow 
><msup><mrow 
><mi 
>e</mi></mrow><mrow 
><mo 
class="MathClass-punc" stretchy="false">.</mo><mo 
class="MathClass-punc" stretchy="false">.</mo><mo 
class="MathClass-punc" stretchy="false">.</mo></mrow></msup 
>
    </mrow></msup 
></mrow></msup 
></math> for some number
of exponentiations <!--l. 469--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>n</mi></math>
â€“ our default is 3) from each point to the next point is constant (instead of, as previously,
imposing constancy of the absolute gap between points).
<!--l. 471--><p class="indent" >  <a 
 id="GothVInvVSGothCEEE"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-2300112"></a>
                                                                                     
                                                                                     
<div  
class="centerline">                                         <img 
src="./Figures/GothVInvVSGothCEEE.png" alt="PIC"  
width="433" height="325" >                                         </div>
<figcaption class="caption" ><span class="id">FigureÂ 12: </span><span  
class="content"><!--l. 475--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
versus <!--l. 475--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>,
Multi-Exponential <!--l. 475--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>a</mi><mi 
>V</mi><mi 
>e</mi><mi 
>c</mi></mstyle></math></span></figcaption><!--tex4ht:label?: x1-2300112 -->
                                                                                     
                                                                                     
<!--l. 477--><p class="indent" >  </figure>
<!--l. 480--><p class="indent" >  <a 
 id="GothVVSGothCInvEEE"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-2300213"></a>
                                                                                     
                                                                                     
<!--l. 482--><p class="noindent" ><img 
src="./Figures/GothVVSGothCInvEEE.png" alt="PIC"  
width="433" height="325" >
<figcaption class="caption" ><span class="id">FigureÂ 13: </span><span  
class="content"><!--l. 484--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
vs. <!--l. 484--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mover 
accent="true"><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>,
Multi-Exponential <!--l. 484--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>a</mi><mi 
>V</mi><mi 
>e</mi><mi 
>c</mi></mstyle></math></span></figcaption><!--tex4ht:label?: x1-2300213 -->
                                                                                     
                                                                                     
<!--l. 486--><p class="indent" >  </figure>
<!--l. 488--><p class="indent" >  Section â€œImprove the <!--l. 488--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi><mi 
>g</mi><mi 
>r</mi><mi 
>i</mi><mi 
>d</mi></math>â€
begins by deï¬ning a function which takes as arguments the speciï¬cations of an initial grid of
assets and returns the new grid incorporating the multi-exponential approach outlined
above.
<!--l. 491--><p class="indent" >  Notice that the graphs depicted in FiguresÂ <a 
href="#x1-2300112">12<!--tex4ht:ref: fig:GothVInvVSGothCEE --></a> and <a 
href="#x1-2300213">13<!--tex4ht:ref: fig:GothVVSGothCInvEE --></a> are notably closer to their respective
truths than the corresponding ï¬gures that used the original grid.
<!--l. 493--><p class="indent" >  <a 
 id="program-structure"></a>
  
<h4 class="subsectionHead"><span class="titlemark">6.11 </span> <a 
 id="x1-240006.11"></a>Program Structure</h4>
<!--l. 496--><p class="noindent" >In section â€œSolve for <!--l. 496--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>c</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
in Multiple Periods,â€ the natural and artiï¬cial borrowing constraints are combined with the
endogenous gridpoints method to approximate the optimal consumption function for a
speciï¬c period. Then, this function is used to compute the approximated consumption
in the previous period, and this process is repeated for some speciï¬ed number of
periods.
<!--l. 498--><p class="indent" >  The essential structure of the program is a loop that iteratively solves for consumption
functions by working backward from an assumed ï¬nal period, using the dictionary
<span 
class="ec-lmtt-12">cFunc_life </span>to store the interpolated consumption functions up to the beginning period.
Consumption in a given period is utilized to determine the endogenous gridpoints for the
preceding period. This is the sense in which the computation of optimal consumption is done
recursively.
<!--l. 500--><p class="indent" >  In the terminology of sectionÂ <a 
href="#x1-70004.3">4.3<!--tex4ht:ref: subsubsec:builders --></a>, each iteration of this backward loop is an invocation of the backward
builder <!--l. 500--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>B</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â†</mo> 
<mstyle mathvariant="normal"><mi 
>p</mi><mi 
>r</mi><mi 
>d</mi></mstyle></math>: it creates the
Connector (inserted into <!--l. 500--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>P</mi></mstyle></math>
between the new and existing period solutions), uses it and the already-solved next period to perform the
creation of <!--l. 500--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>, and
solves for the optimal consumption rule. The dictionary <span 
class="ec-lmtt-12">cFunc_life </span>is the computational embodiment
of <!--l. 500--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>P</mi></mstyle></math>â€”the
growing structure of solved periods and Connectors between them assembled by backward
induction.
<!--l. 502--><p class="indent" >  For a realistic life cycle problem, it would also be necessary at a minimum to calibrate a
nonconstant path of expected income growth over the lifetime that matches the
empirical proï¬le; allowing for such a calibration is the reason we have included the
<!--l. 505--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mo 
class="MathClass-open" stretchy="false">{</mo><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle><mo 
class="MathClass-close" stretchy="false">}</mo></mrow><mrow 
><mi 
>t</mi></mrow><mrow 
><mi 
>T</mi> </mrow></msubsup 
></math> vector
in our computational speciï¬cation of the problem.
<!--l. 508--><p class="indent" >  <a 
 id="results"></a>
  
<h4 class="subsectionHead"><span class="titlemark">6.12 </span> <a 
 id="x1-250006.12"></a>Results</h4>
<!--l. 511--><p class="noindent" >The code creates the relevant <!--l. 511--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
functions for any period in the horizon, at the given values of
                                                                                     
                                                                                     
<!--l. 511--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>. Figure <a 
href="#x1-2500114">14<!--tex4ht:ref: fig:PlotCFuncsConverge --></a>
shows <!--l. 511--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>n</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
for <!--l. 511--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>n</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mo 
class="MathClass-open" stretchy="false">{</mo><mn>2</mn><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>1</mn><mn>5</mn><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>1</mn><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>5</mn><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>1</mn><mo 
class="MathClass-close" stretchy="false">}</mo></math>. At
least one feature of this ï¬gure is encouraging: the consumption functions converge as the
horizon extends, something that <a 
href="#XBufferStockTheory">Carroll</a>Â (<a 
href="#XBufferStockTheory">2023b</a>) shows must be true under certain
parametric conditions that are satisï¬ed by the baseline parameter values being used
here.
<!--l. 513--><p class="indent" >  <a 
 id="PlotCFuncsConverge"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-2500114"></a>
                                                                                     
                                                                                     
<!--l. 515--><p class="noindent" ><img 
src="./Figures/PlotCFuncsConverge.png" alt="PIC"  
width="433" height="325" >
<figcaption class="caption" ><span class="id">FigureÂ 14:                                                                                      </span><span  
class="content">Converging
<!--l. 516--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>n</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
Functions                                                                                                   as
<!--l. 516--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>n</mi></math>
Increases</span></figcaption><!--tex4ht:label?: x1-2500114 -->
                                                                                     
                                                                                     
<!--l. 518--><p class="indent" >  </figure>
<!--l. 520--><p class="indent" >  The construction of <!--l. 520--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>B</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â†</mo> 
<mstyle mathvariant="normal"><mi 
>p</mi><mi 
>r</mi><mi 
>d</mi></mstyle></math>
in this single-stage case uses the builders and connectors of subsectionÂ <a 
href="#x1-70004.3">4.3<!--tex4ht:ref: subsubsec:builders --></a>.
<!--l. 5--><p class="indent" >  <a 
 id="the-infinite-horizon"></a>
  
<h3 class="sectionHead"><span class="titlemark">7 </span> <a 
 id="x1-260007"></a>The Inï¬nite Horizon</h3>
<!--l. 8--><p class="noindent" >All of the solution methods presented so far have involved period-by-period iteration from an
assumed last period of life, as is appropriate for life cycle problems. However, if the parameter
values for the problem satisfy certain conditions (detailed in <a 
href="#XBufferStockTheory">Carroll</a>Â (<a 
href="#XBufferStockTheory">2023b</a>)), the
consumption rules (and the rest of the problem) will converge to a ï¬xed rule as the
horizon (remaining lifetime) gets large, as illustrated in FigureÂ <a 
href="#x1-2500114">14<!--tex4ht:ref: fig:PlotCFuncsConverge --></a>. Furthermore,
DeatonÂ (<a 
href="#XdeatonLiqConstr">1991</a>), CarrollÂ (<a 
href="#Xcarroll:brookings">1992</a>;Â <a 
href="#XcarrollBSLCPIH">1997</a>) and others have argued that the â€˜buï¬€er-stockâ€™ saving
behavior that emerges under some further restrictions on parameter values is a good
approximation of the behavior of typical consumers over much of the lifetime. Methods for
ï¬nding the converged functions are therefore of interest, and are dealt with in this
section.
<!--l. 10--><p class="indent" >  Of course, the simplest such method is to solve the problem as speciï¬ed above for a large
number of periods. This is feasible, but there are much faster methods.
<!--l. 14--><p class="indent" >  <a 
 id="convergence"></a>
  
<h4 class="subsectionHead"><span class="titlemark">7.1 </span> <a 
 id="x1-270007.1"></a>Convergence</h4>
<!--l. 17--><p class="noindent" >In solving an inï¬nite-horizon problem, it is necessary to have some metric that determines
when to stop because a solution that is â€˜good enoughâ€™ has been found.
<!--l. 21--><p class="indent" >  A natural metric is deï¬ned by the unique â€˜targetâ€™ level of wealth that <a 
href="#XBufferStockTheory">Carroll</a>Â (<a 
href="#XBufferStockTheory">2023b</a>)
proves will exist in problems of this kind  <a 
href="https://llorracc.github.io/BufferStockTheory#GICNrm" >under certain conditions</a>: The
<!--l. 22--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">^</mo></mover></math> such
that <a 
 id="eq-mTrgNrmet"></a> <table class="equation"><tr><td>
<!--l. 24--><p class="indent" >
<!--l. 24--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                             <mstyle 
   id="x1-27001r45"  class="label" ></mstyle><!--endlabel-->
                             <msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">[</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">]</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>1</mn><mstyle 
class="text"><mtext  >Â ifÂ </mtext></mstyle><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">^</mo></mover>
</math></td><td class="eq-no">(45)</td></tr></table>
<!--l. 28--><p class="indent" >  where the accent is meant to signify that this is the value that other
<!--l. 29--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>â€™s
                                                                                     
                                                                                     
â€˜point to.â€™
<!--l. 31--><p class="indent" >  Given a consumption rule <!--l. 31--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
it is straightforward to ï¬nd the corresponding
<!--l. 32--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">^</mo></mover></math>. So for
our problem, a solution is declared to have converged if the following criterion is met:
<!--l. 34--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mrow><mo fence="true" form="prefix"> |</mo><mrow><msub><mrow 
><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">^</mo></mover></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msub><mrow 
><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">^</mo></mover></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mrow><mo fence="true" form="postfix">|</mo></mrow> <mo 
class="MathClass-rel" stretchy="false">&#x003C;</mo> <mi 
>ğœ–</mi></math>, where
<!--l. 34--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>ğœ–</mi></math> is a
very small number and deï¬nes our degree of convergence tolerance.
<!--l. 37--><p class="indent" >  Similar criteria can obviously be speciï¬ed for other problems. However, it is always wise to
plot successive function diï¬€erences and to experiment a bit with convergence criteria to verify
that the function has converged for all practical purposes.
<!--l. 5--><p class="indent" >  <a 
 id="method-of-moderation"></a>
  
<h3 class="sectionHead"><span class="titlemark">8 </span> <a 
 id="x1-280008"></a>The Method of Moderation</h3>
<!--l. 8--><p class="noindent" >The endogenous gridpoints method constructs a consumption function
<!--l. 9--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math> by interpolating
a ï¬nite set of <!--l. 10--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
pairs. A practical problem arises when the approximation must be evaluated at values of
<!--l. 11--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>
outside the grid: naÃ¯ve linear extrapolation can predict consumption so high that
precautionary saving turns negative, an economically impossible result.
<!--l. 16--><p class="indent" >  A solution, developed in <a 
href="#Xmethod-of-moderation">Carroll, Lujan, Chipeniuk, Tokuoka, and Wu</a>Â (<a 
href="#Xmethod-of-moderation">2026</a>), exploits the
fact that the true consumption function is bounded between two analytically computable
perfect-foresight rules.
<ul class="itemize1">      
<li class="itemize">
<!--l. 20--><p class="noindent" ><span 
class="ec-lmbx-12">Optimist. </span>An agent who is certain that future income shocks will always equal their mean has human
wealth <!--l. 22--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>h</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow></msub 
></math>
and consumes <table class="equation"><tr><td>
<!--l. 23--><p class="noindent" >      
<!--l. 23--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                                            <mstyle 
   id="x1-28001r46"  class="label" ></mstyle><!--endlabel--><msub><mrow 
>
                                            <mover accent="false" 
class="mml-overline"><mrow><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo 
accent="true">Â¯</mo></mover>
                                             </mrow><mrow 
><mi 
>t</mi></mrow></msub 
>
                                                      <mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mspace width="0.28em" class="thickpace"/> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mspace width="0.28em" class="thickpace"/><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <msub><mrow 
><mi 
>h</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo><mspace width="0.17em" class="thinspace"/><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>Îº</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">,</mo>
</math></td><td class="eq-no">(46)</td></tr></table>
                                                                                     
                                                                                     
      
<!--l. 28--><p class="noindent" >where <!--l. 28--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>Îº</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math>
is the minimal marginal propensity to consume of the corresponding perfect-foresight
problem.
</li>      
<li class="itemize">
<!--l. 30--><p class="noindent" ><span 
class="ec-lmbx-12">Pessimist. </span>An agent who assumes the worst possible income realisation in every future
period has lower human wealth and a consumption ï¬‚oor at <table class="equation"><tr><td>
<!--l. 33--><p class="noindent" >      
<!--l. 33--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                                            <mstyle 
   id="x1-28002r47"  class="label" ></mstyle><!--endlabel--><msub><mrow 
>
                                            <munder accentunder="false" 
class="mml-underline"><mrow><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo 
accent="true">Ì²</mo></munder>
                                             </mrow><mrow 
><mi 
>t</mi></mrow></msub 
>
                                                      <mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mspace width="0.28em" class="thickpace"/> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mspace width="0.28em" class="thickpace"/><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>m</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo><mspace width="0.17em" class="thinspace"/><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>Îº</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">,</mo>
</math></td><td class="eq-no">(47)</td></tr></table>
<!--l. 38--><p class="noindent" >where <!--l. 38--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mi 
>m</mi></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math>
is the natural borrowing constraint.
</li>      
<li class="itemize">
<!--l. 39--><p class="noindent" ><span 
class="ec-lmbx-12">Realist. </span>The true solution satisï¬es <!--l. 40--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">&#x003C;</mo><msub><mrow 
> <mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">&#x003C;</mo><msub><mrow 
> <mover accent="false" 
class="mml-overline"><mrow><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo 
accent="true">Â¯</mo></mover></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
for all <!--l. 41--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>.</li></ul>
<!--l. 44--><p class="indent" >  Because the realistâ€™s consumption always lies between these bounds, one can deï¬ne a
<span 
class="ec-lmri-12">moderation ratio </span><table class="equation"><tr><td>
<!--l. 46--><p class="indent" >
<!--l. 46--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                           <mstyle 
   id="x1-28003r48"  class="label" ></mstyle><!--endlabel-->
                           <msub><mrow 
><mi 
>Ï‰</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mspace width="0.28em" class="thickpace"/> <mo 
class="MathClass-rel" stretchy="false">â‰¡</mo><mspace width="0.28em" class="thickpace"/><mfrac><mrow 
><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
>
    <mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow> 
<mrow 
><msub><mrow 
>
<mover accent="false" 
class="mml-overline"><mrow><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo 
accent="true">Â¯</mo></mover>
</mrow><mrow 
><mi 
>t</mi></mrow></msub 
>
<mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></mfrac><mspace width="0.28em" class="thickpace"/> <mo 
class="MathClass-rel" stretchy="false">âˆˆ</mo><mspace width="0.28em" class="thickpace"/><mo 
class="MathClass-open" stretchy="false">(</mo><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">,</mo>
</math></td><td class="eq-no">(48)</td></tr></table>
                                                                                     
                                                                                     
<!--l. 53--><p class="indent" >  which measures how close the realist is to the optimist
(<!--l. 54--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‰</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>1</mn></math>) versus the pessimist
(<!--l. 54--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‰</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>0</mn></math>). The key insight is that
the logit of this ratio, <!--l. 56--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo>log</mo><!--nolimits--> <mspace width="-0.17em" class="negthinspace"/><mrow><mo class="MathClass-open" fence="true" mathsize="1.19em" >(</mo><mrow><mi 
>Ï‰</mi><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mn>1</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>Ï‰</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mo class="MathClass-close" fence="true" mathsize="1.19em" >)</mo></mrow></math>,
is nearly linear in <!--l. 57--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>
and therefore easy to interpolate accurately. Consumption is recovered via the inverse
transformation: <table class="equation"><tr><td>
<!--l. 59--><p class="indent" >
<!--l. 59--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                    <mstyle 
   id="x1-28004r49"  class="label" ></mstyle><!--endlabel--><msub><mrow 
>
                    <mstyle mathvariant="normal">
                    <mi 
>c</mi></mstyle>
                     </mrow><mrow 
><mi 
>t</mi></mrow></msub 
>
                      <mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mspace width="0.28em" class="thickpace"/> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mspace width="0.28em" class="thickpace"/><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mspace width="0.28em" class="thickpace"/> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mspace width="0.28em" class="thickpace"/>       <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
>
<mn>1</mn> <mo 
class="MathClass-bin" stretchy="false">+</mo> <msup><mrow 
><mi 
>e</mi></mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msub><mrow 
><mi 
>Ï‡</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msup 
></mrow></mfrac><mrow><mo class="MathClass-open" fence="true" mathsize="1.19em" >(</mo><mrow><msub><mrow 
><mover accent="false" 
class="mml-overline"><mrow><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo 
accent="true">Â¯</mo></mover></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mo class="MathClass-close" fence="true" mathsize="1.19em" >)</mo></mrow><mo 
class="MathClass-punc" stretchy="false">,</mo>
</math></td><td class="eq-no">(49)</td></tr></table>
<!--l. 66--><p class="indent" >  where <!--l. 66--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>Ï‡</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">â‰¡</mo><mo>log</mo><!--nolimits--> <mspace width="-0.17em" class="negthinspace"/><mrow><mo class="MathClass-open" fence="true" mathsize="1.19em" >(</mo><mrow><msub><mrow 
><mi 
>Ï‰</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mn>1</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <msub><mrow 
><mi 
>Ï‰</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mo class="MathClass-close" fence="true" mathsize="1.19em" >)</mo></mrow></math>
is the logit-transformed moderation ratio. Since the recovered
<!--l. 67--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></math> is
automatically sandwiched between the bounds, the extrapolation problem vanishes.
<!--l. 71--><p class="indent" >  FigureÂ <a 
href="#x1-2800515">15<!--tex4ht:ref: fig:IntExpFOCInvPesReaOptNeedHiPlot --></a> illustrates the idea: the realist consumption function (middle curve) is bounded
above by the optimist and below by the pessimist.
<!--l. 1--><p class="indent" >  <a 
 id="IntExpFOCInvPesReaOptNeedHiPlot"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-2800515"></a>
                                                                                     
                                                                                     
<!--l. 3--><p class="noindent" ><img 
src="./Figures/IntExpFOCInvPesReaOptNeedHiPlot.png" alt="PIC"  
width="433" height="271" >
<figcaption class="caption" ><span class="id">FigureÂ 15:                                    </span><span  
class="content">Moderation                                   Illustrated:
<!--l. 4--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><munder accentunder="false" 
class="mml-underline"><mrow><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo 
accent="true">Ì²</mo></munder></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">&#x003C;</mo><msub><mrow 
> <mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">&#x003C;</mo><msub><mrow 
> <mover accent="false" 
class="mml-overline"><mrow><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo 
accent="true">Â¯</mo></mover></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
></math></span></figcaption><!--tex4ht:label?: x1-2800515 -->
                                                                                     
                                                                                     
<!--l. 6--><p class="indent" >  </figure>
<!--l. 85--><p class="indent" >  The full treatment in <a 
href="#Xmethod-of-moderation">Carroll, Lujan, Chipeniuk, Tokuoka, and Wu</a>Â (<a 
href="#Xmethod-of-moderation">2026</a>) extends the
method with tighter upper bounds, applies an analogous transformation to the value
function, and shows how to handle stochastic returns and Hermite interpolation
reï¬nements.
<!--l. 5--><p class="indent" >  <a 
 id="multiple-control-variables"></a>
  
<h3 class="sectionHead"><span class="titlemark">9 </span> <a 
 id="x1-290009"></a>Multiple Control Variables and Modularity</h3>
<!--l. 8--><p class="noindent" >We now consider problems with multiple control variables. SectionÂ <a 
href="#x1-300009.1">9.1<!--tex4ht:ref: subsec:JointProblem --></a> presents the
joint consumption-and-portfolio optimization as a canonical example: we derive the
simultaneous ï¬rst-order conditions and show that direct numerical solution of the
multidimensional problem is computationally expensiveâ€”but that decomposing it into a
sequence of single-control problems is much faster. SectionÂ <a 
href="#x1-310009.2">9.2<!--tex4ht:ref: subsec:stageswithin --></a> develops the stage-based
machinery for such decompositions, building on the modular notation from sectionÂ <a 
href="#x1-40004">4<!--tex4ht:ref: sec:notation --></a>: the
discounting stage (<span 
class="ec-lmss-12">disc</span>), the standalone portfolio optimization (sectionÂ <a 
href="#x1-330009.2.2">9.2.2<!--tex4ht:ref: subsec:MCTheory --></a>), and
the general-purpose <span 
class="ec-lmss-12">portable </span>returns stage that uniï¬es portfolio choice and shock
realization. SectionÂ <a 
href="#x1-410009.2.5">9.2.5<!--tex4ht:ref: subsubsec:three-period-types --></a> combines these building blocks into three canonical period
types.
<!--l. 10--><p class="indent" >  <a 
 id="joint-optimization-problem"></a>
  
<h4 class="subsectionHead"><span class="titlemark">9.1 </span> <a 
 id="x1-300009.1"></a>The Joint Optimization Problem</h4>
<!--l. 13--><p class="noindent" >Our canonical example of a multi-control problem is the case where the agent has both a consumption choice
and a decision about <!--l. 13--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi></math>
(archaic Greek  <a 
href="https://en.wikipedia.org/wiki/Stigma_(ligature)" >stigma</a>): the share of assets in the risky asset. Given a risky-asset return factor
<!--l. 13--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="bold"><mi 
>R</mi></mstyle></math> and a riskless
return factor <!--l. 13--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle></math>,
the realized portfolio return is <a 
 id="eq-Rport"></a> <table class="equation"><tr><td>
<!--l. 15--><p class="indent" >
<!--l. 15--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-30001r50"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><mi 
>â„œ</mi><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>Ï‚</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mo 
class="MathClass-open" stretchy="false">(</mo><mstyle mathvariant="bold"><mi 
>R</mi></mstyle> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle><mo 
class="MathClass-close" stretchy="false">)</mo><mi 
>Ï‚</mi><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(50)</td></tr></table>
<!--l. 18--><p class="indent" >  Written as a single combined decision (substituting the budget constraint): <a 
 id="eq-Bellmanundated"></a> <table class="equation"><tr><td>
<!--l. 20--><p class="indent" >
                                                                                     
                                                                                     
<!--l. 20--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-30002r51"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><munder><mrow 
><mo>max</mo> </mrow><mrow 
><mo 
class="MathClass-open" stretchy="false">{</mo><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-punc" stretchy="false">,</mo><mi 
>Ï‚</mi><mo 
class="MathClass-close" stretchy="false">}</mo></mrow></munder 
><mspace width="0.33em" class="nbsp" /><mspace width="0.33em" class="nbsp" /><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>ğ”¼</mi><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>Î²</mi><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mover class="msup"><mrow 
><mover accent="false"><mrow><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mi 
>â„œ</mi><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>Ï‚</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>ğœƒ</mi></mrow><mo>ï¸·</mo></mover> </mrow><mrow 
><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
>
        </mrow></mover 
><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(51)</td></tr></table>
<!--l. 26--><p class="indent" >  Whether the stochastic variables <!--l. 26--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="bold"><mi 
>R</mi></mstyle></math>
and <!--l. 26--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>ğœƒ</mi></math>
are revealed at the end of the current period or the start of the next does not aï¬€ect this
equation. The ï¬rst-order conditions for this joint problem are: <table class="equation"><tr><td>
<!--l. 27--><p class="indent" >
<!--l. 27--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-30003r52"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
     <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle><msup><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow><mrow 
><mi 
>âˆ‚</mi><mi 
>a</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mi 
>Ï‚</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
                      <mtd columnalign="right" ></mtd>
</mtr><mtr 
><mtd columnalign="right" ><mn>0</mn></mtd>    <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle><msup><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow><mrow 
><mi 
>âˆ‚</mi><mi 
>Ï‚</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mi 
>Ï‚</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(52)</td></tr></table>
<!--l. 33--><p class="indent" >  Direct simultaneous solution of these two conditions is computationally expensive; the
remainder of this section develops modular stage-based machinery that decomposes the
problem into a sequence of simpler single-control optimizations.
<!--l. 85--><p class="indent" >  <a 
 id="stages-within-a-period"></a>
  
<h4 class="subsectionHead"><span class="titlemark">9.2 </span> <a 
 id="x1-310009.2"></a>Decomposing Into Modular Stages</h4>
<!--l. 88--><p class="noindent" >The single-stage-per-period formulation from sectionsÂ <a 
href="#x1-20002">2<!--tex4ht:ref: sec:the-problem --></a>â€“<a 
href="#x1-130006">6<!--tex4ht:ref: sec:solving-the-next --></a> is equivalent to a sequence of
simpler stages, each with a single job. We decompose it in that way so that adding portfolio
choice later requires no change to the consumption-stage codeâ€”only the stage list and the
Connectors between stages change (see sectionÂ <a 
href="#x1-40004">4<!--tex4ht:ref: sec:notation --></a>). The decomposition yields the same value
functions, consumption function, and Euler equation.
<!--l. 90--><p class="indent" >  <a 
 id="disc-stage"></a>
  
<h5 class="subsubsectionHead"><span class="titlemark">9.2.1 </span> <a 
 id="x1-320009.2.1"></a>The Discounting Stage (<span 
class="ec-lmss-12">disc</span>)</h5>
<!--l. 93--><p class="noindent" >The simplest decomposition isolates discounting into a standalone stage
that applies for the entire period. We call it the <span 
class="ec-lmss-12">disc </span>stage (control-name
                                                                                     
                                                                                     
<!--l. 93--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Î²</mi></math>). From equationÂ (<a 
href="#x1-7001r15">15<!--tex4ht:ref: eq:trns-single-prd --></a>),
<!--l. 93--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-punc" stretchy="false">:</mo><mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>Î²</mi><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰º</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></math>; the factor
<!--l. 93--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Î²</mi></math> was implicitly inside
the backward builder <!--l. 93--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>B</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â†</mo> 
<mstyle mathvariant="normal"><mi 
>p</mi><mi 
>r</mi><mi 
>d</mi></mstyle></math>
that created <!--l. 93--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></math>.
Instead, henceforth at the end of every period, we put the stub <span 
class="ec-lmss-12">disc </span>stage
which has no choice, no shocks, and a trivial decision value function
<!--l. 93--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>Î²</mi> <mo 
class="MathClass-bin" stretchy="false">â‹…</mo><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></math>, and we set
the discount factor to 1 for every prior stage in the period (leaving all the discounting to the <span 
class="ec-lmss-12">disc</span>
stage).<span class="footnote-mark"><a 
href="SolvingMicroDSOPs15.html#fn14x0"><sup class="textsuperscript">14</sup></a></span><a 
 id="x1-32001f14"></a>
     
<div class="table">
                                                                                     
                                                                                     
<!--l. 95--><p class="indent" >  <a 
 id="x1-320032"></a><figure class="float" 
>
                                                                                     
                                                                                     
<figcaption class="caption" ><span class="id">TableÂ 2: </span><span  
class="content">Discounting Stage (<!--l. 95--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Î²</mi></math>)
Perches</span></figcaption><!--tex4ht:label?: x1-320032 -->
<div class="center" 
>
<!--l. 97--><p class="noindent" >
<!--l. 104--><p class="noindent" ><!--tex4ht:inline--><div class="tabular"> <table id="TBL-3" class="tabular" 
rules="groups" 
><colgroup id="TBL-3-1g"><col 
id="TBL-3-1"></colgroup><colgroup id="TBL-3-2g"><col 
id="TBL-3-2"></colgroup><colgroup id="TBL-3-3g"><col 
id="TBL-3-3"></colgroup><colgroup id="TBL-3-4g"><col 
id="TBL-3-4"></colgroup><colgroup id="TBL-3-5g"><col 
id="TBL-3-5"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-3-1-"><td  style="text-align:right; white-space:nowrap;" id="TBL-3-1-1"  
class="td11">       Perch  </td>
                  <td  style="text-align:center; white-space:nowrap;" id="TBL-3-1-2"  
class="td11">                                 Indicator                                                     </td>
                                                                                                            <td  style="text-align:center; white-space:nowrap;" id="TBL-3-1-3"  
class="td11">                                   State                                                       </td>
                                                                                                                                                                                                      <td  style="text-align:center; white-space:nowrap;" id="TBL-3-1-4"  
class="td11">                               value functions                                                 </td>
                                                                                                                                                                                                                                                                                                <td  style="text-align:left; white-space:nowrap;" id="TBL-3-1-5"  
class="td11"> Explanation                                                                                                            </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-2-"><td  style="text-align:right; white-space:nowrap;" id="TBL-3-2-1"  
class="td11">      Arrival  </td>
                  <td  style="text-align:center; white-space:nowrap;" id="TBL-3-2-2"  
class="td11"> <!--l. 103--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel" stretchy="false">â‰º</mo></math> </td>
                                                                                                            <td  style="text-align:center; white-space:nowrap;" id="TBL-3-2-3"  
class="td11"> <!--l. 103--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin" stretchy="false">âˆ™</mo></math> </td>
                                                                                                                                                                                                      <td  style="text-align:center; white-space:nowrap;" id="TBL-3-2-4"  
class="td11"> <!--l. 103--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰º</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></math> </td>
                                                                                                                                                                                                                                                                                                <td  style="text-align:left; white-space:nowrap;" id="TBL-3-2-5"  
class="td11"> no shocks                                                                                                                </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-3-"><td  style="text-align:right; white-space:nowrap;" id="TBL-3-3-1"  
class="td11">   Decision(s)  </td><td  style="text-align:center; white-space:nowrap;" id="TBL-3-3-2"  
class="td11"> <!--l. 103--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></math> </td><td  style="text-align:center; white-space:nowrap;" id="TBL-3-3-3"  
class="td11"> <!--l. 103--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin" stretchy="false">âˆ™</mo></math> </td><td  style="text-align:center; white-space:nowrap;" id="TBL-3-3-4"  
class="td11"> <!--l. 103--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>Î²</mi><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></math> </td><td  style="text-align:left; white-space:nowrap;" id="TBL-3-3-5"  
class="td11"> apply <!--l. 103--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Î²</mi></math> </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-3-4-"><td  style="text-align:right; white-space:nowrap;" id="TBL-3-4-1"  
class="td11"> Continuation  </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-3-4-2"  
class="td11"> <!--l. 103--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel" stretchy="false">â‰»</mo></math> </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-3-4-3"  
class="td11"> <!--l. 103--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin" stretchy="false">âˆ™</mo></math> </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-3-4-4"  
class="td11"> <!--l. 103--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></math> </td>
<td  style="text-align:left; white-space:nowrap;" id="TBL-3-4-5"  
class="td11"> value at exit                                                                                                            </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-5-"><td  style="text-align:right; white-space:nowrap;" id="TBL-3-5-1"  
class="td11">             </td></tr></table>                                                                                                                                                                                                                                                                                                                                                                              </div>
<!--l. 106--><p class="noindent" ><span 
class="ec-lmr-10">n.b.:</span>
<!--l. 106--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin" stretchy="false">âˆ™</mo></math>
<span 
class="ec-lmr-10">is                  a                  generic                  passthrough                  state                  whose                  type                  (k-type                  or                  m-type)                  is                  inherited                  from                  the                  predecessor                  stageâ€™s                  Continuation                  state.                  For                  example,                  when                  </span><span 
class="ec-lmss-10">disc                  </span><span 
class="ec-lmr-10">follows                  </span><span 
class="ec-lmss-10">cons-noshocks</span><span 
class="ec-lmr-10">,</span>
<!--l. 106--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin" stretchy="false">âˆ™</mo></math>
<span 
class="ec-lmr-10">stands                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 for</span>
<!--l. 106--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>
<span 
class="ec-lmr-10">(k-type);                                                                                                                                             when                                                                                                                                             it                                                                                                                                             follows                                                                                                                                             </span><span 
class="ec-lmss-10">portable</span><span 
class="ec-lmr-10">,</span>
<!--l. 106--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-bin" stretchy="false">âˆ™</mo></math>
<span 
class="ec-lmr-10">stands                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 for</span>
<!--l. 106--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math>
<span 
class="ec-lmr-10">(m-type).</span>                                                                                                                                                                                                                                                                                                                                                                                        </div>
                                                                                     
                                                                                     
  
</figure>
</div>
<!--l. 112--><p class="indent" >  The two-stage period has stage list <!--l. 112--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">[</mo><mstyle 
class="text"><mtext class="textsf" mathvariant="sans-serif" >cons-with-shocks</mtext></mstyle><mo 
class="MathClass-punc" stretchy="false">,</mo><mstyle 
class="text"><mtext class="textsf" mathvariant="sans-serif" >disc</mtext></mstyle><mo 
class="MathClass-close" stretchy="false">]</mo></math>
(more compactly, <!--l. 112--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">[</mo><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-punc" stretchy="false">,</mo><mi 
>Î²</mi><mo 
class="MathClass-close" stretchy="false">]</mo></math>).
The convention that every non-<span 
class="ec-lmss-12">disc </span>stage is undiscounted and every period ends with <span 
class="ec-lmss-12">disc </span>will
mean we do not have to rearrange discounting as we rearrange stages within the
period.
<!--l. 114--><p class="indent" >  <a 
 id="standalone-portfolio-problem"></a>
  
<h5 class="subsubsectionHead"><span class="titlemark">9.2.2 </span> <a 
 id="x1-330009.2.2"></a>The Standalone Portfolio Problem</h5>
<!--l. 117--><p class="noindent" >Consider the standalone problem of an â€˜investorâ€™ choosing the portfolio share
<!--l. 117--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi></math>. The state variable
at the start is <!--l. 117--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi></math>
(capital available for investment); the Decision chooses
<!--l. 117--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi></math>; stochastic
shocks (<!--l. 117--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="bold"><mi 
>R</mi></mstyle></math>,
<!--l. 117--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>ğœƒ</mi></math>) are then realized, yielding
the Continuation state <!--l. 117--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>â„œ</mi><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>Ï‚</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mi 
>k</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>ğœƒ</mi></math>.
The portfolio share must be chosen <span 
class="ec-lmri-12">before </span>the return shock
<!--l. 117--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="bold"><mi 
>R</mi></mstyle></math> is realized.
We write <!--l. 117--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math>
rather than <!--l. 117--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>
for the post-shock state because a strict rule of our framework is the
prohibition of multiple timings of a given variable within a period. Note that
<!--l. 117--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math> is m-type (market resources
after shocks), matching <!--l. 117--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>;
the <!--l. 117--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ë‡</mi></math>
decoration distinguishes the two timings while preserving the type (see sectionÂ <a 
href="#x1-70004.3">4.3<!--tex4ht:ref: subsec:transitions --></a>).
<!--l. 119--><p class="indent" >  The ï¬rst-order condition with respect to <!--l. 119--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi></math>
is: <a 
 id="eq-FOCport"></a> <table class="equation"><tr><td>
<!--l. 1--><p class="indent" >
<!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-33001r53"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><mn>0</mn></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></mrow></msub 
><mrow><mo fence="true" form="prefix"> [</mo><mrow><mo 
class="MathClass-open" stretchy="false">(</mo><mstyle mathvariant="bold"><mi 
>R</mi></mstyle> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle><mo 
class="MathClass-close" stretchy="false">)</mo><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mo fence="true" form="postfix">]</mo></mrow></mtd>
  
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(53)</td></tr></table>
                                                                                     
                                                                                     
<!--l. 130--><p class="indent" >  where <!--l. 130--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
></math>
denotes the derivative of the continuation value function with respect to
<!--l. 130--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math>.
<!--l. 132--><p class="indent" >  The Decision equation yields the portfolio share function: <table class="equation"><tr><td>
<!--l. 1--><p class="indent" >
<!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-33002r54"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><mi 
>Ï‚</mi><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>k</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo></mtd><mtd columnalign="left" ><munder><mrow 
><mo>arg max</mo> </mrow><mrow 
><mi 
>Ï‚</mi></mrow></munder 
><mspace width="0.33em" class="nbsp" /><mspace width="0.33em" class="nbsp" /><msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></mrow></msub 
><mrow><mo fence="true" form="prefix"> [</mo><mrow><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow></msub 
><mrow><mo fence="true" form="prefix"> (</mo><mrow><mo 
class="MathClass-open" stretchy="false">(</mo><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mo 
class="MathClass-open" stretchy="false">(</mo><mstyle mathvariant="bold"><mi 
>R</mi></mstyle> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle><mo 
class="MathClass-close" stretchy="false">)</mo><mi 
>Ï‚</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mi 
>k</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>ğœƒ</mi></mrow><mo fence="true" form="postfix">)</mo></mrow></mrow><mo fence="true" form="postfix">]</mo></mrow><mo 
class="MathClass-punc" stretchy="false">,</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(54)</td></tr></table>
<!--l. 148--><p class="indent" >  <a 
 id="portable"></a>
  
<h5 class="subsubsectionHead"><span class="titlemark">9.2.3 </span> <a 
 id="x1-340009.2.3"></a>The <span 
class="ec-lmss-12">portable </span>Stage</h5>
<!--l. 151--><p class="noindent" >The portfolio optimization problem above can be generalized into a single conï¬gurable
<span 
class="ec-lmri-12">returns-and-shocks </span>stage by making the portfolio share an <span 
class="ec-lmri-12">optional parameter </span>rather than a
control variable that must always be optimized. We call this the <span 
class="ec-lmss-12">portable </span>stage (â€œ<span 
class="ec-lmri-12">port</span>folio-<span 
class="ec-lmri-12">able</span>â€):
it is â€œableâ€ to perform portfolio optimization or not, depending on a parameter
<!--l. 151--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover></math>.
<!--l. 153--><p class="indent" >  The stageâ€™s Arrival state includes the investable capital
<!--l. 153--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi></math> and an optional
portfolio share <!--l. 153--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover> <mo 
class="MathClass-rel" stretchy="false">âˆˆ</mo> <mo 
class="MathClass-open" stretchy="false">[</mo><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>1</mn><mo 
class="MathClass-close" stretchy="false">]</mo> <mo 
class="MathClass-bin" stretchy="false">âˆª</mo><mo 
class="MathClass-open" stretchy="false">{</mo><mo 
class="MathClass-rel" stretchy="false">âŠ¥</mo><mo 
class="MathClass-close" stretchy="false">}</mo></math>,
where <!--l. 153--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-rel" stretchy="false">âŠ¥</mo></math>
means â€œabsentâ€”optimize.â€ The behavior of the stage depends on
<!--l. 153--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover></math>:
<ul class="itemize1">      
<li class="itemize">
<!--l. 155--><p class="noindent" ><span 
class="ec-lmbx-12">Optimize mode </span>(<!--l. 155--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mo 
class="MathClass-rel" stretchy="false">âŠ¥</mo></math>):
The stage solves the portfolio optimization problem from sectionÂ <a 
href="#x1-330009.2.2">9.2.2<!--tex4ht:ref: subsec:MCTheory --></a>, choosing
<!--l. 155--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi></math>
optimally viaÂ (<a 
href="#x1-33002r54">54<!--tex4ht:ref: eq:shrDecision --></a>) with ï¬rst-order conditionÂ (<a 
href="#x1-33001r53">53<!--tex4ht:ref: eq:FOCport --></a>).
</li>      
<li class="itemize">
<!--l. 156--><p class="noindent" ><span 
class="ec-lmbx-12">Fixed-share mode </span>(<!--l. 156--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover> <mo 
class="MathClass-rel" stretchy="false">âˆˆ</mo> <mo 
class="MathClass-open" stretchy="false">[</mo><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>1</mn><mo 
class="MathClass-close" stretchy="false">]</mo></math>):
The portfolio share is prescribed; no optimization occurs. The value function is
<!--l. 156--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰º</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>k</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰º</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">[</mo><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>â„œ</mi><mo 
class="MathClass-open" stretchy="false">(</mo><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover><mo 
class="MathClass-close" stretchy="false">)</mo><mi 
>k</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>ğœƒ</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo></math>.
                                                                                     
                                                                                     
      
</li>
<li class="itemize">      
<!--l. 157--><p class="noindent" ><span 
class="ec-lmbx-12">No-risky-investment mode </span>(<!--l. 157--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>0</mn></math>):
A  special  case  of  ï¬xed-share  mode.  All  assets  earn  the  riskless  return:
<!--l. 157--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle><mi 
>k</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>ğœƒ</mi></math>.
The risky return <!--l. 157--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="bold"><mi 
>R</mi></mstyle></math>
is irrelevant. The value function reduces to <!--l. 157--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰º</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>k</mi><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>0</mn><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰º</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">[</mo><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle><mi 
>k</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>ğœƒ</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo></math>.</li></ul>
<!--l. 160--><p class="noindent" >The perches of this stage are:
<div class="table">
                                                                                     
                                                                                     
<!--l. 162--><p class="indent" >  <a 
 id="x1-340013"></a><figure class="float" 
>
                                                                                     
                                                                                     
<figcaption class="caption" ><span class="id">TableÂ 3: </span><span  
class="content"><span 
class="ec-lmss-12">portable </span>Stage Perches</span></figcaption><!--tex4ht:label?: x1-340013 -->
<div class="center" 
>
<!--l. 163--><p class="noindent" >
<div class="tabular"> <table id="TBL-4" class="tabular" 
rules="groups" 
><colgroup id="TBL-4-1g"><col 
id="TBL-4-1"></colgroup><colgroup id="TBL-4-2g"><col 
id="TBL-4-2"></colgroup><colgroup id="TBL-4-3g"><col 
id="TBL-4-3"></colgroup><colgroup id="TBL-4-4g"><col 
id="TBL-4-4"></colgroup><colgroup id="TBL-4-5g"><col 
id="TBL-4-5"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-4-1-"><td  style="text-align:right; white-space:nowrap;" id="TBL-4-1-1"  
class="td11">       Perch  </td>
                  <td  style="text-align:center; white-space:nowrap;" id="TBL-4-1-2"  
class="td11">                                 Indicator                                                     </td>
                                                                                                            <td  style="text-align:center; white-space:nowrap;" id="TBL-4-1-3"  
class="td11">                                   State                                                       </td>
                                                                                                                                                                                                      <td  style="text-align:center; white-space:nowrap;" id="TBL-4-1-4"  
class="td11">                                         value functions                                                                 </td>
                                                                                                                                                                                                                                                                                                                       <td  style="text-align:left; white-space:nowrap;" id="TBL-4-1-5"  
class="td11"> Explanation                                                                                                                                                                                                                                          </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-2-"><td  style="text-align:right; white-space:nowrap;" id="TBL-4-2-1"  
class="td11">      Arrival  </td>
                  <td  style="text-align:center; white-space:nowrap;" id="TBL-4-2-2"  
class="td11"> <!--l. 166--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel" stretchy="false">â‰º</mo></math> </td>
                                                                                                            <td  style="text-align:center; white-space:nowrap;" id="TBL-4-2-3"  
class="td11"> <!--l. 166--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>k</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover><mo 
class="MathClass-close" stretchy="false">)</mo></math>  </td>
                                                                                                                                                                                                      <td  style="text-align:center; white-space:nowrap;" id="TBL-4-2-4"  
class="td11">           <!--l. 166--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰º</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></math>          </td>
                                                                                                                                                                                                                                                                                                                       <td  style="text-align:left; white-space:nowrap;" id="TBL-4-2-5"  
class="td11"> no pre-decision shocks                                                                                                                                                                                                                             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-3-"><td  style="text-align:right; white-space:nowrap;" id="TBL-4-3-1"  
class="td11">   Decision(s)  </td><td  style="text-align:center; white-space:nowrap;" id="TBL-4-3-2"  
class="td11"> <!--l. 167--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></math> </td><td  style="text-align:center; white-space:nowrap;" id="TBL-4-3-3"  
class="td11"> <!--l. 167--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>k</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover><mo 
class="MathClass-close" stretchy="false">)</mo></math>  </td><td  style="text-align:center; white-space:nowrap;" id="TBL-4-3-4"  
class="td11"> depends on <!--l. 167--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover></math> (see above)  </td><td  style="text-align:left; white-space:nowrap;" id="TBL-4-3-5"  
class="td11"> choose <!--l. 167--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi></math> or use <!--l. 167--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover></math> </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-4-"><td  style="text-align:right; white-space:nowrap;" id="TBL-4-4-1"  
class="td11"> Continuation  </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-4-4-2"  
class="td11"> <!--l. 168--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel" stretchy="false">â‰»</mo></math> </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-4-4-3"  
class="td11"> <!--l. 168--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math> </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-4-4-4"  
class="td11">           <!--l. 168--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></math>          </td>
<td  style="text-align:left; white-space:nowrap;" id="TBL-4-4-5"  
class="td11"> post-shock value                                                                                                                                                                                                                                    </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-5-"><td  style="text-align:right; white-space:nowrap;" id="TBL-4-5-1"  
class="td11">             </td></tr></table>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   </div></div>
                                                                                     
                                                                                     
  
</figure>
</div>
<!--l. 173--><p class="noindent" >When <!--l. 173--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mo 
class="MathClass-rel" stretchy="false">âŠ¥</mo></math>, the Decision
value function is <!--l. 173--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo><munder><mrow 
><mo>max</mo> </mrow><mrow 
><mi 
>Ï‚</mi></mrow></munder 
><msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">[</mo><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-close" stretchy="false">]</mo></math>.
When <!--l. 173--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover> <mo 
class="MathClass-rel" stretchy="false">âˆˆ</mo> <mo 
class="MathClass-open" stretchy="false">[</mo><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">,</mo> <mn>1</mn><mo 
class="MathClass-close" stretchy="false">]</mo></math>, it
is <!--l. 173--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>ğ”¼</mi><mo 
class="MathClass-open" stretchy="false">[</mo><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-close" stretchy="false">]</mo></math> with
<!--l. 173--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi></math> ï¬xed
at <!--l. 173--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover></math>.
<!--l. 175--><p class="indent" >  <a 
 id="argument-notation"></a>
<a 
 id="paragraph*.4"></a>
<!--l. 176--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-35000"></a><span 
class="ec-lmbx-12">Argument notation.</span></span>
When a stage can be constructed with a ï¬xed parameter, we write the value of that argument in parentheses.
Thus <!--l. 176--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi><mo 
class="MathClass-open" stretchy="false">(</mo><mn>0</mn><mo 
class="MathClass-close" stretchy="false">)</mo></math> denotes the
<span 
class="ec-lmss-12">portable </span>stage with <!--l. 176--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>0</mn></math>
(the <span 
class="ec-lmss-12">shocks-only </span>conï¬guration described below), and
<!--l. 176--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi><mo 
class="MathClass-open" stretchy="false">(</mo><mo 
class="MathClass-rel" stretchy="false">âŠ¥</mo><mo 
class="MathClass-close" stretchy="false">)</mo></math>
denotes <span 
class="ec-lmss-12">portable </span>in optimize mode.
<!--l. 178--><p class="indent" >  <a 
 id="shocks-only-decomposition"></a>
  
<h5 class="subsubsectionHead"><span class="titlemark">9.2.4 </span> <a 
 id="x1-360009.2.4"></a>Separating Shocks from Choices</h5>
<!--l. 181--><p class="noindent" >The <span 
class="ec-lmss-12">cons-with-shocks </span>stage in sectionÂ <a 
href="#x1-60004.2">4.2<!--tex4ht:ref: subsec:prchs --></a> combines the
<!--l. 181--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi> <mo 
class="MathClass-rel" stretchy="false">â†’</mo> <mi 
>m</mi></math> shock realization
and the <!--l. 181--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi> <mo 
class="MathClass-rel" stretchy="false">â†’</mo> <mi 
>a</mi></math>
consumption decision. We split these into two stages.
<!--l. 183--><p class="indent" >  <a 
 id="paragraph*.5"></a>
<!--l. 183--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-37000"></a><span 
class="ec-lmbx-12">The </span><span 
class="ec-lmssbx-10x-x-120">shocks-only </span><span 
class="ec-lmbx-12">stage (</span><span 
class="ec-lmssbx-10x-x-120">portable </span><span 
class="ec-lmbx-12">with </span><!--l. 183--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>0</mn></math><span 
class="ec-lmbx-12">).</span></span>
Calling the <span 
class="ec-lmss-12">portable </span>stage with <!--l. 183--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>0</mn></math>
produces a stage whose only function is to draw the shocks. We call
this conï¬guration <span 
class="ec-lmss-12">shocks-only</span>. It handles the transition from capital
<!--l. 183--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi></math> to (post-shock)
market resources <!--l. 183--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math>:
with <!--l. 183--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>0</mn></math>, the transition
is <!--l. 183--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>â„›</mi><mi 
>k</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>ğœƒ</mi></math>â€”precisely
the <!--l. 183--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi> <mo 
class="MathClass-rel" stretchy="false">â†’</mo><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math>
mapping from the original problem (the next stage receives this as
<!--l. 183--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>). No
optimization occurs: <div class="table">
                                                                                     
                                                                                     
<!--l. 184--><p class="indent" >  <a 
 id="x1-370014"></a><figure class="float" 
>
                                                                                     
                                                                                     
<figcaption class="caption" ><span class="id">TableÂ 4: </span><span  
class="content"><span 
class="ec-lmss-12">shocks-only </span>(<span 
class="ec-lmss-12">portable </span>with <!--l. 184--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>0</mn></math>)
Stage Perches</span></figcaption><!--tex4ht:label?: x1-370014 -->
<div class="center" 
>
<!--l. 185--><p class="noindent" >
<div class="tabular"> <table id="TBL-5" class="tabular" 
rules="groups" 
><colgroup id="TBL-5-1g"><col 
id="TBL-5-1"></colgroup><colgroup id="TBL-5-2g"><col 
id="TBL-5-2"></colgroup><colgroup id="TBL-5-3g"><col 
id="TBL-5-3"></colgroup><colgroup id="TBL-5-4g"><col 
id="TBL-5-4"></colgroup><colgroup id="TBL-5-5g"><col 
id="TBL-5-5"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-5-1-"><td  style="text-align:right; white-space:nowrap;" id="TBL-5-1-1"  
class="td11">       Perch  </td>
                  <td  style="text-align:center; white-space:nowrap;" id="TBL-5-1-2"  
class="td11">                                 Indicator                                                     </td>
                                                                                                            <td  style="text-align:center; white-space:nowrap;" id="TBL-5-1-3"  
class="td11">                                   State                                                       </td>
                                                                                                                                                                                                      <td  style="text-align:center; white-space:nowrap;" id="TBL-5-1-4"  
class="td11">                               value functions                                                 </td>
                                                                                                                                                                                                                                                                                                <td  style="text-align:left; white-space:nowrap;" id="TBL-5-1-5"  
class="td11"> Explanation       </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-2-"><td  style="text-align:right; white-space:nowrap;" id="TBL-5-2-1"  
class="td11">      Arrival  </td>
                  <td  style="text-align:center; white-space:nowrap;" id="TBL-5-2-2"  
class="td11"> <!--l. 188--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel" stretchy="false">â‰º</mo></math> </td>
                                                                                                            <td  style="text-align:center; white-space:nowrap;" id="TBL-5-2-3"  
class="td11"> <!--l. 188--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi></math> </td>
                                                                                                                                                                                                      <td  style="text-align:center; white-space:nowrap;" id="TBL-5-2-4"  
class="td11"> <!--l. 188--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰º</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰º</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">[</mo><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-close" stretchy="false">]</mo></math>  </td>
                                                                                                                                                                                                                                                                                                <td  style="text-align:left; white-space:nowrap;" id="TBL-5-2-5"  
class="td11"> pre-shock value   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-3-"><td  style="text-align:right; white-space:nowrap;" id="TBL-5-3-1"  
class="td11">   Decision(s)  </td><td  style="text-align:center; white-space:nowrap;" id="TBL-5-3-2"  
class="td11"> <!--l. 189--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></math> </td><td  style="text-align:center; white-space:nowrap;" id="TBL-5-3-3"  
class="td11"> <!--l. 189--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi></math> </td><td  style="text-align:center; white-space:nowrap;" id="TBL-5-3-4"  
class="td11">                                   (none)                                                      </td><td  style="text-align:left; white-space:nowrap;" id="TBL-5-3-5"  
class="td11"> no choice           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-4-"><td  style="text-align:right; white-space:nowrap;" id="TBL-5-4-1"  
class="td11"> Continuation  </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-5-4-2"  
class="td11"> <!--l. 190--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel" stretchy="false">â‰»</mo></math> </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-5-4-3"  
class="td11"> <!--l. 190--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math> </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-5-4-4"  
class="td11"> <!--l. 190--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></math> </td>
<td  style="text-align:left; white-space:nowrap;" id="TBL-5-4-5"  
class="td11"> post-shock value  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-5-"><td  style="text-align:right; white-space:nowrap;" id="TBL-5-5-1"  
class="td11">             </td></tr></table>                                                                                                                                                                                                                                                                                                   </div></div>
                                                                                     
                                                                                     
  
</figure>
</div>
<!--l. 194--><p class="noindent" >The Arrival value function takes the expectation over the shocks:
<!--l. 194--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰º</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>k</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰º</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">[</mo><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>â„›</mi><mi 
>k</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>ğœƒ</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo></math>. The Continuation
state <!--l. 194--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mi 
>â„›</mi><mi 
>k</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>ğœƒ</mi></math>
is fully determined (non-stochastic) once the shocks are realized.
<!--l. 196--><p class="indent" >  <a 
 id="consumer-pre-problem"></a>
<a 
 id="paragraph*.6"></a>
<!--l. 197--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-38000"></a><span 
class="ec-lmbx-12">The shock-free consumption stage (</span><span 
class="ec-lmssbx-10x-x-120">cons-noshocks</span><span 
class="ec-lmbx-12">).</span></span>
<a 
 id="x1-38000doc"></a>  
With shocks in the preceding stage, the consumption stage has Arrival state
<!--l. 197--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math> and no shocks between
Arrival and Decision, so <!--l. 197--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰º</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></math>.
We call this the <span 
class="ec-lmss-12">cons-noshocks </span>stage (control-name
<!--l. 197--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></math>):
<div class="table">
                                                                                     
                                                                                     
<!--l. 199--><p class="indent" >  <a 
 id="x1-380015"></a><figure class="float" 
>
                                                                                     
                                                                                     
<figcaption class="caption" ><span class="id">TableÂ 5: </span><span  
class="content"><span 
class="ec-lmss-12">cons-noshocks </span>Stage Perches</span></figcaption><!--tex4ht:label?: x1-380015 -->
<div class="center" 
>
<!--l. 200--><p class="noindent" >
<div class="tabular"> <table id="TBL-6" class="tabular" 
rules="groups" 
><colgroup id="TBL-6-1g"><col 
id="TBL-6-1"></colgroup><colgroup id="TBL-6-2g"><col 
id="TBL-6-2"></colgroup><colgroup id="TBL-6-3g"><col 
id="TBL-6-3"></colgroup><colgroup id="TBL-6-4g"><col 
id="TBL-6-4"></colgroup><colgroup id="TBL-6-5g"><col 
id="TBL-6-5"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-6-1-"><td  style="text-align:right; white-space:nowrap;" id="TBL-6-1-1"  
class="td11">       Perch  </td>
                  <td  style="text-align:center; white-space:nowrap;" id="TBL-6-1-2"  
class="td11">                                 Indicator                                                     </td>
                                                                                                            <td  style="text-align:center; white-space:nowrap;" id="TBL-6-1-3"  
class="td11">                                   State                                                       </td>
                                                                                                                                                                                                      <td  style="text-align:center; white-space:nowrap;" id="TBL-6-1-4"  
class="td11">                               value functions                                                 </td>
                                                                                                                                                                                                                                                                                                <td  style="text-align:left; white-space:nowrap;" id="TBL-6-1-5"  
class="td11"> Explanation            </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-2-"><td  style="text-align:right; white-space:nowrap;" id="TBL-6-2-1"  
class="td11">      Arrival  </td>
                  <td  style="text-align:center; white-space:nowrap;" id="TBL-6-2-2"  
class="td11"> <!--l. 203--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel" stretchy="false">â‰º</mo></math> </td>
                                                                                                            <td  style="text-align:center; white-space:nowrap;" id="TBL-6-2-3"  
class="td11"> <!--l. 203--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math> </td>
                                                                                                                                                                                                      <td  style="text-align:center; white-space:nowrap;" id="TBL-6-2-4"  
class="td11"> <!--l. 203--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰º</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></math> </td>
                                                                                                                                                                                                                                                                                                <td  style="text-align:left; white-space:nowrap;" id="TBL-6-2-5"  
class="td11"> no shocks; identity   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-6-3-"><td  style="text-align:right; white-space:nowrap;" id="TBL-6-3-1"  
class="td11">   Decision(s)  </td><td  style="text-align:center; white-space:nowrap;" id="TBL-6-3-2"  
class="td11"> <!--l. 204--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></math> </td><td  style="text-align:center; white-space:nowrap;" id="TBL-6-3-3"  
class="td11"> <!--l. 204--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math> </td><td  style="text-align:center; white-space:nowrap;" id="TBL-6-3-4"  
class="td11"> <!--l. 204--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-rel" stretchy="false">=</mo><munder><mrow 
><mo>max</mo> </mrow><mrow 
><mi 
>c</mi></mrow></munder 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>  </td><td  style="text-align:left; white-space:nowrap;" id="TBL-6-3-5"  
class="td11"> choose consumption  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-6-4-"><td  style="text-align:right; white-space:nowrap;" id="TBL-6-4-1"  
class="td11"> Continuation  </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-6-4-2"  
class="td11"> <!--l. 205--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-rel" stretchy="false">â‰»</mo></math> </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-6-4-3"  
class="td11"> <!--l. 205--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math> </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-6-4-4"  
class="td11"> <!--l. 205--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="normal"><mi 
>v</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></math> </td>
<td  style="text-align:left; white-space:nowrap;" id="TBL-6-4-5"  
class="td11"> value at exit           </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-5-"><td  style="text-align:right; white-space:nowrap;" id="TBL-6-5-1"  
class="td11">             </td></tr></table>                                                                                                                                                                                                                                                                                                      </div></div>
                                                                                     
                                                                                     
  
</figure>
</div>
<!--l. 210--><p class="indent" >  The Decision equation for this stage deï¬nes the consumption function: <table class="equation"><tr><td>
<!--l. 1--><p class="indent" >
<!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-38002r55"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-punc" stretchy="false">,</mo><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><munder><mrow 
><mo>arg max</mo> </mrow><mrow 
><mi 
>c</mi></mrow></munder 
><mspace width="0.33em" class="nbsp" /><mspace width="0.33em" class="nbsp" /><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>c</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">+</mo><msub><mrow 
> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-punc" stretchy="false">,</mo><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><munder><mrow 
><munder accentunder="false"><mrow><mi 
>m</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>c</mi></mrow><mo>âŸ</mo></munder></mrow><mrow 
><mi 
>a</mi></mrow></munder 
><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(55)</td></tr></table>
<!--l. 220--><p class="indent" >  The Decision is unchanged from the single-stage formulation. But this stage is a
â€™stubâ€™: It could not be the only stage in a period because its continuation state
<!--l. 220--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math> is of a diï¬€erent type
than its arrival state <!--l. 220--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>.
A full period would require it to be paired with another stage that produced the transition
from <!--l. 220--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>
to <!--l. 220--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>.
<a 
 id="paragraph*.7"></a>
<!--l. 222--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-39000"></a><span 
class="ec-lmbx-12">The three-stage period.</span></span>
The consumption-only period from sectionsÂ <a 
href="#x1-20002">2<!--tex4ht:ref: sec:the-problem --></a>â€“<a 
href="#x1-130006">6<!--tex4ht:ref: sec:solving-the-next --></a> is deï¬ned by the stage list
<!--l. 222--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">[</mo><mstyle 
class="text"><mtext class="textsf" mathvariant="sans-serif" >shocks-only</mtext></mstyle><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><mstyle mathvariant="monospace"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><mstyle 
class="text"><mtext class="textsf" mathvariant="sans-serif" >cons-noshocks</mtext></mstyle><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><mstyle 
class="text"><mtext class="textsf" mathvariant="sans-serif" >disc</mtext></mstyle><mo 
class="MathClass-close" stretchy="false">]</mo></math>, or equivalently
<!--l. 222--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>Ï‚</mi><mo 
class="MathClass-open" stretchy="false">(</mo><mn>0</mn><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><mstyle mathvariant="monospace"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><mi 
>Î²</mi><mo 
class="MathClass-close" stretchy="false">]</mo></math> in control-name
form (recall <!--l. 222--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi><mo 
class="MathClass-open" stretchy="false">(</mo><mn>0</mn><mo 
class="MathClass-close" stretchy="false">)</mo></math> denotes
<span 
class="ec-lmss-12">portable </span>with <!--l. 222--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>0</mn></math>;
see sectionÂ <a 
href="#x1-340009.2.3">9.2.3<!--tex4ht:ref: subsubsec:portable --></a>). Explicitly:
<div class="center" 
>
<!--l. 223--><p class="noindent" >
<div class="tabular"> <table id="TBL-7" class="tabular" 
rules="groups" 
><colgroup id="TBL-7-1g"><col 
id="TBL-7-1"></colgroup><colgroup id="TBL-7-2g"><col 
id="TBL-7-2"></colgroup><colgroup id="TBL-7-3g"><col 
id="TBL-7-3"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-7-1-"><td  style="text-align:left; white-space:nowrap;" id="TBL-7-1-1"  
class="td11"> Element                                                                                                        </td>
                                                                                          <td  style="text-align:center; white-space:nowrap;" id="TBL-7-1-2"  
class="td11">                                 Transition                                                    </td>
                                                                                                                                                                                    <td  style="text-align:left; white-space:nowrap;" id="TBL-7-1-3"  
class="td11"> Action                                                                                                                     </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-2-"><td  style="text-align:left; white-space:nowrap;" id="TBL-7-2-1"  
class="td11"> <span 
class="ec-lmss-12">shocks-only                                                                                                      </span></td>
                                                                                          <td  style="text-align:center; white-space:nowrap;" id="TBL-7-2-2"  
class="td11"> <!--l. 226--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi> <mo 
class="MathClass-rel" stretchy="false">â†’</mo><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math> </td>
                                                                                                                                                                                    <td  style="text-align:left; white-space:nowrap;" id="TBL-7-2-3"  
class="td11"> shocks realize (no choice)                                                                                            </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-7-3-"><td  style="text-align:left; white-space:nowrap;" id="TBL-7-3-1"  
class="td11"> <!--l. 227--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>  </td><td  style="text-align:center; white-space:nowrap;" id="TBL-7-3-2"  
class="td11"> <!--l. 227--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover> <mo 
class="MathClass-rel" stretchy="false">â†’</mo> <mi 
>m</mi></math> </td><td  style="text-align:left; white-space:nowrap;" id="TBL-7-3-3"  
class="td11"> rename                                                                                                                    </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-7-4-"><td  style="text-align:left; white-space:nowrap;" id="TBL-7-4-1"  
class="td11"> <span 
class="ec-lmss-12">cons-noshocks                                                                                                  </span></td><td  style="text-align:center; white-space:nowrap;" id="TBL-7-4-2"  
class="td11"> <!--l. 228--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi> <mo 
class="MathClass-rel" stretchy="false">â†’</mo> <mi 
>a</mi></math> </td><td  style="text-align:left; white-space:nowrap;" id="TBL-7-4-3"  
class="td11"> choose <!--l. 228--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math> </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-7-5-"><td  style="text-align:left; white-space:nowrap;" id="TBL-7-5-1"  
class="td11"> <span 
class="ec-lmss-12">disc                                                                                                               </span></td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-7-5-2"  
class="td11">                                                                           </td>
<td  style="text-align:left; white-space:nowrap;" id="TBL-7-5-3"  
class="td11"> apply <!--l. 229--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Î²</mi></math>  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-7-6-"><td  style="text-align:left; white-space:nowrap;" id="TBL-7-6-1"  
class="td11">                                                                           </td></tr></table>                                                                                                                                                                                           </div></div>
<!--l. 232--><p class="noindent" >This is functionally identical to the single-stage formulation. Each stage resolves its stochastic
content <span 
class="ec-lmri-12">internally</span>; the value at a stageâ€™s exit is therefore non-stochastic.
                                                                                     
                                                                                     
<!--l. 234--><p class="indent" >  <a 
 id="paragraph*.8"></a>
<!--l. 234--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-40000"></a><span 
class="ec-lmbx-12">Multi-stage notation.</span></span>
Once our Pile <!--l. 234--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>P</mi></mstyle></math>
has accumulated multiple periods and stages, we address any perch-speciï¬c object (like a value
function) by comma-separated subscripts, ordered from outermost to innermostâ€”period,
stage, perch:  <div class="equation-star">
<!--tex4ht:inline--><!--l. 235--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" ><msub><mrow 
>
                                       <mstyle mathvariant="normal">
                                       <mi 
>v</mi></mstyle>
                                        </mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mi 
>Ï‚</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow></msub 
>
                                           <mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">.</mo>
</math>
<!--l. 237--><p class="nopar" > </div> We drop the period when considering a stage from a context inside a period
(<!--l. 238--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mi 
>Ï‚</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mo 
class="MathClass-rel" stretchy="false">â‰»</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>).
<!--l. 240--><p class="indent" >  <a 
 id="three-period-types"></a>
  
<h5 class="subsubsectionHead"><span class="titlemark">9.2.5 </span> <a 
 id="x1-410009.2.5"></a>Three Period Types</h5>
<!--l. 243--><p class="noindent" >Using the <span 
class="ec-lmss-12">portable </span>stage (with <!--l. 243--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>0</mn></math>
or <!--l. 243--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-rel" stretchy="false">âŠ¥</mo></math>),
the <span 
class="ec-lmss-12">cons-noshocks </span>stage, and the <span 
class="ec-lmss-12">disc </span>stage at the end of every period, we can construct three
kinds of periods. A period type is deï¬ned by its stage list (sectionÂ <a 
href="#x1-40004">4<!--tex4ht:ref: sec:notation --></a>), written in square
brackets:
<div class="table">
                                                                                     
                                                                                     
<!--l. 245--><p class="indent" >  <a 
 id="x1-410016"></a><figure class="float" 
>
                                                                                     
                                                                                     
<figcaption class="caption" ><span class="id">TableÂ 6: </span><span  
class="content">Three Period Types</span></figcaption><!--tex4ht:label?: x1-410016 -->
<div class="center" 
>
<!--l. 246--><p class="noindent" >
<div class="tabular"> <table id="TBL-8" class="tabular" 
rules="groups" 
><colgroup id="TBL-8-1g"><col 
id="TBL-8-1"></colgroup><colgroup id="TBL-8-2g"><col 
id="TBL-8-2"></colgroup><colgroup id="TBL-8-3g"><col 
id="TBL-8-3"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-8-1-"><td  style="text-align:left; white-space:nowrap;" id="TBL-8-1-1"  
class="td11"> Period type                  </td>
                             <td  style="text-align:center; white-space:nowrap;" id="TBL-8-1-2"  
class="td11">                                 Transition                                                    </td>
                                                                                                                       <td  style="text-align:left; white-space:nowrap;" id="TBL-8-1-3"  
class="td11"> Description                       </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-8-2-"><td  style="text-align:left; white-space:nowrap;" id="TBL-8-2-1"  
class="td11"> shocksonlyâ€“consnoshocks  </td>
                             <td  style="text-align:center; white-space:nowrap;" id="TBL-8-2-2"  
class="td11"> <!--l. 249--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi> <mo 
class="MathClass-rel" stretchy="false">â†’</mo> <mi 
>a</mi></math> </td>
                                                                                                                       <td  style="text-align:left; white-space:nowrap;" id="TBL-8-2-3"  
class="td11"> No portfolio choice             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-8-3-"><td  style="text-align:left; white-space:nowrap;" id="TBL-8-3-1"  
class="td11"> portableâ€“consnoshocks     </td><td  style="text-align:center; white-space:nowrap;" id="TBL-8-3-2"  
class="td11"> <!--l. 250--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi> <mo 
class="MathClass-rel" stretchy="false">â†’</mo> <mi 
>a</mi></math> </td><td  style="text-align:left; white-space:nowrap;" id="TBL-8-3-3"  
class="td11"> Beginning-of-period returns  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-8-4-"><td  style="text-align:left; white-space:nowrap;" id="TBL-8-4-1"  
class="td11"> consnoshocksâ€“portable     </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-8-4-2"  
class="td11"> <!--l. 251--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi> <mo 
class="MathClass-rel" stretchy="false">â†’</mo><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math> </td>
<td  style="text-align:left; white-space:nowrap;" id="TBL-8-4-3"  
class="td11"> End-of-period returns         </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-8-5-"><td  style="text-align:left; white-space:nowrap;" id="TBL-8-5-1"  
class="td11">                       </td></tr></table>                                                                                                                          </div></div>
                                                                                     
                                                                                     
  
</figure>
</div>
<!--l. 256--><p class="indent" >  We now describe these three variants in detail. We present the consnoshocksâ€“portable
(end-of-period returns) variant ï¬rst, because it makes the need for the
<!--l. 256--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math>
notation most transparent.
<!--l. 258--><p class="indent" >  <a 
 id="ending-returns"></a>
<a 
 id="paragraph*.9"></a>
<!--l. 259--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-42000"></a><span 
class="ec-lmbx-12">The consnoshocksâ€“portable period (end-of-period returns).</span></span>
<a 
 id="x1-42000doc"></a>  
If the portfolio share choice is made and stochastic shocks are realized at
the <span 
class="ec-lmri-12">end </span>of the period, the shock-free consumption stage comes ï¬rst and the
<!--l. 261--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi></math> stage follows: stage
list by control-name <!--l. 261--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">[</mo><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><mstyle mathvariant="monospace"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>k</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><mi 
>Ï‚</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><mi 
>Î²</mi><mo 
class="MathClass-close" stretchy="false">]</mo></math>.
The ï¬‚ow is:
<div class="center" 
>
<!--l. 262--><p class="noindent" >
<div class="tabular"> <table id="TBL-9" class="tabular" 
rules="groups" 
><colgroup id="TBL-9-1g"><col 
id="TBL-9-1"></colgroup><colgroup id="TBL-9-2g"><col 
id="TBL-9-2"></colgroup><colgroup id="TBL-9-3g"><col 
id="TBL-9-3"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-9-1-"><td  style="text-align:left; white-space:nowrap;" id="TBL-9-1-1"  
class="td11"> Element                                                                                                        </td>
                                                                                          <td  style="text-align:center; white-space:nowrap;" id="TBL-9-1-2"  
class="td11">                                 Transition                                                    </td>
                                                                                                                                                                                    <td  style="text-align:left; white-space:nowrap;" id="TBL-9-1-3"  
class="td11"> Action                                                                                                                                        </td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-9-2-"><td  style="text-align:left; white-space:nowrap;" id="TBL-9-2-1"  
class="td11"> <span 
class="ec-lmss-12">cons-noshocks </span></td>
                                                                                          <td  style="text-align:center; white-space:nowrap;" id="TBL-9-2-2"  
class="td11"> <!--l. 265--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi> <mo 
class="MathClass-rel" stretchy="false">â†’</mo> <mi 
>a</mi></math> </td>
                                                                                                                                                                                    <td  style="text-align:left; white-space:nowrap;" id="TBL-9-2-3"  
class="td11"> choose <!--l. 265--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math>                  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-9-3-"><td  style="text-align:left; white-space:nowrap;" id="TBL-9-3-1"  
class="td11"> <!--l. 266--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>k</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>  </td><td  style="text-align:center; white-space:nowrap;" id="TBL-9-3-2"  
class="td11"> <!--l. 266--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi> <mo 
class="MathClass-rel" stretchy="false">â†’</mo> <mi 
>k</mi></math> </td><td  style="text-align:left; white-space:nowrap;" id="TBL-9-3-3"  
class="td11"> rename                                                                                                                                        </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-9-4-"><td  style="text-align:left; white-space:nowrap;" id="TBL-9-4-1"  
class="td11"> <span 
class="ec-lmss-12">portable                                                                                                          </span></td><td  style="text-align:center; white-space:nowrap;" id="TBL-9-4-2"  
class="td11"> <!--l. 267--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi> <mo 
class="MathClass-rel" stretchy="false">â†’</mo><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math> </td><td  style="text-align:left; white-space:nowrap;" id="TBL-9-4-3"  
class="td11"> choose <!--l. 267--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi></math>, shocks realize  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-9-5-"><td  style="text-align:left; white-space:nowrap;" id="TBL-9-5-1"  
class="td11"> <span 
class="ec-lmss-12">disc                                                                                                               </span></td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-9-5-2"  
class="td11">                                                                           </td>
<td  style="text-align:left; white-space:nowrap;" id="TBL-9-5-3"  
class="td11"> apply <!--l. 268--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Î²</mi></math>                   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-9-6-"><td  style="text-align:left; white-space:nowrap;" id="TBL-9-6-1"  
class="td11">                                                                           </td></tr></table>                                                                                                                                                                                                          </div></div>
<!--l. 272--><p class="indent" >  The within-period Connector <!--l. 272--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>k</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
relabels the consumption stageâ€™s output as the
<!--l. 272--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi></math> stageâ€™s
input; the remaining Connectors are catalogued in sectionÂ <a 
href="#x1-450009.2.6">9.2.6<!--tex4ht:ref: subsubsec:connectors --></a>. The reason we used
<!--l. 272--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math> rather
than <!--l. 272--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>
for the post-portfolio state now becomes evident: this prevents two diï¬€erent values of
<!--l. 272--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math> from coexisting within the
same period. The <!--l. 272--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ë‡</mi></math> decoration
is appropriate because <!--l. 272--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math>
remains m-typeâ€”it is market resources, diï¬€ering from
<!--l. 272--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math> only
in timing.
<!--l. 274--><p class="indent" >  <a 
 id="beginning-returns"></a>
<a 
 id="paragraph*.10"></a>
<!--l. 275--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-43000"></a><span 
class="ec-lmbx-12">The portableâ€“consnoshocks period (beginning-of-period returns).</span></span>
<a 
 id="x1-43000doc"></a>  
The beginning-returns problem places the
                                                                                     
                                                                                     
<!--l. 277--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi></math>
stage <span 
class="ec-lmri-12">before </span>the shock-free consumption stage: stage list by control-name
<!--l. 277--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>Ï‚</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><mstyle mathvariant="monospace"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><mi 
>Î²</mi><mo 
class="MathClass-close" stretchy="false">]</mo></math>. The
ï¬rst-order condition for the portfolio-choice stage isÂ (<a 
href="#x1-33001r53">53<!--tex4ht:ref: eq:FOCport --></a>).
<!--l. 279--><p class="indent" >  The ï¬‚ow through a single period is:
<div class="center" 
>
<!--l. 280--><p class="noindent" >
<div class="tabular"> <table id="TBL-10" class="tabular" 
rules="groups" 
><colgroup id="TBL-10-1g"><col 
id="TBL-10-1"></colgroup><colgroup id="TBL-10-2g"><col 
id="TBL-10-2"></colgroup><colgroup id="TBL-10-3g"><col 
id="TBL-10-3"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-10-1-"><td  style="text-align:left; white-space:nowrap;" id="TBL-10-1-1"  
class="td11"> Element                                                                                                        </td>
                                                                                          <td  style="text-align:center; white-space:nowrap;" id="TBL-10-1-2"  
class="td11">                                 Transition                                                    </td>
                                                                                                                                                                                    <td  style="text-align:left; white-space:nowrap;" id="TBL-10-1-3"  
class="td11"> Action                                                                                                                                        </td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-10-2-"><td  style="text-align:left; white-space:nowrap;" id="TBL-10-2-1"  
class="td11"> <span 
class="ec-lmss-12">portable </span></td>
                                                                                          <td  style="text-align:center; white-space:nowrap;" id="TBL-10-2-2"  
class="td11"> <!--l. 283--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi> <mo 
class="MathClass-rel" stretchy="false">â†’</mo><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math> </td>
                                                                                                                                                                                    <td  style="text-align:left; white-space:nowrap;" id="TBL-10-2-3"  
class="td11"> choose <!--l. 283--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi></math>, shocks realize  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-10-3-"><td  style="text-align:left; white-space:nowrap;" id="TBL-10-3-1"  
class="td11"> <!--l. 284--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>  </td><td  style="text-align:center; white-space:nowrap;" id="TBL-10-3-2"  
class="td11"> <!--l. 284--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover> <mo 
class="MathClass-rel" stretchy="false">â†’</mo> <mi 
>m</mi></math> </td><td  style="text-align:left; white-space:nowrap;" id="TBL-10-3-3"  
class="td11"> rename                                                                                                                                        </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-10-4-"><td  style="text-align:left; white-space:nowrap;" id="TBL-10-4-1"  
class="td11"> <span 
class="ec-lmss-12">cons-noshocks                                                                                                  </span></td><td  style="text-align:center; white-space:nowrap;" id="TBL-10-4-2"  
class="td11"> <!--l. 285--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi> <mo 
class="MathClass-rel" stretchy="false">â†’</mo> <mi 
>a</mi></math> </td><td  style="text-align:left; white-space:nowrap;" id="TBL-10-4-3"  
class="td11"> choose <!--l. 285--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>c</mi></math>                  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-10-5-"><td  style="text-align:left; white-space:nowrap;" id="TBL-10-5-1"  
class="td11"> <span 
class="ec-lmss-12">disc                                                                                                               </span></td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-10-5-2"  
class="td11">                                                                           </td>
<td  style="text-align:left; white-space:nowrap;" id="TBL-10-5-3"  
class="td11"> apply <!--l. 286--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Î²</mi></math>                   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-10-6-"><td  style="text-align:left; white-space:nowrap;" id="TBL-10-6-1"  
class="td11">                                                                           </td></tr></table>                                                                                                                                                                                                          </div></div>
<!--l. 290--><p class="indent" >  Since all stochastic shocks are realized <span 
class="ec-lmri-12">inside </span>the
<!--l. 290--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi></math> stage, the
value <!--l. 290--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math>
that exits it is fully determined. The within-period Connector
<!--l. 290--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math> therefore
simply relabels <!--l. 290--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math>
as <!--l. 290--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math> for
the consumption stage (see sectionÂ <a 
href="#x1-450009.2.6">9.2.6<!--tex4ht:ref: subsubsec:connectors --></a> for the full catalogue).
<!--l. 292--><p class="indent" >  <a 
 id="paragraph*.11"></a>
<!--l. 292--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-44000"></a><span 
class="ec-lmbx-12">The shocksonlyâ€“consnoshocks period.</span></span>
This is the three-stage decomposition from above:
<!--l. 293--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">[</mo><mi 
>Ï‚</mi><mo 
class="MathClass-open" stretchy="false">(</mo><mn>0</mn><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><mstyle mathvariant="monospace"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-punc" stretchy="false">,</mo><mspace width="0.17em" class="thinspace"/><mi 
>Î²</mi><mo 
class="MathClass-close" stretchy="false">]</mo></math>.
A life cycle model in which portfolio choice is available at some ages
but not others is now trivially constructed: the modeler simply sets
<!--l. 293--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mo 
class="MathClass-rel" stretchy="false">âŠ¥</mo></math> for ages with active
portfolio choice and <!--l. 293--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">Â¯</mo></mover> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>0</mn></math>
for ages without.
<!--l. 295--><p class="indent" >  <a 
 id="connectors"></a>
  
<h5 class="subsubsectionHead"><span class="titlemark">9.2.6 </span> <a 
 id="x1-450009.2.6"></a>Connectors for Each Period Type</h5>
<!--l. 298--><p class="noindent" >To construct a Pile <!--l. 298--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>P</mi></mstyle></math>
that repeats instances of a given period type, the backward builder
<!--l. 298--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="monospace"><mi 
>B</mi></mstyle><mo 
class="MathClass-rel" stretchy="false">â†</mo>
<mstyle mathvariant="normal"> <mi 
>p</mi><mi 
>r</mi><mi 
>d</mi></mstyle></math> must
know the <span 
class="ec-lmri-12">between-period </span>Connector that ties the last stage of one period to the ï¬rst stage of
the next (see sectionÂ <a 
href="#x1-70004.3">4.3<!--tex4ht:ref: subsec:transitions --></a>). Within-period Connectors are already speciï¬ed in the period tables
above.
                                                                                     
                                                                                     
<div class="center" 
>
<!--l. 300--><p class="noindent" >
<div class="tabular"> <table id="TBL-11" class="tabular" 
rules="groups" 
><colgroup id="TBL-11-1g"><col 
id="TBL-11-1"></colgroup><colgroup id="TBL-11-2g"><col 
id="TBL-11-2"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-11-1-"><td  style="text-align:left; white-space:nowrap;" id="TBL-11-1-1"  
class="td11"> period type                  </td>
                             <td  style="text-align:left; white-space:nowrap;" id="TBL-11-1-2"  
class="td11"> Between-period Connector                                                                                 </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-11-2-"><td  style="text-align:left; white-space:nowrap;" id="TBL-11-2-1"  
class="td11"> shocksonlyâ€“consnoshocks  </td>
                             <td  style="text-align:left; white-space:nowrap;" id="TBL-11-2-2"  
class="td11"> <!--l. 303--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
mathvariant="script"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>k</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-11-3-"><td  style="text-align:left; white-space:nowrap;" id="TBL-11-3-1"  
class="td11"> portableâ€“consnoshocks     </td><td  style="text-align:left; white-space:nowrap;" id="TBL-11-3-2"  
class="td11"> <!--l. 304--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
mathvariant="script"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>k</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-11-4-"><td  style="text-align:left; white-space:nowrap;" id="TBL-11-4-1"  
class="td11"> consnoshocksâ€“portable     </td>
<td  style="text-align:left; white-space:nowrap;" id="TBL-11-4-2"  
class="td11"> <!--l. 305--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
mathvariant="script"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-11-5-"><td  style="text-align:left; white-space:nowrap;" id="TBL-11-5-1"  
class="td11">                       </td></tr></table>                                                                                          </div></div>
<!--l. 309--><p class="indent" >  Each of these Connectors is a pure rename that respects the state-variable type constraint from
sectionÂ <a 
href="#x1-70004.3">4.3<!--tex4ht:ref: subsec:transitions --></a>: <!--l. 309--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math> and
<!--l. 309--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi></math> are both k-type (capital
before returns), while <!--l. 309--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math>
and <!--l. 309--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>
are both m-type (market resources after returns). The connector is determined
by the predecessorâ€™s exit state and the successorâ€™s ï¬rst-stage arrival state. For
portableâ€“consnoshocks, the period ends after disc (passthrough), so the exit state is
<!--l. 309--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>; the next periodâ€™s portable
stage arrives with <!--l. 309--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi></math>,
hence <!--l. 309--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
mathvariant="script"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>k</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>.
For shocksonlyâ€“consnoshocks the same logic gives
<!--l. 309--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
mathvariant="script"><mi 
>C</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi> <mo 
class="MathClass-rel" stretchy="false">â†”</mo> <mi 
>k</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>. For consnoshocksâ€“portable,
the period exits with <!--l. 309--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>m</mi></mrow><mo accent="true">Ë‡</mo></mover></math>; the
Connector relabels it as <!--l. 309--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi></math>
for the next periodâ€™s cons-noshocks stage.
<!--l. 311--><p class="indent" >  <a 
 id="numerical-solution"></a>
  
<h5 class="subsubsectionHead"><span class="titlemark">9.2.7 </span> <a 
 id="x1-460009.2.7"></a>Numerical Solution</h5>
<!--l. 313--><p class="noindent" >Following the sequential approach outlined in sectionÂ <a 
href="#x1-300009.1">9.1<!--tex4ht:ref: subsec:JointProblem --></a>, we solve the portfolio stage numerically for
the optimal <!--l. 313--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï‚</mi></math>
at a vector of <!--l. 313--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>k</mi></mstyle><!--/binary math rel, tripple hight--></math>
and construct an approximated optimal portfolio share function
<!--l. 313--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Ï‚</mi></mrow><mo accent="true">`</mo></mover><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>k</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
as the interpolating function among the members of the
<!--l. 313--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">{</mo><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>k</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-punc" stretchy="false">,</mo><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>Ï‚</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-close" stretchy="false">}</mo></math>
mapping. Having done this, we calculate a vector of values and marginal values at that grid:
<table class="equation"><tr><td>
<!--l. 314--><p class="indent" >
                                                                                     
                                                                                     
<!--l. 314--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-46001r56"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>v</mi></mstyle><!--/binary math rel, tripple hight--></mtd>
  <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msub><mrow 
> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mi 
>Ï‚</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mo 
class="MathClass-rel" stretchy="false">â‰º</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>k</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
              <mtd columnalign="right" ></mtd>
</mtr><mtr 
><mtd columnalign="right" ><!--binary math rel, tripple hight--><msup><mrow 
><mstyle mathvariant="monospace"><mi 
>v</mi></mstyle><!--/binary math rel, tripple hight--></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msubsup><mrow 
> <mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
>
<mi 
>Ï‚</mi><mo 
class="MathClass-punc" stretchy="false">,</mo><mo 
class="MathClass-rel" stretchy="false">â‰º</mo></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msubsup 
><mo 
class="MathClass-open" stretchy="false">(</mo><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>k</mi></mstyle><!--/binary math rel, tripple hight--><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(56)</td></tr></table>
<!--l. 320--><p class="indent" >  With the <!--l. 320--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><!--binary math rel, tripple hight--><msup><mrow 
><mstyle mathvariant="monospace"><mi 
>v</mi></mstyle><!--/binary math rel, tripple hight--></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
></math>
approximation in hand, we construct our approximation to the consumption function using
<span 
class="ec-lmri-12">exactly the same EGM procedure </span>that we used in solving the problem <span 
class="ec-lmri-12">without </span>a portfolio
choice (see (<a 
href="#x1-20004r37">37<!--tex4ht:ref: eq:cGoth --></a>)): <table class="equation"><tr><td>
<!--l. 321--><p class="indent" >
<!--l. 321--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-46002r57"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><!--binary math rel, tripple hight--><mstyle mathvariant="monospace"><mi 
>c</mi></mstyle><!--/binary math rel, tripple hight--></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">â‰¡</mo><msup><mrow 
><mrow><mo fence="true" form="prefix"> (</mo><mrow><!--binary math rel, tripple hight--><msup><mrow 
><mstyle mathvariant="monospace"><mi 
>v</mi></mstyle><!--/binary math rel, tripple hight--></mrow><mrow 
><mi 
>âˆ‚</mi></mrow></msup 
></mrow><mo fence="true" form="postfix">)</mo></mrow> </mrow><mrow 
><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mi 
>Ï</mi></mrow></msup 
><mo 
class="MathClass-punc" stretchy="false">,</mo></mtd>
  
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(57)</td></tr></table>
<!--l. 325--><p class="indent" >  which, following the procedure in subsectionÂ <a 
href="#x1-220006.9">6.9<!--tex4ht:ref: subsec:egm --></a>, yields an approximated consumption function
<!--l. 325--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mo accent="true">`</mo></mover></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>.
<!--l. 348--><p class="indent" >  <a 
 id="implementation"></a>
  
<h4 class="subsectionHead"><span class="titlemark">9.3 </span> <a 
 id="x1-470009.3"></a>Implementation</h4>
<!--l. 351--><p class="noindent" >Following the discussion from sectionÂ <a 
href="#x1-300009.1">9.1<!--tex4ht:ref: subsec:JointProblem --></a>, to provide a numerical solution to the problem with
multiple control variables, we must deï¬ne expressions that capture the expected marginal
value of end-of-period assets with respect to the level of assets and the share invested in risky
assets. This is addressed in â€œMultiple Control Variables.â€
<!--l. 355--><p class="indent" >  <a 
 id="results-with-multiple-controls"></a>
  
<h4 class="subsectionHead"><span class="titlemark">9.4 </span> <a 
 id="x1-480009.4"></a>Results With Multiple Controls</h4>
<!--l. 358--><p class="noindent" >FigureÂ <a 
href="#x1-4800116">16<!--tex4ht:ref: fig:PlotctMultContr --></a> plots the <!--l. 358--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mn>1</mn></math>
consumption function generated by the program; qualitatively it does not look much
diï¬€erent from the consumption functions generated by the program without portfolio
choice.
<!--l. 360--><p class="indent" >  But FigureÂ <a 
href="#x1-4800217">17<!--tex4ht:ref: fig:PlotRiskySharetOfat --></a> which plots the optimal portfolio share as a function of the level
of assets, exhibits several interesting features. First, even with a coeï¬ƒcient of
relative risk aversion of 6, an equity premium of only 4 percent, and an annual
                                                                                     
                                                                                     
standard deviation in equity returns of 15 percent, the optimal choice at values of
<!--l. 360--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math>
less than about 2 is for the agent to invest a proportion 1 (100 percent) of
the portfolio in stocks (instead of the safe bank account with riskless return
<!--l. 360--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle></math>).
Second, the proportion of the portfolio kept in stocks is <span 
class="ec-lmri-12">declining </span>in the level of wealth - i.e.,
the poor should hold all of their meager assets in stocks, while the rich should be cautious,
holding more of their wealth in safe bank deposits and less in stocks. This seemingly bizarre
(and highly counterfactual â€“ see <a 
href="#Xcarroll:richportfolios">Carroll</a>Â (<a 
href="#Xcarroll:richportfolios">2002</a>)) prediction reï¬‚ects the nature of the risks
the consumer faces. Those consumers who are poor in measured ï¬nancial wealth
will likely derive a high proportion of future consumption from their labor income.
Since by assumption labor income risk is uncorrelated with rate-of-return risk, the
covariance between their future consumption and future stock returns is relatively
low. By contrast, persons with relatively large wealth will be paying for a large
proportion of future consumption out of that wealth, and hence if they invest too much
of it in stocks their consumption will have a high covariance with stock returns.
Consequently, they reduce that correlation by holding some of their wealth in the riskless
form.
<!--l. 362--><p class="indent" >  <a 
 id="PlotctMultContr"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-4800116"></a>
                                                                                     
                                                                                     
<!--l. 364--><p class="noindent" ><img 
src="./Figures/PlotctMultContr.png" alt="PIC"  
width="433" height="325" >
<figcaption class="caption" ><span class="id">FigureÂ 16:
</span><span  
class="content"><!--l. 365--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>m</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math>
With Portfolio Choice</span></figcaption><!--tex4ht:label?: x1-4800116 -->
                                                                                     
                                                                                     
<!--l. 367--><p class="indent" >  </figure>
<!--l. 369--><p class="indent" >  <a 
 id="PlotRiskySharetOfat"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-4800217"></a>
                                                                                     
                                                                                     
<!--l. 371--><p class="noindent" ><img 
src="./Figures/PlotRiskySharetOfat.png" alt="PIC"  
width="433" height="325" >
<figcaption class="caption" ><span class="id">FigureÂ 17:             </span><span  
class="content">Portfolio             Share             in             Risky             Assets
<!--l. 372--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>Ï‚</mi></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>a</mi><mo 
class="MathClass-close" stretchy="false">)</mo></math></span></figcaption><!--tex4ht:label?: x1-4800217 -->
                                                                                     
                                                                                     
<!--l. 374--><p class="indent" >  </figure>
<!--l. 6--><p class="indent" >  <a 
 id="structural-estimation"></a>
  
<h3 class="sectionHead"><span class="titlemark">10 </span> <a 
 id="x1-4900010"></a>Structural Estimation</h3>
<!--l. 10--><p class="noindent" >This section describes how to use the methods developed above to structurally
estimate a life-cycle consumption model, following closely the work of
<a 
href="#XcagettiWprofiles">Cagetti</a>Â (<a 
href="#XcagettiWprofiles">2003</a>).<span class="footnote-mark"><a 
href="SolvingMicroDSOPs16.html#fn15x0"><sup class="textsuperscript">15</sup></a></span><a 
 id="x1-49001f15"></a>
     
The key idea of structural estimation is to look for the parameter values (for the time
preference rate, relative risk aversion, or other parameters) which lead to the best possible
match between simulated and empirical moments.
<!--l. 21--><p class="indent" >  <a 
 id="life-cycle-model"></a>
  
<h4 class="subsectionHead"><span class="titlemark">10.1 </span> <a 
 id="x1-5000010.1"></a>Life Cycle Model</h4>
<!--l. 26--><p class="noindent" >Realistic calibration of a life cycle model needs to take into account a few things that we
omitted from the bare-bones model described above. For example, the whole point of the life
cycle model is that life is ï¬nite, so we need to include a realistic treatment of life
expectancy; this is done easily enough, by assuming that utility accrues only if you live,
so eï¬€ectively the rising mortality rate with age is treated as an extra reason for
discounting the future. Similarly, we may want to capture the demographic evolution of
the household (e.g., arrival and departure of kids). A common way to handle that,
too, is by modifying the discount factor (arrival of a kid might increase the total
utility of the household by, say, 0.2, so if the â€˜pureâ€™ rate of time preference were
<!--l. 26--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>1</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>0</mn></math> the
â€˜household-size-adjustedâ€™ discount factor might be 1.2. We therefore modify the model presented
above to allow age-varying discount factors that capture both mortality and family-size changes (we
just adopt the factors used by <a 
href="#XcagettiWprofiles">Cagetti</a>Â (<a 
href="#XcagettiWprofiles">2003</a>) directly), with the probability of remaining alive
between <!--l. 26--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi></math>
and <!--l. 26--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>t</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>n</mi></math>
captured by <!--l. 26--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
mathvariant="script"><mi 
>L</mi></mstyle></math>
and with <!--l. 26--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Î²</mi></mrow><mo accent="true">^</mo></mover></math>
now reï¬‚ecting all the age-varying discount factor adjustments (mortality, family-size, etc). Using
<!--l. 26--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-ord">â„¶</mo></math> (the Hebrew
cognate of <!--l. 26--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Î²</mi></math>)
for the â€˜pureâ€™ time preference factor, the value function for the revised problem is <a 
 id="eq-lifecyclemax"></a>
<table class="equation"><tr><td>
<!--l. 1--><p class="indent" >
                                                                                     
                                                                                     
<!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-50001r58"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">,</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>m</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><munder><mrow 
><mo>max</mo> </mrow><mrow 
><msubsup><mrow 
><mo 
class="MathClass-open" stretchy="false">{</mo><mstyle mathvariant="normal"><mi 
>c</mi></mstyle><mo 
class="MathClass-close" stretchy="false">}</mo></mrow><mrow 
><mi 
>t</mi></mrow><mrow 
><mi 
>T</mi></mrow></msubsup 
></mrow></munder 
><mspace width="0.33em" class="nbsp" /><mspace width="0.33em" class="nbsp" /><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>c</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>ğ”¼</mi><mo 
class="MathClass-rel" stretchy="false">â‰»</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-close" stretchy="false">)</mo> <mrow><mo fence="true" form="prefix"> [</mo><mrow><munderover accentunder="false" accent="false"><mrow  
><mo  
>âˆ‘</mo>
  </mrow><mrow 
><mi 
>n</mi><mo 
class="MathClass-rel" stretchy="false">=</mo><mn>1</mn></mrow><mrow 
><mi 
>T</mi><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>t</mi></mrow></munderover 
><msup><mrow 
><mo 
class="MathClass-ord">â„¶</mo></mrow><mrow 
><mi 
>n</mi></mrow></msup 
><msubsup><mrow 
><mstyle 
mathvariant="script"><mi 
>L</mi></mstyle></mrow><mrow 
>
<mi 
>t</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mi 
>n</mi></mrow></msubsup 
><msubsup><mrow 
><mover 
accent="true"><mrow 
><mi 
>Î²</mi></mrow><mo accent="true">^</mo></mover></mrow><mrow 
>
<mi 
>t</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mi 
>n</mi></mrow></msubsup 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>c</mi></mstyle></mstyle></mrow><mrow 
>
<mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mi 
>n</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mo fence="true" form="postfix">]</mo></mrow></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(58)</td></tr></table>
<!--l. 36--><p class="indent" >  subject to the constraints  <div class="equation-star">
<!--tex4ht:inline--><!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" >
<mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>a</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mtd>
     <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msub><mrow 
> <mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>m</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>c</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mtd>
                   <mtd columnalign="right" ></mtd>
</mtr><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mtd>
     <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msub><mrow 
> <mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><msub><mrow 
><mi 
>Ïˆ</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mtd>
</mtr><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>y</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mtd> <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><msub><mrow 
> <mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>p</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mtd>
</mtr><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>m</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mtd>
<mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle><msub><mrow 
><mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>a</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">+</mo><msub><mrow 
> <mstyle mathvariant="bold-italic"><mstyle mathvariant="bold-italic"><mi 
>y</mi></mstyle></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math>
<!--l. 6--><p class="nopar" > </div> where  <div class="equation-star">
<!--tex4ht:inline--><!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" >
<mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msubsup><mrow 
><mstyle 
mathvariant="script"><mi 
>L</mi></mstyle></mrow><mrow 
><mi 
>t</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mi 
>n</mi></mrow></msubsup 
></mtd>
      <mtd columnalign="left" > <mo 
class="MathClass-punc" stretchy="false">:</mo> <mstyle 
class="text"><mtext  >probabilityÂ toÂ surviveÂ untilÂ ageÂ </mtext><mstyle 
class="math"><mi 
>t</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>n</mi></mstyle><mtext  >Â givenÂ aliveÂ atÂ ageÂ </mtext><mstyle 
class="math"><mi 
>t</mi></mstyle><mtext  ></mtext></mstyle></mtd>
                                                               <mtd columnalign="right" ></mtd>
</mtr><mtr 
><mtd columnalign="right" ><msubsup><mrow 
><mover 
accent="true"><mrow 
><mi 
>Î²</mi></mrow><mo accent="true">^</mo></mover></mrow><mrow 
><mi 
>t</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mi 
>n</mi></mrow></msubsup 
></mtd>
      <mtd columnalign="left" > <mo 
class="MathClass-punc" stretchy="false">:</mo> <mstyle 
class="text"><mtext  >age-varyingÂ discountÂ factorÂ betweenÂ agesÂ </mtext><mstyle 
class="math"><mi 
>t</mi></mstyle><mtext  >Â andÂ </mtext><mstyle 
class="math"><mi 
>t</mi> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mi 
>n</mi></mstyle><mtext  ></mtext></mstyle></mtd>
</mtr><mtr 
><mtd columnalign="right" ><msub><mrow 
><mi 
>Ïˆ</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mtd>    <mtd columnalign="left" > <mo 
class="MathClass-punc" stretchy="false">:</mo> <mstyle 
class="text"><mtext  >mean-oneÂ shockÂ toÂ permanentÂ income</mtext></mstyle></mtd>
</mtr><mtr 
><mtd columnalign="right" ><mo 
class="MathClass-ord">â„¶</mo></mtd>     
<mtd columnalign="left" > <mo 
class="MathClass-punc" stretchy="false">:</mo> <mstyle 
class="text"><mtext  >time-invariantÂ â€˜pureâ€™Â discountÂ factor</mtext></mstyle></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math>
<!--l. 6--><p class="nopar" > </div>and all the other variables are deï¬ned as in section <a 
href="#x1-20002">2<!--tex4ht:ref: sec:the-problem --></a>.
<!--l. 58--><p class="indent" >  Households start life at age <!--l. 58--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>s</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>2</mn><mn>5</mn></math> and live
with probability 1 until retirement (<!--l. 59--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>s</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>6</mn><mn>5</mn></math>).
Thereafter the survival probability shrinks every year and agents are dead by
<!--l. 60--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>s</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>9</mn><mn>1</mn></math> as
                                                                                     
                                                                                     
assumed by Cagetti.
<!--l. 1--><p class="indent" >  Transitory and permanent shocks are distributed as follows: <table class="equation"><tr><td>
<!--l. 2--><p class="indent" >
<!--l. 2--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-50002r59"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mi mathvariant="normal">Î</mi></mrow><mrow 
><mi 
>s</mi></mrow></msub 
></mtd>
      <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <mrow class="cases" > <mrow><mo fence="true" form="prefix"> {</mo><mrow> <mtable  align="axis" style=""  
equalrows="false" columnlines="none" equalcolumns="false" class="array" displaystyle="true"> <mtr class="array-row"><mtd 
class="array-td"  columnalign="left"><mn>0</mn>    <mspace width="1em" class="quad"/></mtd><mtd 
class="array-td"  columnalign="left"><mstyle 
class="text"><mtext  >withÂ probabilityÂ </mtext><mstyle 
class="math"><mi 
>q</mi> <mo 
class="MathClass-rel" stretchy="false">&#x003E;</mo> <mn>0</mn></mstyle><mtext  ></mtext></mstyle>                                            </mtd></mtr>  <mtr class="array-row"><mtd 
class="array-td"  columnalign="left"><msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
>
<mi 
>s</mi></mrow></msub 
><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mi 
>q</mi><mspace width="1em" class="quad"/></mtd><mtd 
class="array-td"  columnalign="left"><mstyle 
class="text"><mtext  >withÂ probabilityÂ </mtext><mstyle 
class="math"><mo 
class="MathClass-open" stretchy="false">(</mo><mn>1</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mi 
>q</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mstyle><mtext  >,Â whereÂ </mtext><mstyle 
class="math"><mo>log</mo><!--nolimits--> <msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
>
<mi 
>s</mi></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">âˆ½</mo> <mstyle 
mathvariant="script"><mi 
>N</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msubsup><mrow 
><mi 
>Ïƒ</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mn>2</mn></mrow></msubsup 
><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mn>2</mn><mo 
class="MathClass-punc" stretchy="false">,</mo><msubsup><mrow 
><mi 
>Ïƒ</mi></mrow><mrow 
>
<mi 
>ğœƒ</mi></mrow><mrow 
><mn>2</mn></mrow></msubsup 
><mo 
class="MathClass-close" stretchy="false">)</mo></mstyle><mtext  ></mtext></mstyle></mtd></mtr>  <mtr class="array-row"><mtd 
class="array-td"  columnalign="left"> <mspace width="1em" class="quad"/> </mtd></mtr> <!--@{}l@{\quad }l@{}--></mtable>                                  </mrow><mo fence="true" form="postfix"></mo></mrow> </mrow></mtd>
                                                                                                <mtd columnalign="right" ></mtd>
</mtr><mtr 
><mtd columnalign="right" ><mo>log</mo><!--nolimits--> <msub><mrow 
><mi 
>Ïˆ</mi></mrow><mrow 
><mi 
>s</mi></mrow></msub 
></mtd>
<mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">âˆ½</mo> <mstyle 
mathvariant="script"><mi 
>N</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msubsup><mrow 
><mi 
>Ïƒ</mi></mrow><mrow 
><mi 
>Ïˆ</mi></mrow><mrow 
><mn>2</mn></mrow></msubsup 
><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mn>2</mn><mo 
class="MathClass-punc" stretchy="false">,</mo><msubsup><mrow 
><mi 
>Ïƒ</mi></mrow><mrow 
>
<mi 
>Ïˆ</mi></mrow><mrow 
><mn>2</mn></mrow></msubsup 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
</mtr>                                                                                             </mtable></mtd>
</mtr>                                                                                             </mtable>
</math></td><td class="eq-no">(59)</td></tr></table>
<!--l. 12--><p class="indent" >  where <!--l. 12--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>q</mi></math>
is the probability of unemployment (and unemployment shocks are turned oï¬€ after
retirement).
<!--l. 78--><p class="indent" >  The parameter values for the shocks are taken from CarrollÂ (<a 
href="#Xcarroll:brookings">1992</a>),
<!--l. 78--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>q</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>0</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>5</mn><mo 
class="MathClass-bin" stretchy="false">âˆ•</mo><mn>1</mn><mn>0</mn><mn>0</mn></math>,
<!--l. 78--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>Ïƒ</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>0</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>1</mn></math>, and
<!--l. 78--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>Ïƒ</mi></mrow><mrow 
><mi 
>Ïˆ</mi></mrow></msub 
> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mn>0</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>1</mn></math>.<span class="footnote-mark"><a 
href="SolvingMicroDSOPs17.html#fn16x0"><sup class="textsuperscript">16</sup></a></span><a 
 id="x1-50003f16"></a>
     
The income growth proï¬le <!--l. 79--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math> is from
CarrollÂ (<a 
href="#XcarrollBSLCPIH">1997</a>) and the values of <!--l. 79--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle 
mathvariant="script"><mi 
>L</mi></mstyle></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math>
and <!--l. 79--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mi 
>Î²</mi></mrow><mo accent="true">^</mo></mover></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></math> are obtained from
CagettiÂ (<a 
href="#XcagettiWprofiles">2003</a>) (Figure <a 
href="#x1-5000718">18<!--tex4ht:ref: fig:TimeVaryingParam --></a>).<span class="footnote-mark"><a 
href="SolvingMicroDSOPs18.html#fn17x0"><sup class="textsuperscript">17</sup></a></span><a 
 id="x1-50005f17"></a>
      The
interest rate is assumed to equal <!--l. 79--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>1</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>0</mn><mn>3</mn></math>.
The model parameters are included in Table <a 
href="#x1-500087">7<!--tex4ht:ref: table:StrEstParams --></a>.
<!--l. 81--><p class="indent" >  <a 
 id="PlotTimeVaryingParam"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-5000718"></a>
                                                                                     
                                                                                     
<!--l. 83--><p class="noindent" ><img 
src="./Figures/PlotTimeVaryingParam.png" alt="PIC"  
width="433" height="268" >
<figcaption class="caption" ><span class="id">FigureÂ 18: </span><span  
class="content">Time Varying Parameters</span></figcaption><!--tex4ht:label?: x1-5000718 -->
                                                                                     
                                                                                     
<!--l. 86--><p class="indent" >  </figure>
<div class="table">
                                                                                     
                                                                                     
<!--l. 88--><p class="indent" >  <a 
 id="x1-500087"></a><figure class="float" 
>
                                                                                     
                                                                                     
<figcaption class="caption" ><span class="id">TableÂ 7: </span><span  
class="content">Parameter Values</span></figcaption><!--tex4ht:label?: x1-500087 -->
<div class="center" 
>
<!--l. 90--><p class="noindent" >
<div class="tabular"> <table id="TBL-13" class="tabular" 
 
><colgroup id="TBL-13-1g"><col 
id="TBL-13-1"><col 
id="TBL-13-2"><col 
id="TBL-13-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-13-1-"><td  style="text-align:center; white-space:nowrap;" id="TBL-13-1-1"  
class="td11"> <!--l. 93--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>Ïƒ</mi></mrow><mrow 
><mi 
>ğœƒ</mi></mrow></msub 
></math>  </td>
                                                                                           <td  style="text-align:center; white-space:nowrap;" id="TBL-13-1-2"  
class="td11"> <!--l. 93--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>1</mn></math>  </td>
                                                                                                                                                                                     <td  style="text-align:left; white-space:nowrap;" id="TBL-13-1-3"  
class="td11"> CarrollÂ (<a 
href="#Xcarroll:brookings">1992</a>)  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-13-2-"><td  style="text-align:center; white-space:nowrap;" id="TBL-13-2-1"  
class="td11"> <!--l. 94--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>Ïƒ</mi></mrow><mrow 
><mi 
>Ïˆ</mi></mrow></msub 
></math>  </td>
                                                                                           <td  style="text-align:center; white-space:nowrap;" id="TBL-13-2-2"  
class="td11"> <!--l. 94--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>1</mn></math>  </td>
                                                                                                                                                                                     <td  style="text-align:left; white-space:nowrap;" id="TBL-13-2-3"  
class="td11"> CarrollÂ (<a 
href="#Xcarroll:brookings">1992</a>)  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-13-3-"><td  style="text-align:center; white-space:nowrap;" id="TBL-13-3-1"  
class="td11"> <!--l. 95--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>q</mi></math>  </td>
                                                                                           <td  style="text-align:center; white-space:nowrap;" id="TBL-13-3-2"  
class="td11"> <!--l. 95--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>0</mn><mn>0</mn><mn>5</mn></math>  </td>
                                                                                                                                                                                     <td  style="text-align:left; white-space:nowrap;" id="TBL-13-3-3"  
class="td11"> CarrollÂ (<a 
href="#Xcarroll:brookings">1992</a>)  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-13-4-"><td  style="text-align:center; white-space:nowrap;" id="TBL-13-4-1"  
class="td11"> <!--l. 96--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>s</mi></mrow></msub 
></math>  </td><td  style="text-align:center; white-space:nowrap;" id="TBL-13-4-2"  
class="td11">                                  ï¬gure <a 
href="#x1-5000718">18<!--tex4ht:ref: fig:TimeVaryingParam --></a>                                                     </td><td  style="text-align:left; white-space:nowrap;" id="TBL-13-4-3"  
class="td11"> CarrollÂ (<a 
href="#XcarrollBSLCPIH">1997</a>)  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-13-5-"><td  style="text-align:center; white-space:nowrap;" id="TBL-13-5-1"  
class="td11"> <!--l. 97--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mi 
>Î²</mi></mrow><mo accent="true">^</mo></mover></mrow><mrow 
><mi 
>s</mi></mrow></msub 
><mo 
class="MathClass-punc" stretchy="false">,</mo><msub><mrow 
><mstyle 
mathvariant="script"><mi 
>L</mi></mstyle></mrow><mrow 
><mi 
>s</mi></mrow></msub 
></math>  </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-13-5-2"  
class="td11">                                  ï¬gure <a 
href="#x1-5000718">18<!--tex4ht:ref: fig:TimeVaryingParam --></a>                                                     </td>
<td  style="text-align:left; white-space:nowrap;" id="TBL-13-5-3"  
class="td11"> CagettiÂ (<a 
href="#XcagettiWprofiles">2003</a>)  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-13-6-"><td  style="text-align:center; white-space:nowrap;" id="TBL-13-6-1"  
class="td11"> <!--l. 98--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle></math>  </td>
<td  style="text-align:center; white-space:nowrap;" id="TBL-13-6-2"  
class="td11"> <!--l. 98--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>1</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>0</mn><mn>3</mn></math>  </td>
<td  style="text-align:left; white-space:nowrap;" id="TBL-13-6-3"  
class="td11"> CagettiÂ (<a 
href="#XcagettiWprofiles">2003</a>)  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-13-7-"><td  style="text-align:center; white-space:nowrap;" id="TBL-13-7-1"  
class="td11">                                                                           </td></tr></table>                                                                                                             </div></div>
                                                                                     
                                                                                     
  
</figure>
</div>
<!--l. 104--><p class="indent" >  The structural estimation of the parameters
<!--l. 104--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-ord">â„¶</mo></math> and
<!--l. 104--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï</mi></math> is
carried out using the procedure speciï¬ed in the following section, which is then implemented
in the <span 
class="ec-lmtt-12">StructEstimation.py </span>ï¬le. This ï¬le consists of two main components. The ï¬rst section
deï¬nes the objects required to execute the structural estimation procedure, while the second
section executes the procedure and various optional experiments with their corresponding
commands. The next section elaborates on the procedure and its accompanying code
implementation in greater detail.
<!--l. 112--><p class="indent" >  <a 
 id="estimation"></a>
  
<h4 class="subsectionHead"><span class="titlemark">10.2 </span> <a 
 id="x1-5100010.2"></a>Estimation</h4>
<!--l. 115--><p class="noindent" >When economists say that they are performing â€œstructural estimationâ€ of a model like this, they
mean that they have devised a formal procedure for searching for values for the parameters
<!--l. 117--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-ord">â„¶</mo></math> and
<!--l. 118--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï</mi></math> at
which some measure of the modelâ€™s outcome (like â€œmedian wealth by ageâ€) is as close as
possible to an empirical measure of the same thing. Here, we choose to match the
median of the wealth to permanent income ratio across 7 age groups, from age
<!--l. 121--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>2</mn><mn>6</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mn>3</mn><mn>0</mn></math> up to
<!--l. 122--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>5</mn><mn>6</mn> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <mn>6</mn><mn>0</mn></math>.<span class="footnote-mark"><a 
href="SolvingMicroDSOPs19.html#fn18x0"><sup class="textsuperscript">18</sup></a></span><a 
 id="x1-51001f18"></a>
     
The choice of matching the medians rather the means is motivated by the fact that the wealth
distribution is much more concentrated at the top than the model is capable of
explaining using a single set of parameter values. This means that in practice one
must pick some portion of the population who one wants to match well; since the
model has little hope of capturing the behavior of Bill Gates, but might conceivably
match the behavior of Homer Simpson, we choose to match medians rather than
means.
<!--l. 137--><p class="indent" >  As explained in section <a 
href="#x1-30003">3<!--tex4ht:ref: sec:normalization --></a>, it is convenient to work with the normalized version of the model
which can be written in Bellman form as:  <div class="equation-star">
                                                                                     
                                                                                     
<!--tex4ht:inline--><!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" >
<mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd>
         <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo><munder><mrow 
><mo>max</mo> </mrow><mrow 
><msub><mrow 
><mi 
>c</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mrow></munder 
><mspace width="0.33em" class="nbsp" /><mspace width="0.33em" class="nbsp" /><mspace width="0.33em" class="nbsp" /><mstyle mathvariant="normal"><mi 
>u</mi></mstyle><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>c</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mo 
class="MathClass-ord">â„¶</mo><msub><mrow 
><mstyle 
mathvariant="script"><mi 
>L</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><msub><mrow 
><mover 
accent="true"><mrow 
><mi 
>Î²</mi></mrow><mo accent="true">^</mo></mover></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">[</mo><msup><mrow 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>Ïˆ</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><msub><mrow 
><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mrow 
><mn>1</mn><mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><mi 
>Ï</mi></mrow></msup 
><msub><mrow 
><mstyle mathvariant="normal"><mi 
>v</mi></mstyle></mrow><mrow 
>
<mo 
class="MathClass-rel" stretchy="false">âˆ¼</mo><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">)</mo></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-close" stretchy="false">]</mo></mtd>
                                                                  <mtd columnalign="right" ></mtd>
</mtr><mtr 
><mtd columnalign="right" ></mtd>
         <mtd columnalign="left" ><mstyle 
class="text"><mtext  >s.t.</mtext></mstyle></mtd>
</mtr><mtr 
><mtd columnalign="right" ><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mtd>       <mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo> <msub><mrow 
><mi 
>c</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
></mtd>
</mtr><mtr 
><mtd columnalign="right" ><msub><mrow 
><mi 
>m</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mtd>    
<mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><munder><mrow 
><munder accentunder="false"><mrow> <mrow><mo fence="true" form="prefix"> (</mo><mrow>      <mfrac>
      <mrow 
>
      <mstyle mathvariant="sans-serif">
      <mi 
>R</mi></mstyle></mrow>
<mrow 
><msub><mrow 
>
<mi 
>Ïˆ</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><msub><mrow 
><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mrow></mfrac> </mrow><mo fence="true" form="postfix">)</mo></mrow></mrow><mo>âŸ</mo></munder> </mrow><mrow 
><mo 
class="MathClass-rel" stretchy="false">â‰¡</mo><msub><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mrow></munder 
> <mo 
class="MathClass-bin" stretchy="false">+</mo> <mspace width="0.33em" class="nbsp" /><msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math>
<!--l. 7--><p class="nopar" > </div>with the ï¬rst order condition: <a 
 id="eq-FOCLifeCycle"></a> <table class="equation"><tr><td>
<!--l. 1--><p class="indent" >
<!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-51003r60"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>c</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><msub><mrow 
><mi 
>c</mi></mrow><mrow 
>
<mi 
>t</mi></mrow></msub 
><mo 
class="MathClass-close" stretchy="false">)</mo></mtd><mtd columnalign="left" > <mo 
class="MathClass-rel" stretchy="false">=</mo> <mo 
class="MathClass-ord">â„¶</mo><msub><mrow 
><mstyle 
mathvariant="script"><mi 
>L</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><msub><mrow 
><mover 
accent="true"><mrow 
><mi 
>Î²</mi></mrow><mo accent="true">^</mo></mover></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><mstyle mathvariant="sans-serif"><mi 
>R</mi></mstyle><msub><mrow 
><mi 
>ğ”¼</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
> <mrow><mo fence="true" form="prefix"> [</mo><mrow><msup><mrow 
><mstyle mathvariant="normal"><mi 
>u</mi></mstyle></mrow><mrow 
><mi 
>c</mi></mrow></msup 
> <mrow><mo fence="true" form="prefix"> (</mo><mrow><msub><mrow 
><mi 
>Ïˆ</mi></mrow><mrow 
>
<mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><msub><mrow 
><mstyle 
mathvariant="script"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
><msub><mrow 
><mstyle mathvariant="normal"><mi 
>c</mi></mstyle></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
> <mrow><mo fence="true" form="prefix"> (</mo><mrow><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mi 
>t</mi></mrow></msub 
><msub><mrow 
><mi 
>â„›</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
> <mo 
class="MathClass-bin" stretchy="false">+</mo> <msub><mrow 
><mi 
>ğœƒ</mi></mrow><mrow 
><mi 
>t</mi><mo 
class="MathClass-bin" stretchy="false">+</mo><mn>1</mn></mrow></msub 
></mrow><mo fence="true" form="postfix">)</mo></mrow></mrow><mo fence="true" form="postfix">)</mo></mrow></mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-punc" stretchy="false">.</mo></mtd>
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(60)</td></tr></table>
<!--l. 160--><p class="indent" >  The ï¬rst substantive perch in this estimation procedure is to solve for the consumption
functions at each age. We need to discretize the shock distribution and solve for the policy
functions by backward induction using equation (<a 
href="#x1-51003r60">60<!--tex4ht:ref: eq:FOCLifeCycle --></a>) following the procedure in sections <a 
href="#x1-130006">6<!--tex4ht:ref: sec:solving-the-next --></a> and
â€˜Recursion.â€™ The latter routine is slightly complicated by the fact that we are considering a
life-cycle model and therefore the growth rate of permanent income, the probability of death,
the time-varying discount factor and the distribution of shocks will be diï¬€erent across the
years. We thus must ensure that at each backward iteration the right parameter values are
used.
<!--l. 173--><p class="indent" >  Correspondingly, the ï¬rst part of the <span 
class="ec-lmtt-12">StructEstimation.py </span>ï¬le begins by deï¬ning the agent
type by inheriting from the baseline agent type <span 
class="ec-lmtt-12">IndShockConsumerType</span>, with the modiï¬cation
to include time-varying discount factors. Next, an instance of this â€œlife-cycleâ€ consumer is
created for the estimation procedure. The number of periods for the life cycle of a given agent
is set and, following Cagetti, Â (<a 
href="#XcagettiWprofiles">2003</a>), we initialize the wealth to income ratio of agents at age
<!--l. 173--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>2</mn><mn>5</mn></math> by randomly assigning the
equal probability values to <!--l. 173--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>1</mn><mn>7</mn></math>,
<!--l. 173--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>5</mn><mn>0</mn></math> and
<!--l. 173--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>8</mn><mn>3</mn></math>.
In particular, we consider a population of agents at age 25 and follow their
consumption and wealth accumulation dynamics as they reach the age of
<!--l. 173--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>6</mn><mn>0</mn></math>, using
the appropriate age-speciï¬c consumption functions and the age-varying parameters. The
                                                                                     
                                                                                     
simulated medians are obtained by taking the medians of the wealth to income ratio of the
<!--l. 173--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>7</mn></math> age
groups.
<!--l. 175--><p class="indent" >  To complete the creation of the consumer type needed for the simulation, a history of shocks
is drawn for each agent across all periods by invoking the <span 
class="ec-lmtt-12">make_shock_history </span>function. This
involves discretizing the shock distribution for as many points as the number of agents we
want to simulate and then randomly permuting this shock vector as many times as we need to
simulate the model for. In this way, we obtain a time varying shock for each agent. This is
much more time eï¬ƒcient than drawing at each time from the shock distribution a shock for
each agent, and also ensures a stable distribution of shocks across the simulation periods even
for a small number of agents. (Similarly, in order to speed up the process, at each backward
iteration we compute the consumption function and other variables as a vector at
once.)
<!--l. 177--><p class="indent" >  With the age-varying consumption functions derived from the life-cycle agent, we can
proceed to generate simulated data and compute the corresponding medians. Estimating the
model involves comparing these simulated medians with empirical medians, measuring the
modelâ€™s success by calculating the diï¬€erence between the two. However, before performing the
necessary steps of solving and simulating the model to generate simulated moments, itâ€™s
important to note a diï¬ƒculty in producing the target moments using the available
data.
<!--l. 179--><p class="indent" >  Speciï¬cally, deï¬ning <!--l. 179--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Î¾</mi></math>
as the set of parameters to be estimated (in the current case
<!--l. 180--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Î¾</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mo 
class="MathClass-open" stretchy="false">{</mo><mi 
>Ï</mi><mo 
class="MathClass-punc" stretchy="false">,</mo> <mo 
class="MathClass-ord">â„¶</mo><mo 
class="MathClass-close" stretchy="false">}</mo></math>), we
could search for the parameter values which solve <table class="equation"><tr><td>
<!--l. 1--><p class="indent" >
<!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-51004r61"  class="label" ></mstyle><!--endlabel--><mtable 
class="gathered" columnalign="center" ><mtr> 
<mtd><mtable 
class="aligned"><mtr 
><mtd columnalign="right" ><munder><mrow 
><mo>min</mo> </mrow><mrow 
><mi 
>Î¾</mi></mrow></munder 
><munderover accentunder="false" accent="false"><mrow  
><mo  
> âˆ‘</mo>
    </mrow><mrow 
><mi 
>Ï„</mi><mo 
class="MathClass-rel" stretchy="false">=</mo><mn>1</mn></mrow><mrow 
><mn>7</mn></mrow></munderover 
><mo 
class="MathClass-rel" stretchy="false">|</mo><msup><mrow 
><mi 
>ğ”´</mi></mrow><mrow 
><mi 
>Ï„</mi></mrow></msup 
> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msup><mrow 
><mstyle mathvariant="bold"><mi 
>s</mi></mstyle></mrow><mrow 
><mi 
>Ï„</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>Î¾</mi><mo 
class="MathClass-close" stretchy="false">)</mo><mo 
class="MathClass-rel" stretchy="false">|</mo></mtd>
  
</mtr>                                                                                   </mtable></mtd>
</mtr>                                                                                   </mtable>
</math></td><td class="eq-no">(61)</td></tr></table>
<!--l. 194--><p class="indent" >  where <!--l. 194--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mi 
>ğ”´</mi></mrow><mrow 
><mi 
>Ï„</mi></mrow></msup 
></math>
and <!--l. 194--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mstyle mathvariant="bold"><mi 
>s</mi></mstyle></mrow><mrow 
><mi 
>Ï„</mi></mrow></msup 
></math> are
respectively the empirical and simulated medians of the wealth to permanent income ratio for age
group <!--l. 195--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï„</mi></math>.
A drawback of proceeding in this way is that it treats the empirically estimated medians as
though they reï¬‚ected perfect measurements of the truth. Imagine, however, that
one of the age groups happened to have (in the consumer survey) four times as
many data observations as another age group; then we would expect the median to
                                                                                     
                                                                                     
be more precisely estimated for the age group with more observations; yet (<a 
href="#x1-51004r61">61<!--tex4ht:ref: eq:naivePowell --></a>)
assigns equal importance to a deviation between the model and the data for all age
groups.
<!--l. 205--><p class="indent" >  We can get around this problem (and a variety of others) by instead minimizing a slightly
more complex object: <a 
 id="eq-StructEstim"></a> <table class="equation"><tr><td>
<!--l. 1--><p class="indent" >
<!--l. 1--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                              <mstyle 
   id="x1-51005r62"  class="label" ></mstyle><!--endlabel-->
                              <munder><mrow 
><mo>min</mo> </mrow><mrow 
><mi 
>Î¾</mi></mrow></munder 
><munderover accentunder="false" accent="false"><mrow  
><mo  
> âˆ‘</mo>
  </mrow><mrow 
><mi 
>i</mi></mrow><mrow 
><mi 
>N</mi></mrow></munderover 
><msub><mrow 
><mi 
>Ï‰</mi></mrow><mrow 
>
<mi 
>i</mi></mrow></msub 
> <mrow><mo fence="true" form="prefix"> |</mo><mrow><msubsup><mrow 
><mi 
>ğ”´</mi></mrow><mrow 
><mi 
>i</mi></mrow><mrow 
><mi 
>Ï„</mi></mrow></msubsup 
> <mo 
class="MathClass-bin" stretchy="false">âˆ’</mo><msup><mrow 
><mstyle mathvariant="bold"><mi 
>s</mi></mstyle></mrow><mrow 
><mi 
>Ï„</mi></mrow></msup 
><mo 
class="MathClass-open" stretchy="false">(</mo><mi 
>Î¾</mi><mo 
class="MathClass-close" stretchy="false">)</mo></mrow><mo fence="true" form="postfix">|</mo></mrow>
</math></td><td class="eq-no">(62)</td></tr></table>
<!--l. 215--><p class="indent" >  where <!--l. 215--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>Ï‰</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></math> is the weight
of household <!--l. 215--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>i</mi></math> in the
entire population,<span class="footnote-mark"><a 
href="SolvingMicroDSOPs20.html#fn19x0"><sup class="textsuperscript">19</sup></a></span><a 
 id="x1-51006f19"></a>
     
and <!--l. 221--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mi 
>ğ”´</mi></mrow><mrow 
><mi 
>i</mi></mrow><mrow 
><mi 
>Ï„</mi></mrow></msubsup 
></math>
is the empirical wealth to permanent income ratio of household
<!--l. 222--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>i</mi></math> whose head belongs
to age group <!--l. 223--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï„</mi></math>.
<!--l. 223--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>Ï‰</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></math> is
needed because unequal weight is assigned to each observation in the Survey of Consumer
Finances (SCF). The absolute value is used since the formula is based on the fact that
the median is the value that minimizes the sum of the absolute deviations from
itself.
<!--l. 231--><p class="indent" >  With this in mind, we turn our attention to the computation of the weighted median
wealth target moments for each age cohort using this data from the 2004 Survey of
Consumer Finances on household wealth. The objects necessary to accomplish this
task are <span 
class="ec-lmtt-12">weighted_median </span>and <span 
class="ec-lmtt-12">get_targeted_moments</span>. The actual data are taken
from several waves of the SCF and the medians and means for each age category
are plotted in ï¬gure <a 
href="#x1-5100819">19<!--tex4ht:ref: fig:MeanMedianSCF --></a>. More details on the SCF data are included in appendix
<a 
href="#x1-55000A">A<!--tex4ht:ref: app:scf-data --></a>.
<!--l. 239--><p class="indent" >  <a 
 id="PlotMeanMedianSCFcollegeGrads"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-5100819"></a>
                                                                                     
                                                                                     
<!--l. 242--><p class="noindent" ><img 
src="./Figures/PlotMeanMedianSCFcollegeGrads.png" alt="PIC"  
width="433" height="257" >
<figcaption class="caption" ><span class="id">FigureÂ 19: </span><span  
class="content">Wealth to Permanent Income Ratios from SCF (means (dashed) and medians
(solid))</span></figcaption><!--tex4ht:label?: x1-5100819 -->
                                                                                     
                                                                                     
<!--l. 245--><p class="indent" >  </figure>
<!--l. 247--><p class="indent" >  We now turn our attention to the two key functions in this section of the code ï¬le. The ï¬rst,
<span 
class="ec-lmtt-12">simulate_moments</span>, executes the solving (<span 
class="ec-lmtt-12">solve</span>) and simulation (<span 
class="ec-lmtt-12">simulation</span>)
steps for the deï¬ned life-cycle agent. Subsequently, the function uses the agentsâ€™
tracked levels of wealth based on their optimal consumption behavior to compute
and store the simulated median wealth to income ratio for each age cohort. The
second function, <span 
class="ec-lmtt-12">smmObjectiveFxn</span>, calls the <span 
class="ec-lmtt-12">simulate_moments </span>function to create
the objective function described in (<a 
href="#x1-51005r62">62<!--tex4ht:ref: eq:StructEstim --></a>), which is necessary to perform the SMM
estimation.
<!--l. 261--><p class="indent" >  Thus, for a given pair of the parameters to be estimated, the single call to the function
<span 
class="ec-lmtt-12">smmObjectiveFxn </span>executes the following:
<ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-51010x1">      
<!--l. 264--><p class="noindent" >solves for the consumption functions for the life-cycle agent
</li>
<li 
  class="enumerate" id="x1-51012x2">      
<!--l. 265--><p class="noindent" >simulates the data and computes the simulated medians
</li>
<li 
  class="enumerate" id="x1-51014x3">      
<!--l. 266--><p class="noindent" >returns the value of equation (<a 
href="#x1-51005r62">62<!--tex4ht:ref: eq:StructEstim --></a>)</li></ol>
<!--l. 269--><p class="indent" >  We delegate the task of ï¬nding the coeï¬ƒcients that minimize the <span 
class="ec-lmtt-12">smmObjectiveFxn</span>
function to the <span 
class="ec-lmtt-12">minimize_nelder_mead </span>function, which is deï¬ned elsewhere and called in the
second part of this ï¬le. This task can be quite slow and rather problematic if the
<span 
class="ec-lmtt-12">smmObjectiveFxn </span>function has very ï¬‚at regions or sharp features. It is thus wise to verify the
accuracy of the solution, for example by experimenting with a variety of alternative starting
values for the parameter search.
<!--l. 271--><p class="indent" >  The ï¬nal object deï¬ned in this ï¬rst part of the <span 
class="ec-lmtt-12">StructEstimation.py</span>
ï¬le is <span 
class="ec-lmtt-12">calculateStandardErrorsByBootstrap</span>. As the name suggests,
the purpose of this function is to compute the standard errors by
bootstrap.<span class="footnote-mark"><a 
href="SolvingMicroDSOPs21.html#fn20x0"><sup class="textsuperscript">20</sup></a></span><a 
 id="x1-51015f20"></a>
     
This involves:
<ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-51018x1">      
<!--l. 277--><p class="noindent" >drawing new shocks for the simulation
                                                                                     
                                                                                     
      
</li>
<li 
  class="enumerate" id="x1-51020x2">      
<!--l. 278--><p class="noindent" >drawing a random sample (with replacement) of actual data from the SCF
</li>
<li 
  class="enumerate" id="x1-51022x3">      
<!--l. 279--><p class="noindent" >obtaining new estimates for <!--l. 279--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï</mi></math>
and <!--l. 279--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-ord">â„¶</mo></math></li></ol>
<!--l. 281--><p class="noindent" >We repeat the above procedure several times (<span 
class="ec-lmtt-12">Bootstrap</span>) and take the standard deviation for
each of the estimated parameters across the various bootstrap iterations.
<!--l. 284--><p class="indent" >  <a 
 id="sensitivity-measures"></a>
  
<h5 class="subsubsectionHead"><span class="titlemark">10.2.1 </span> <a 
 id="x1-5200010.2.1"></a>An Aside to Computing Sensitivity Measures</h5>
<!--l. 288--><p class="noindent" >A common drawback in commonly used structural estimation procedures is a lack of
transparency in its estimates. As <a 
href="#Xandrews2017measuring">Andrews, Gentzkow, and Shapiro</a>Â (<a 
href="#Xandrews2017measuring">2017</a>) notes, a
researcher employing such structural empirical methods may be interested in how
alternative assumptions (such as misspeciï¬cation or measurement bias in the data)
would â€œchange the moments of the data that the estimator uses as inputs, and how
changes in these moments aï¬€ect the estimates.â€ The authors provide a measure of
sensitivity for given estimator that makes it easy to map the eï¬€ects of diï¬€erent
assumptions on the moments into predictable bias in the estimates for non-linear
models.
<!--l. 290--><p class="indent" >  In the language of <a 
href="#Xandrews2017measuring">Andrews, Gentzkow, and Shapiro</a>Â (<a 
href="#Xandrews2017measuring">2017</a>), section <a 
href="#x1-4900010">10<!--tex4ht:ref: sec:structural-estimation --></a> is aimed at providing an estimator
<!--l. 290--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Î¾</mi> <mo 
class="MathClass-rel" stretchy="false">=</mo> <mo 
class="MathClass-open" stretchy="false">{</mo><mi 
>Ï</mi><mo 
class="MathClass-punc" stretchy="false">,</mo> <mo 
class="MathClass-ord">â„¶</mo><mo 
class="MathClass-close" stretchy="false">}</mo></math> that has some true
value <!--l. 290--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>Î¾</mi></mrow><mrow 
><mn>0</mn></mrow></msub 
></math> by assumption.
Under the assumption <!--l. 290--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>a</mi></mrow><mrow 
><mn>0</mn></mrow></msub 
></math>
of the researcher, the empirical targets computed from the SCF is measured
accurately. These moments of the data are precisely what determine our estimate
<!--l. 290--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mi 
>Î¾</mi></mrow><mo accent="true">^</mo></mover></math>, which minimizes (<a 
href="#x1-51005r62">62<!--tex4ht:ref: eq:StructEstim --></a>). Under
alternative assumptions <!--l. 290--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math>,
such that a given cohort is mismeasured in the survey, a diï¬€erent estimate is
computed. Using the plug-in estimate provided by the authors, we can see
quantitatively how our estimate changes under these alternative assumptions
<!--l. 290--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>a</mi></math> which
correspond to mismeasurement in the median wealth to income ratio for a given age
cohort.
<!--l. 292--><p class="indent" >  <a 
 id="estimation-results"></a>
                                                                                     
                                                                                     
  
<h4 class="subsectionHead"><span class="titlemark">10.3 </span> <a 
 id="x1-5300010.3"></a>Results</h4>
<!--l. 294--><p class="noindent" >The second part of the ï¬le <span 
class="ec-lmtt-12">StructEstimation.py </span>deï¬nes a function <span 
class="ec-lmtt-12">main </span>which produces our
<!--l. 295--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï</mi></math> and
<!--l. 296--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-ord">â„¶</mo></math>
estimates with standard errors using 10,000 simulated agents by setting the
positional arguments <span 
class="ec-lmtt-12">estimate_model </span>and <span 
class="ec-lmtt-12">compute_standard_errors </span>to
true.<span class="footnote-mark"><a 
href="SolvingMicroDSOPs22.html#fn21x0"><sup class="textsuperscript">21</sup></a></span><a 
 id="x1-53001f21"></a>
      Results are
reported in Table <a 
href="#x1-530058">8<!--tex4ht:ref: tab:EstResults --></a>.<span class="footnote-mark"><a 
href="SolvingMicroDSOPs23.html#fn22x0"><sup class="textsuperscript">22</sup></a></span><a 
 id="x1-53003f22"></a>
     
<div class="table">
                                                                                     
                                                                                     
<!--l. 1--><p class="indent" >  <a 
 id="x1-530058"></a><figure class="float" 
>
                                                                                     
                                                                                     
<figcaption class="caption" ><span class="id">TableÂ 8: </span><span  
class="content">Estimation Results</span></figcaption><!--tex4ht:label?: x1-530058 -->
<div class="tabular"> <table id="TBL-14" class="tabular" 
 
><colgroup id="TBL-14-1g"><col 
id="TBL-14-1"><col 
id="TBL-14-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-14-1-"><td  style="text-align:center; white-space:nowrap;" id="TBL-14-1-1"  
class="td11"> <!--l. 6--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï</mi></math> </td>
                                                                                           <td  style="text-align:center; white-space:nowrap;" id="TBL-14-1-2"  
class="td11"> <!--l. 6--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-ord">â„¶</mo></math>  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-14-2-"><td  style="text-align:center; white-space:nowrap;" id="TBL-14-2-1"  
class="td11"> <!--l. 8--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>3</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>6</mn><mn>9</mn></math>  </td><td  style="text-align:center; white-space:nowrap;" id="TBL-14-2-2"  
class="td11"> <!--l. 8--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>8</mn><mn>8</mn></math>  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-14-3-"><td  style="text-align:center; white-space:nowrap;" id="TBL-14-3-1"  
class="td11"> <!--l. 9--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">(</mo><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>0</mn><mn>4</mn><mn>7</mn><mo 
class="MathClass-close" stretchy="false">)</mo></math>  </td><td  style="text-align:center; white-space:nowrap;" id="TBL-14-3-2"  
class="td11"> <!--l. 9--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">(</mo><mn>0</mn><mo 
class="MathClass-punc" stretchy="false">.</mo><mn>0</mn><mn>0</mn><mn>2</mn><mo 
class="MathClass-close" stretchy="false">)</mo></math>  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-14-4-"><td  style="text-align:center; white-space:nowrap;" id="TBL-14-4-1"  
class="td11">                                                                           </td></tr></table>                                                                                          </div>
                                                                                     
                                                                                     
  
</figure>
</div>
<!--l. 327--><p class="indent" >  The literature on consumption and saving behavior over the lifecycle in the presence of labor income
uncertainty<span class="footnote-mark"><a 
href="SolvingMicroDSOPs24.html#fn23x0"><sup class="textsuperscript">23</sup></a></span><a 
 id="x1-53006f23"></a>
     
warns us to be careful in disentangling the eï¬€ect of time preference and risk aversion when
describing the optimal behavior of households in this setting. Since the precautionary saving
motive dominates in the early stages of life, the coeï¬ƒcient of relative risk aversion (as well
as expected labor income growth) has a larger eï¬€ect on optimal consumption and
saving behavior through their magnitude relative to the interest rate. Over time,
life-cycle considerations (such as saving for retirement) become more important and the
time preference factor plays a larger role in determining optimal behavior for this
cohort.
<!--l. 329--><p class="indent" >  Using the positional argument <span 
class="ec-lmtt-12">compute_sensitivity</span>, Figure <a 
href="#x1-5300820">20<!--tex4ht:ref: fig:PlotSensitivityMeasure --></a> provides
a plot of the plug-in estimate of the sensitivity measure described in
<a 
href="#x1-5200010.2.1">10.2.1<!--tex4ht:ref: subsubsec:sensmeas --></a>. As you can see from the ï¬gure the inverse relationship between
<!--l. 329--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï</mi></math> and
<!--l. 329--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-ord">â„¶</mo></math> over the
life-cycle is retained by the sensitivity measure. Speciï¬cally, under the alternative assumption that
<span 
class="ec-lmri-12">a particular cohort is mismeasured in the SCF dataset</span>, we see that the y-axis suggests that our
estimate of <!--l. 329--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï</mi></math>
and <!--l. 329--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-ord">â„¶</mo></math>
change in a predictable way.
<!--l. 331--><p class="indent" >  Suppose that there are not enough observations of the oldest cohort of households in the
sample. Suppose further that the researcher predicts that adding more observations of these
households to correct this mismeasurement would correspond to a higher median wealth to
income ratio for this cohort. In this case, our estimate of the time preference factor should
increase: the behavior of these older households is driven by their time preference, so a higher
value of <!--l. 331--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-ord">â„¶</mo></math> is
required to match the aï¬€ected wealth to income targets under this alternative assumption.
Since risk aversion is less important in explaining the behavior of this cohort, a lower value of
<!--l. 331--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï</mi></math> is
required to match the aï¬€ected empirical moments.
<!--l. 333--><p class="indent" >  To recap, the sensitivity measure not only matches our intuition about the inverse relationship
between <!--l. 333--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï</mi></math>
and <!--l. 333--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-ord">â„¶</mo></math>
over the life-cycle, but provides a quantitative estimate of what would happen to our estimates
of these parameters under the alternative assumption that the data is mismeasured in some
way.
<!--l. 335--><p class="indent" >  <a 
 id="PlotSensitivityMeasure"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-5300820"></a>
                                                                                     
                                                                                     
<!--l. 337--><p class="noindent" > <img 
src="./Figures/Sensitivity-.png" alt="PIC"  
width="433" height="325" >
<figcaption class="caption" ><span class="id">FigureÂ 20:                        </span><span  
class="content">Sensitivity                        of                        Estimates
<!--l. 338--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">{</mo><mi 
>Ï</mi><mo 
class="MathClass-punc" stretchy="false">,</mo> <mo 
class="MathClass-ord">â„¶</mo><mo 
class="MathClass-close" stretchy="false">}</mo></math>
regarding Alternative Mismeasurement Assumptions.</span></figcaption><!--tex4ht:label?: x1-5300820 -->
                                                                                     
                                                                                     
<!--l. 340--><p class="indent" >  </figure>
<!--l. 342--><p class="indent" >  By setting the positional argument <span 
class="ec-lmtt-12">make_contour_plot </span>to true, Figure <a 
href="#x1-5300921">21<!--tex4ht:ref: fig:PlotContourMedianStrEst --></a> shows the
contour plot of the <span 
class="ec-lmtt-12">smmObjectiveFxn </span>function and the parameter estimates. The contour plot
shows equally spaced isoquants of the <span 
class="ec-lmtt-12">smmObjectiveFxn </span>function, i.e.Â the pairs of
<!--l. 342--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>Ï</mi></math> and
<!--l. 342--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-ord">â„¶</mo></math> which
lead to the same deviations between simulated and empirical medians (equivalent
values of equation (<a 
href="#x1-51005r62">62<!--tex4ht:ref: eq:StructEstim --></a>)). Interestingly, there is a large rather ï¬‚at region; or, more
formally speaking, there exists a broad set of parameter pairs which leads to similar
simulated wealth to income ratios. Intuitively, the ï¬‚atter and larger is this region,
the harder it is for the structural estimation procedure to precisely identify the
parameters.
<!--l. 345--><p class="indent" >  <a 
 id="PlotContourMedianStrEst"></a> <figure class="figure"> 

                                                                                     
                                                                                     
<a 
 id="x1-5300921"></a>
                                                                                     
                                                                                     
<!--l. 347--><p class="noindent" > <img 
src="./Figures/SMMcontour-.png" alt="PIC"  
width="433" height="325" >
<figcaption class="caption" ><span class="id">FigureÂ 21:     </span><span  
class="content">Contour     Plot     (larger     values     are     shown     lighter)     with
<!--l. 348--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mo 
class="MathClass-open" stretchy="false">{</mo><mi 
>Ï</mi><mo 
class="MathClass-punc" stretchy="false">,</mo> <mo 
class="MathClass-ord">â„¶</mo><mo 
class="MathClass-close" stretchy="false">}</mo></math>
Estimates (red dot).</span></figcaption><!--tex4ht:label?: x1-5300921 -->
                                                                                     
                                                                                     
<!--l. 350--><p class="indent" >  </figure>
<!--l. 5--><p class="indent" >  <a 
 id="conclusion"></a>
  
<h3 class="sectionHead"><span class="titlemark">11 </span> <a 
 id="x1-5400011"></a>Conclusion</h3>
<!--l. 8--><p class="noindent" >Many choices can be made for solving microeconomic dynamic stochastic optimization
problems. The set of techniques, and associated code, described in these notes represents an
approach that I have found to be powerful, ï¬‚exible, and eï¬ƒcient, but other problems may
require other techniques. For a much broader treatment of many of the issues considered here,
see JuddÂ (<a 
href="#Xjudd:book">1998</a>).
                                                                                     
                                                                                     
  
<div  
class="centerline">                                             <span 
class="ec-lmr-17x-x-120">Appendices</span>                            </div>
<!--l. 6--><p class="indent" >  <a 
 id="scf-data"></a>
  <h3 class="sectionHead"><span class="titlemark">
A </span> <a 
 id="x1-55000A"></a>SCF Data</h3>
<!--l. 9--><p class="noindent" >Data used in the estimation is constructed using the SCF 1992, 1995, 1998,
2001 and 2004 waves. The deï¬nition of wealth is net worth including housing
wealth, but excluding pensions and social securities. The data set contains
only households whose heads are aged 26-60 and excludes singles, following
CagettiÂ (<a 
href="#XcagettiWprofiles">2003</a>).<span class="footnote-mark"><a 
href="SolvingMicroDSOPs25.html#fn24x0"><sup class="textsuperscript">24</sup></a></span><a 
 id="x1-55001f24"></a>
     
Furthermore, the data set contains only households whose heads are college graduates. The
total sample size is 4,774.
<!--l. 11--><p class="indent" >  In the waves between 1995 and 2004 of the SCF, levels of <span 
class="ec-lmri-12">normal </span>income are reported. The
question in the questionnaire is &#x0022;About what would your income have been if it had been a normal
year?&#x0022; We consider the level of normal income as corresponding to the modelâ€™s theoretical
object <!--l. 11--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>P</mi></math>,
permanent noncapital income. Levels of normal income are not reported in the 1992 wave.
Instead, in this wave there is a variable which reports whether the level of income is normal or
not. Regarding the 1992 wave, only observations which report that the level of income is
normal are used, and the levels of income of remaining observations in the 1992 wave are
interpreted as the levels of permanent income.
<!--l. 13--><p class="indent" >  Normal income levels in the SCF are before-tax ï¬gures. These before-tax permanent income
ï¬gures must be rescaled so that the median of the rescaled permanent income of each age
group matches the median of each age groupâ€™s income which is assumed in the simulation.
This rescaled permanent income is interpreted as after-tax permanent income. Rescaling is
crucial since in the estimation empirical proï¬les are matched with simulated ones which are
generated using after-tax permanent income (remember the income process assumed in the
main text). Wealth / permanent income ratio is computed by dividing the level of
wealth by the level of (after-tax) permanent income, and this ratio is used for the
estimation.<span class="footnote-mark"><a 
href="SolvingMicroDSOPs26.html#fn25x0"><sup class="textsuperscript">25</sup></a></span><a 
 id="x1-55003f25"></a>
     
                                                                                     
                                                                                     
  
<h3 class="likesectionHead"><a 
 id="x1-56000"></a>References</h3>
<!--l. 5--><p class="noindent" >  
<div class="thebibliography">
<p class="bibitem" ><span class="biblabel">
<a 
 id="Xandrews2017measuring"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Andrews,  Isaiah,  Matthew  Gentzkow,  and  Jesse</span><span 
class="ec-lmcsc-10x-x-120">Â M  Shapiro  </span>(2017):
â€œMeasuring  the  sensitivity  of  parameter  estimates  to  estimation  moments,â€  <span 
class="ec-lmri-12">The</span>
<span 
class="ec-lmri-12">Quarterly Journal of Economics</span>, 132(4), 1553â€“1592.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="XAttanasioBanksMeghirWeber"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Attanasio, O.P., J.</span><span 
class="ec-lmcsc-10x-x-120">Â Banks, C.</span><span 
class="ec-lmcsc-10x-x-120">Â Meghir, and G.</span><span 
class="ec-lmcsc-10x-x-120">Â Weber </span>(1999): â€œHumps
and Bumps in Lifetime Consumption,â€ <span 
class="ec-lmri-12">Journal of Business and Economic Statistics</span>,
17(1), 22â€“35.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="Xbellman1957"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Bellman, Richard </span>(1957): <span 
class="ec-lmri-12">Dynamic Programming</span>. Princeton University Press,
Princeton, NJ.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="XcagettiWprofiles"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Cagetti,  Marco  </span>(2003):  â€œWealth  Accumulation  Over  the  Life  Cycle  and
Precautionary Savings,â€ <span 
class="ec-lmri-12">Journal of Business and Economic Statistics</span>, 21(3), 339â€“353.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="Xcarroll:brookings"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Carroll, Christopher</span><span 
class="ec-lmcsc-10x-x-120">Â D. </span>(1992): â€œThe Buï¬€er-Stock Theory of Saving: Some
Macroeconomic Evidence,â€ <span 
class="ec-lmri-12">Brookings Papers on Economic Activity</span>, 1992(2), 61â€“156.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="XcarrollBSLCPIH"></a><span class="bibsp">Â Â Â </span></span>__________<span 
class="ec-lmcsc-10x-x-120">Â   </span>(1997):  â€œBuï¬€er  Stock  Saving  and  the  Life  Cycle/Permanent  Income
Hypothesis,â€ <span 
class="ec-lmri-12">Quarterly Journal of Economics</span>, CXII(1), 1â€“56.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="Xcarroll:richportfolios"></a><span class="bibsp">Â Â Â </span></span>__________<span 
class="ec-lmcsc-10x-x-120">Â                                 </span>(2002):                                     â€œPortfolios
of the Rich,â€ in <span 
class="ec-lmri-12">Household Portfolios: Theory and Evidence</span>. MIT Press, Cambridge,
MA, <a 
href="https://www.econ2.jhu.edu/people/ccarroll/richportfolios.pdf" class="url" ><span 
class="ec-lmtt-12">https://www.econ2.jhu.edu/people/ccarroll/richportfolios.pdf</span></a>.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="XcarrollEGM"></a><span class="bibsp">Â Â Â </span></span>__________<span 
class="ec-lmcsc-10x-x-120">Â  </span>(2006):  â€œThe  Method  of  Endogenous  Gridpoints  for  Solving  Dynamic
Stochastic    Optimization    Problems,â€    <span 
class="ec-lmri-12">Economics    Letters</span>,    91(3),    312â€“320,
<a 
href="https://www.econ2.jhu.edu/people/ccarroll/EndogenousGridpoints.pdf" class="url" ><span 
class="ec-lmtt-12">https://www.econ2.jhu.edu/people/ccarroll/EndogenousGridpoints.pdf</span></a>.
                                                                                     
                                                                                     
  
</p>
<p class="bibitem" ><span class="biblabel">
<a 
 id="XSolvingMicroDSOPs"></a><span class="bibsp">Â Â Â </span></span>__________<span 
class="ec-lmcsc-10x-x-120">Â   </span>(2023a):  â€œSolving  Microeconomic  Dynamic  Stochastic  Optimization
Problems,â€ <span 
class="ec-lmri-12">Econ-ARK REMARK</span>.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="XBufferStockTheory"></a><span class="bibsp">Â Â Â </span></span>__________<span 
class="ec-lmcsc-10x-x-120">Â  </span>(2023b): â€œTheoretical Foundations of Buï¬€er Stock Saving,â€ <span 
class="ec-lmri-12">Revise and</span>
<span 
class="ec-lmri-12">Resubmit, Quantitative Economics</span>.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="XckConcavity"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Carroll,               Christopher</span><span 
class="ec-lmcsc-10x-x-120">Â D.,               and               Miles</span><span 
class="ec-lmcsc-10x-x-120">Â S.</span>
<span 
class="ec-lmcsc-10x-x-120">Kimball </span>(1996): â€œOn the Concavity of the Consumption Function,â€ <span 
class="ec-lmri-12">Econometrica</span>,
64(4), 981â€“992, <a 
href="https://www.econ2.jhu.edu/people/ccarroll/concavity.pdf" class="url" ><span 
class="ec-lmtt-12">https://www.econ2.jhu.edu/people/ccarroll/concavity.pdf</span></a>.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="Xmethod-of-moderation"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Carroll,  Christopher</span><span 
class="ec-lmcsc-10x-x-120">Â D.,  Alan  Lujan,  Karsten  Chipeniuk,  Kiichi</span>
<span 
class="ec-lmcsc-10x-x-120">Tokuoka, and Weifeng Wu </span>(2026): â€œThe Method of Moderation,â€ <span 
class="ec-lmri-12">Manuscript,</span>
<span 
class="ec-lmri-12">Johns Hopkins University</span>, REMARK replication package; paper and reproducibility
materials at <a 
href="https://github.com/econ-ark/method-of-moderation" class="url" ><span 
class="ec-lmtt-12">https://github.com/econ-ark/method-of-moderation</span></a>.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="Xcarroll&samwick:nature"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Carroll, Christopher</span><span 
class="ec-lmcsc-10x-x-120">Â D., and Andrew</span><span 
class="ec-lmcsc-10x-x-120">Â A. Samwick </span>(1997): â€œThe Nature
of Precautionary Wealth,â€ <span 
class="ec-lmri-12">Journal of Monetary Economics</span>, 40(1), 41â€“71.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="XdeatonLiqConstr"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Deaton, Angus</span><span 
class="ec-lmcsc-10x-x-120">Â S. </span>(1991): â€œSaving and Liquidity Constraints,â€ <span 
class="ec-lmri-12">Econometrica</span>, 59,
1221â€“1248, <a 
href="https://www.jstor.org/stable/2938366" class="url" ><span 
class="ec-lmtt-12">https://www.jstor.org/stable/2938366</span></a>.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="XdeatonUnderstandingC"></a><span class="bibsp">Â Â Â </span></span>__________<span 
class="ec-lmcsc-10x-x-120">Â  </span>(1992): <span 
class="ec-lmri-12">Understanding Consumption</span>. Oxford University Press, New York.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="XdenHaanMarcet:parameterized"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">den Haan, Wouter</span><span 
class="ec-lmcsc-10x-x-120">Â J, and Albert Marcet </span>(1990): â€œSolving the Stochastic
Growth Model by Parameterizing Expectations,â€ <span 
class="ec-lmri-12">Journal of Business and Economic</span>
<span 
class="ec-lmri-12">Statistics</span>,                 8(1),                 31â€“34,                 Available                 at
<a 
href="http://ideas.repec.org/a/bes/jnlbes/v8y1990i1p31-34.html" class="url" ><span 
class="ec-lmtt-12">http://ideas.repec.org/a/bes/jnlbes/v8y1990i1p31-34.html</span></a>.
</p>
                                                                                     
                                                                                     
  
<p class="bibitem" ><span class="biblabel">
<a 
 id="XgpLifecycle"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Gourinchas, Pierre-Olivier, and Jonathan Parker </span>(2002): â€œConsumption
Over the Life Cycle,â€ <span 
class="ec-lmri-12">Econometrica</span>, 70(1), 47â€“89.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="XhorowitzBootstrap"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Horowitz, Joel</span><span 
class="ec-lmcsc-10x-x-120">Â L. </span>(2001): â€œThe Bootstrap,â€ in <span 
class="ec-lmri-12">Handbook of Econometrics</span>, ed.
by JamesÂ J. Heckman, and Edward Leamer, vol.Â 5. Elsevier/North Holland.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="Xjudd:book"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Judd, Kenneth</span><span 
class="ec-lmcsc-10x-x-120">Â L. </span>(1998): <span 
class="ec-lmri-12">Numerical Methods in Economics</span>. The MIT Press,
Cambridge, Massachusetts.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="Xkopecky2010finite"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Kopecky,  Karen</span><span 
class="ec-lmcsc-10x-x-120">Â A.,  and  Richard</span><span 
class="ec-lmcsc-10x-x-120">Â M.H.  Suen  </span>(2010):   â€œFinite   State
Markov-Chain Approximations To Highly Persistent Processes,â€ <span 
class="ec-lmri-12">Review of Economic</span>
<span 
class="ec-lmri-12">Dynamics</span>, 13(3), 701â€“714, <a 
href="http://www.karenkopecky.net/RouwenhorstPaper.pdf" class="url" ><span 
class="ec-lmtt-12">http://www.karenkopecky.net/RouwenhorstPaper.pdf</span></a>.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="Xmerton:restat"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Merton, Robert</span><span 
class="ec-lmcsc-10x-x-120">Â C. </span>(1969): â€œLifetime Portfolio Selection under Uncertainty: The
Continuous Time Case,â€ <span 
class="ec-lmri-12">Review of Economics and Statistics</span>, 51, 247â€“257.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="Xpalumbo:medical"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Palumbo, Michael</span><span 
class="ec-lmcsc-10x-x-120">Â G </span>(1999): â€œUncertain Medical Expenses and Precautionary
Saving Near the End of the Life Cycle,â€ <span 
class="ec-lmri-12">Review of Economic Studies</span>, 66(2), 395â€“421,
Available at <a 
href="http://ideas.repec.org/a/bla/restud/v66y1999i2p395-421.html" class="url" ><span 
class="ec-lmtt-12">http://ideas.repec.org/a/bla/restud/v66y1999i2p395-421.html</span></a>.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="Xsamuelson:portfolio"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Samuelson, Paul</span><span 
class="ec-lmcsc-10x-x-120">Â A. </span>(1969): â€œLifetime Portfolio Selection by Dynamic Stochastic
Programming,â€ <span 
class="ec-lmri-12">Review of Economics and Statistics</span>, 51, 239â€“46.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="XTanaka2013-bc"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Tanaka,          Kenâ€™ichiro,          and          Alexis</span><span 
class="ec-lmcsc-10x-x-120">Â Akira          Toda</span>
(2013): â€œDiscrete approximations of continuous distributions by maximum entropy,â€
<span 
class="ec-lmri-12">Economics letters</span>, 118(3), 445â€“450.
</p>  
<p class="bibitem" ><span class="biblabel">
<a 
 id="XzeldesStochastic"></a><span class="bibsp">Â Â Â </span></span><span 
class="ec-lmcsc-10x-x-120">Zeldes,  Stephen</span><span 
class="ec-lmcsc-10x-x-120">Â P. </span>(1989):  â€œOptimal  Consumption  with  Stochastic  Income:
Deviations  from  Certainty  Equivalence,â€  <span 
class="ec-lmri-12">Quarterly Journal of Economics</span>,  104(2),
275â€“298.
                                                                                     
                                                                                     
</p>  
</div>
 
</body> 
</html>
                                                                                     


